{"decls":[{"kind":"export","names":["ext.yaml.yaml_is_err","ext.yaml.yaml_parse"]},{"body":["begin",["let","o","out"],["if",["=","c",34],["begin",["set","o",["vec_u8.push","o",92]],["set","o",["vec_u8.push","o",34]],["return","o"]],0],["if",["=","c",92],["begin",["set","o",["vec_u8.push","o",92]],["set","o",["vec_u8.push","o",92]],["return","o"]],0],["if",["=","c",8],["begin",["set","o",["vec_u8.push","o",92]],["set","o",["vec_u8.push","o",98]],["return","o"]],0],["if",["=","c",12],["begin",["set","o",["vec_u8.push","o",92]],["set","o",["vec_u8.push","o",102]],["return","o"]],0],["if",["=","c",10],["begin",["set","o",["vec_u8.push","o",92]],["set","o",["vec_u8.push","o",110]],["return","o"]],0],["if",["=","c",13],["begin",["set","o",["vec_u8.push","o",92]],["set","o",["vec_u8.push","o",114]],["return","o"]],0],["if",["=","c",9],["begin",["set","o",["vec_u8.push","o",92]],["set","o",["vec_u8.push","o",116]],["return","o"]],0],["if",["<u","c",32],["begin",["let","hi",["ext.yaml._hex_digit",["&",[">>u","c",4],15]]],["let","lo",["ext.yaml._hex_digit",["&","c",15]]],["set","o",["vec_u8.push","o",92]],["set","o",["vec_u8.push","o",117]],["set","o",["vec_u8.push","o",48]],["set","o",["vec_u8.push","o",48]],["set","o",["vec_u8.push","o","hi"]],["set","o",["vec_u8.push","o","lo"]],["return","o"]],0],["vec_u8.push","o","c"]],"kind":"defn","name":"ext.yaml._append_json_escaped","params":[{"name":"out","ty":"vec_u8"},{"name":"c","ty":"i32"}],"result":"vec_u8"},{"body":["begin",["let","i","start"],["let","cut","end"],["let","done",0],["for","_","start","end",["if",["=","done",0],["if",["<u","i","end"],["begin",["let","c",["view.get_u8","b","i"]],["if",["=","c",35],["if",["=","i","start"],["begin",["set","cut","i"],["set","done",1]],["begin",["let","prev",["view.get_u8","b",["-","i",1]]],["if",["if",["=","prev",32],1,["=","prev",9]],["begin",["set","cut","i"],["set","done",1]],0]]],0],["set","i",["+","i",1]]],["set","done",1]],0]],"cut"],"kind":"defn","name":"ext.yaml._comment_cut","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"end","ty":"i32"}],"result":"i32"},{"body":["begin",["let","i","line_start"],["let","count",0],["for","_","line_start","line_end",["if",["<u","i","line_end"],["begin",["let","c",["view.get_u8","b","i"]],["if",["=","c",32],["begin",["set","count",["+","count",1]],["set","i",["+","i",1]]],["if",["=","c",9],["return",["-",0,1]],["return","count"]]]],0]],"count"],"kind":"defn","name":"ext.yaml._count_indent_or_err","params":[{"name":"b","ty":"bytes_view"},{"name":"line_start","ty":"i32"},{"name":"line_end","ty":"i32"}],"result":"i32"},{"body":["begin",["let","o","out"],["set","o",["vec_u8.push","o",34]],["for","i","start","end",["set","o",["ext.yaml._append_json_escaped","o",["view.get_u8","b","i"]]]],["set","o",["vec_u8.push","o",34]],"o"],"kind":"defn","name":"ext.yaml._emit_json_string_key","params":[{"name":"out","ty":"vec_u8"},{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"end","ty":"i32"}],"result":"vec_u8"},{"body":["begin",["let","o","out"],["set","o",["vec_u8.push","o",110]],["set","o",["vec_u8.push","o",117]],["set","o",["vec_u8.push","o",108]],["set","o",["vec_u8.push","o",108]],"o"],"kind":"defn","name":"ext.yaml._emit_null","params":[{"name":"out","ty":"vec_u8"}],"result":"vec_u8"},{"body":["vec_u8.into_bytes",["vec_u8.with_capacity",0]],"kind":"defn","name":"ext.yaml._empty_bytes","params":[],"result":"bytes"},{"body":["begin",["let","n",["view.len","b"]],["let","i","start"],["let","found",["-",0,1]],["for","_","start","n",["if",["<u","i","n"],["if",["<","found",0],["begin",["if",["=",["view.get_u8","b","i"],10],["set","found","i"],0],["set","i",["+","i",1]]],0],0]],["if",["<","found",0],"n","found"]],"kind":"defn","name":"ext.yaml._find_newline","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"}],"result":"i32"},{"body":["if",["<u","n",10],["+",48,"n"],["+",87,"n"]],"kind":"defn","name":"ext.yaml._hex_digit","params":[{"name":"n","ty":"i32"}],"result":"i32"},{"body":["begin",["if",[">=u","c",48],["if",["<u","c",58],["return",1],0],0],0],"kind":"defn","name":"ext.yaml._is_digit","params":[{"name":"c","ty":"i32"}],"result":"i32"},{"body":["begin",["if",[">=u","c",48],["if",["<u","c",58],["return",1],0],0],["if",[">=u","c",65],["if",["<u","c",71],["return",1],0],0],["if",[">=u","c",97],["if",["<u","c",103],["return",1],0],0],0],"kind":"defn","name":"ext.yaml._is_hex_digit","params":[{"name":"c","ty":"i32"}],"result":"i32"},{"body":["begin",["let","i","start"],["if",["=",["<u","i","end"],0],["return",0],0],["if",["=",["view.get_u8","b","i"],45],["begin",["set","i",["+","i",1]],["if",["=",["<u","i","end"],0],["return",0],0]],0],["if",["=",["<u","i","end"],0],["return",0],0],["let","d0",["view.get_u8","b","i"]],["if",["=",["ext.yaml._is_digit","d0"],0],["return",0],0],["if",["=","d0",48],["begin",["set","i",["+","i",1]],["if",["if",["<u","i","end"],["ext.yaml._is_digit",["view.get_u8","b","i"]],0],["return",0],0]],["begin",["set","i",["+","i",1]],["let","done",0],["for","_",0,"end",["if",["=","done",0],["if",["=",["<u","i","end"],0],["set","done",1],["if",["ext.yaml._is_digit",["view.get_u8","b","i"]],["set","i",["+","i",1]],["set","done",1]]],0]]]],["if",["if",["<u","i","end"],["=",["view.get_u8","b","i"],46],0],["begin",["set","i",["+","i",1]],["if",["=",["<u","i","end"],0],["return",0],0],["if",["=",["ext.yaml._is_digit",["view.get_u8","b","i"]],0],["return",0],0],["set","i",["+","i",1]],["let","done",0],["for","_",0,"end",["if",["=","done",0],["if",["=",["<u","i","end"],0],["set","done",1],["if",["ext.yaml._is_digit",["view.get_u8","b","i"]],["set","i",["+","i",1]],["set","done",1]]],0]]],0],["if",["<u","i","end"],["begin",["let","e",["view.get_u8","b","i"]],["if",["if",["=","e",101],1,["=","e",69]],["begin",["set","i",["+","i",1]],["if",["=",["<u","i","end"],0],["return",0],0],["let","sign",["view.get_u8","b","i"]],["if",["if",["=","sign",43],1,["=","sign",45]],["begin",["set","i",["+","i",1]],["if",["=",["<u","i","end"],0],["return",0],0]],0],["if",["=",["ext.yaml._is_digit",["view.get_u8","b","i"]],0],["return",0],0],["set","i",["+","i",1]],["let","done",0],["for","_",0,"end",["if",["=","done",0],["if",["=",["<u","i","end"],0],["set","done",1],["if",["ext.yaml._is_digit",["view.get_u8","b","i"]],["set","i",["+","i",1]],["set","done",1]]],0]]],0]],0],["=","i","end"]],"kind":"defn","name":"ext.yaml._is_json_number_range","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"end","ty":"i32"}],"result":"i32"},{"body":["begin",["let","i","start"],["for","_","start","end",["if",["<u","i","end"],["begin",["let","c",["view.get_u8","b","i"]],["if",["=","c",34],["return","i"],0],["if",["=","c",92],["begin",["if",["=",["<u",["+","i",1],"end"],0],["return",["-",0,1]],0],["let","esc",["view.get_u8","b",["+","i",1]]],["if",["if",["if",["if",["if",["if",["if",["if",["=","esc",34],1,["=","esc",92]],1,["=","esc",47]],1,["=","esc",98]],1,["=","esc",102]],1,["=","esc",110]],1,["=","esc",114]],1,["=","esc",116]],["set","i",["+","i",2]],["if",["=","esc",117],["begin",["if",["=",["<u",["+","i",5],"end"],0],["return",["-",0,1]],0],["if",["if",["if",["if",["=",["ext.yaml._is_hex_digit",["view.get_u8","b",["+","i",2]]],0],1,["=",["ext.yaml._is_hex_digit",["view.get_u8","b",["+","i",3]]],0]],1,["=",["ext.yaml._is_hex_digit",["view.get_u8","b",["+","i",4]]],0]],1,["=",["ext.yaml._is_hex_digit",["view.get_u8","b",["+","i",5]]],0]],["return",["-",0,1]],0],["set","i",["+","i",6]]],["return",["-",0,1]]]]],["if",["<u","c",32],["return",["-",0,1]],["set","i",["+","i",1]]]]],0]],["-",0,1]],"kind":"defn","name":"ext.yaml._json_string_end_or_err","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"end","ty":"i32"}],"result":"i32"},{"body":["begin",["let","out",["vec_u8.with_capacity",9]],["set","out",["vec_u8.push","out",0]],["set","out",["ext.yaml._push_u32_le","out","code"]],["set","out",["ext.yaml._push_u32_le","out",0]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.yaml._make_error_code","params":[{"name":"code","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","b"]],["let","out",["vec_u8.with_capacity",128]],["set","out",["vec_u8.push","out",123]],["let","first",1],["let","pos","start"],["let","done",0],["for","_",0,"n",["if",["=","done",0],["begin",["set","pos",["ext.yaml._skip_blank_and_comment_lines","b","pos"]],["if",[">=u","pos","n"],["set","done",1],["begin",["let","line_end",["ext.yaml._find_newline","b","pos"]],["let","trimmed_end0",["ext.yaml._trim_end_space_tab","b","pos","line_end"]],["let","ind",["ext.yaml._count_indent_or_err","b","pos","trimmed_end0"]],["if",["<","ind",0],["return",["ext.yaml._make_error_code",2]],0],["if",["<","ind","indent"],["set","done",1],["if",[">","ind","indent"],["return",["ext.yaml._make_error_code",2]],["begin",["let","key_start",["+","pos","indent"]],["if",["=",["<u","key_start","trimmed_end0"],0],["return",["ext.yaml._make_error_code",3]],0],["let","cut0",["ext.yaml._comment_cut","b","key_start","trimmed_end0"]],["let","k","key_start"],["let","key_end","key_start"],["let","saw_key",0],["let","done_key",0],["for","_","key_start","cut0",["if",["=","done_key",0],["if",["<u","k","cut0"],["begin",["let","c",["view.get_u8","b","k"]],["if",["if",["if",["=","c",58],1,["=","c",32]],1,["=","c",9]],["set","done_key",1],["begin",["set","saw_key",1],["set","k",["+","k",1]],["set","key_end","k"]]]],["set","done_key",1]],0]],["if",["=","saw_key",0],["return",["ext.yaml._make_error_code",4]],0],["let","p","key_end"],["let","found_colon",0],["for","_","p","cut0",["if",["=","found_colon",0],["if",["<u","p","cut0"],["begin",["let","c",["view.get_u8","b","p"]],["if",["=","c",58],["set","found_colon",1],["if",["if",["=","c",32],1,["=","c",9]],["set","p",["+","p",1]],["return",["ext.yaml._make_error_code",3]]]]],["return",["ext.yaml._make_error_code",3]]],0]],["if",["=","found_colon",0],["return",["ext.yaml._make_error_code",3]],0],["let","val_start",["+","p",1]],["let","done_ws",0],["for","_","val_start","cut0",["if",["=","done_ws",0],["if",["<u","val_start","cut0"],["begin",["let","c",["view.get_u8","b","val_start"]],["if",["if",["=","c",32],1,["=","c",9]],["set","val_start",["+","val_start",1]],["set","done_ws",1]]],["set","done_ws",1]],0]],["if",["=","first",0],["set","out",["vec_u8.push","out",44]],0],["set","out",["ext.yaml._emit_json_string_key","out","b","key_start","key_end"]],["set","out",["vec_u8.push","out",58]],["if",["<u","val_start","cut0"],["begin",["let","val_cut",["ext.yaml._comment_cut","b","val_start","trimmed_end0"]],["let","val_end",["ext.yaml._trim_end_space_tab","b","val_start","val_cut"]],["let","val",["ext.yaml._scalar_json","b","val_start","val_end"]],["if",["=",["bytes.len","val"],0],["return",["ext.yaml._make_error_code",5]],0],["let","valv",["bytes.view","val"]],["let","valn",["view.len","valv"]],["set","out",["vec_u8.extend_bytes_range","out","valv",0,"valn"]],["set","pos",["+","line_end",1]]],["begin",["let","next",["ext.yaml._skip_blank_and_comment_lines","b",["+","line_end",1]]],["if",[">=u","next","n"],["begin",["set","out",["ext.yaml._emit_null","out"]],["set","pos","next"]],["begin",["let","next_line_end",["ext.yaml._find_newline","b","next"]],["let","next_trim_end",["ext.yaml._trim_end_space_tab","b","next","next_line_end"]],["let","next_ind",["ext.yaml._count_indent_or_err","b","next","next_trim_end"]],["if",["<","next_ind",0],["return",["ext.yaml._make_error_code",2]],0],["if",["<=","next_ind","indent"],["begin",["set","out",["ext.yaml._emit_null","out"]],["set","pos",["+","line_end",1]]],["begin",["let","sub",["ext.yaml._parse_node","b","next","next_ind"]],["if",["<",["bytes.len","sub"],5],["return",["ext.yaml._make_error_code",1]],0],["if",["=",["bytes.get_u8","sub",0],0],["return","sub"],0],["let","subv",["bytes.view","sub"]],["let","end_pos",["ext.yaml._read_u32_le","subv",1]],["let","subn",["view.len","subv"]],["set","out",["vec_u8.extend_bytes_range","out","subv",5,["-","subn",5]]],["set","pos","end_pos"]]]]]]],["set","first",0]]]]]]],0]],["set","out",["vec_u8.push","out",125]],["let","json_b",["vec_u8.into_bytes","out"]],["let","jsonv",["bytes.view","json_b"]],["let","jsonn",["view.len","jsonv"]],["let","res",["vec_u8.with_capacity",["+",5,"jsonn"]]],["set","res",["vec_u8.push","res",1]],["set","res",["ext.yaml._push_u32_le","res","pos"]],["set","res",["vec_u8.extend_bytes_range","res","jsonv",0,"jsonn"]],["vec_u8.into_bytes","res"]],"kind":"defn","name":"ext.yaml._parse_map","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"indent","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","b"]],["let","pos",["ext.yaml._skip_blank_and_comment_lines","b","start"]],["if",[">=u","pos","n"],["begin",["let","out",["vec_u8.with_capacity",9]],["set","out",["vec_u8.push","out",1]],["set","out",["ext.yaml._push_u32_le","out","n"]],["set","out",["vec_u8.push","out",110]],["set","out",["vec_u8.push","out",117]],["set","out",["vec_u8.push","out",108]],["set","out",["vec_u8.push","out",108]],["return",["vec_u8.into_bytes","out"]]],0],["let","line_end",["ext.yaml._find_newline","b","pos"]],["let","trimmed_end0",["ext.yaml._trim_end_space_tab","b","pos","line_end"]],["let","ind",["ext.yaml._count_indent_or_err","b","pos","trimmed_end0"]],["if",["<","ind",0],["return",["ext.yaml._make_error_code",2]],0],["if",["if",["<","ind","indent"],1,[">","ind","indent"]],["return",["ext.yaml._make_error_code",2]],0],["let","content_start",["+","pos","indent"]],["if",["=",["<u","content_start","trimmed_end0"],0],["return",["ext.yaml._make_error_code",1]],0],["let","c0",["view.get_u8","b","content_start"]],["if",["=","c0",45],["return",["ext.yaml._parse_seq","b","pos","indent"]],0],["let","cut0",["ext.yaml._comment_cut","b","content_start","trimmed_end0"]],["let","has_colon",0],["for","i","content_start","cut0",["if",["=",["view.get_u8","b","i"],58],["set","has_colon",1],0]],["if","has_colon",["return",["ext.yaml._parse_map","b","pos","indent"]],0],["let","scalar_end0",["ext.yaml._trim_end_space_tab","b","content_start","cut0"]],["let","scalar",["ext.yaml._scalar_json","b","content_start","scalar_end0"]],["if",["=",["bytes.len","scalar"],0],["return",["ext.yaml._make_error_code",5]],0],["let","scalar_v",["bytes.view","scalar"]],["let","scalar_n",["view.len","scalar_v"]],["let","out",["vec_u8.with_capacity",["+",5,"scalar_n"]]],["set","out",["vec_u8.push","out",1]],["set","out",["ext.yaml._push_u32_le","out",["+","line_end",1]]],["set","out",["vec_u8.extend_bytes_range","out","scalar_v",0,"scalar_n"]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.yaml._parse_node","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"indent","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","b"]],["let","out",["vec_u8.with_capacity",128]],["set","out",["vec_u8.push","out",91]],["let","first",1],["let","pos","start"],["let","done",0],["for","_",0,"n",["if",["=","done",0],["begin",["set","pos",["ext.yaml._skip_blank_and_comment_lines","b","pos"]],["if",[">=u","pos","n"],["set","done",1],["begin",["let","line_end",["ext.yaml._find_newline","b","pos"]],["let","trimmed_end0",["ext.yaml._trim_end_space_tab","b","pos","line_end"]],["let","ind",["ext.yaml._count_indent_or_err","b","pos","trimmed_end0"]],["if",["<","ind",0],["return",["ext.yaml._make_error_code",2]],0],["if",["<","ind","indent"],["set","done",1],["if",[">","ind","indent"],["return",["ext.yaml._make_error_code",2]],["begin",["let","dash",["+","pos","indent"]],["if",["if",["=",["<u","dash","trimmed_end0"],0],1,["=",["=",["view.get_u8","b","dash"],45],0]],["return",["ext.yaml._make_error_code",1]],0],["let","item_start",["+","dash",1]],["if",["<u","item_start","trimmed_end0"],["begin",["let","c",["view.get_u8","b","item_start"]],["if",["if",["=","c",32],1,["=","c",9]],["set","item_start",["+","item_start",1]],0]],0],["if",["=","first",0],["set","out",["vec_u8.push","out",44]],0],["let","cut0",["ext.yaml._comment_cut","b","item_start","trimmed_end0"]],["let","item_end",["ext.yaml._trim_end_space_tab","b","item_start","cut0"]],["if",["<u","item_start","item_end"],["begin",["let","val",["ext.yaml._scalar_json","b","item_start","item_end"]],["if",["=",["bytes.len","val"],0],["return",["ext.yaml._make_error_code",5]],0],["let","valv",["bytes.view","val"]],["let","valn",["view.len","valv"]],["set","out",["vec_u8.extend_bytes_range","out","valv",0,"valn"]],["set","pos",["+","line_end",1]]],["begin",["let","next",["ext.yaml._skip_blank_and_comment_lines","b",["+","line_end",1]]],["if",[">=u","next","n"],["begin",["set","out",["ext.yaml._emit_null","out"]],["set","pos","next"]],["begin",["let","next_line_end",["ext.yaml._find_newline","b","next"]],["let","next_trim_end",["ext.yaml._trim_end_space_tab","b","next","next_line_end"]],["let","next_ind",["ext.yaml._count_indent_or_err","b","next","next_trim_end"]],["if",["<","next_ind",0],["return",["ext.yaml._make_error_code",2]],0],["if",["<=","next_ind","indent"],["begin",["set","out",["ext.yaml._emit_null","out"]],["set","pos",["+","line_end",1]]],["begin",["let","sub",["ext.yaml._parse_node","b","next","next_ind"]],["if",["<",["bytes.len","sub"],5],["return",["ext.yaml._make_error_code",1]],0],["if",["=",["bytes.get_u8","sub",0],0],["return","sub"],0],["let","subv",["bytes.view","sub"]],["let","end_pos",["ext.yaml._read_u32_le","subv",1]],["let","subn",["view.len","subv"]],["set","out",["vec_u8.extend_bytes_range","out","subv",5,["-","subn",5]]],["set","pos","end_pos"]]]]]]],["set","first",0]]]]]]],0]],["set","out",["vec_u8.push","out",93]],["let","json_b",["vec_u8.into_bytes","out"]],["let","jsonv",["bytes.view","json_b"]],["let","jsonn",["view.len","jsonv"]],["let","res",["vec_u8.with_capacity",["+",5,"jsonn"]]],["set","res",["vec_u8.push","res",1]],["set","res",["ext.yaml._push_u32_le","res","pos"]],["set","res",["vec_u8.extend_bytes_range","res","jsonv",0,"jsonn"]],["vec_u8.into_bytes","res"]],"kind":"defn","name":"ext.yaml._parse_seq","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"indent","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","o","out"],["set","o",["vec_u8.push","o",["&","val",255]]],["set","o",["vec_u8.push","o",["&",[">>u","val",8],255]]],["set","o",["vec_u8.push","o",["&",[">>u","val",16],255]]],["set","o",["vec_u8.push","o",["&",[">>u","val",24],255]]],"o"],"kind":"defn","name":"ext.yaml._push_u32_le","params":[{"name":"out","ty":"vec_u8"},{"name":"val","ty":"i32"}],"result":"vec_u8"},{"body":["begin",["let","b0",["view.get_u8","b","offset"]],["let","b1",["view.get_u8","b",["+","offset",1]]],["let","b2",["view.get_u8","b",["+","offset",2]]],["let","b3",["view.get_u8","b",["+","offset",3]]],["+",["+",["+","b0",["<<u","b1",8]],["<<u","b2",16]],["<<u","b3",24]]],"kind":"defn","name":"ext.yaml._read_u32_le","params":[{"name":"b","ty":"bytes_view"},{"name":"offset","ty":"i32"}],"result":"i32"},{"body":["begin",["if",["=",["<u","start","end"],0],["begin",["let","o",["vec_u8.with_capacity",4]],["set","o",["vec_u8.push","o",110]],["set","o",["vec_u8.push","o",117]],["set","o",["vec_u8.push","o",108]],["set","o",["vec_u8.push","o",108]],["return",["vec_u8.into_bytes","o"]]],0],["let","first",["view.get_u8","b","start"]],["if",["if",["=","first",124],1,["=","first",62]],["return",["ext.yaml._empty_bytes"]],0],["if",["if",["=","first",123],1,["=","first",91]],["return",["ext.yaml._empty_bytes"]],0],["if",["=","first",34],["begin",["let","quote",["ext.yaml._json_string_end_or_err","b",["+","start",1],"end"]],["if",["<","quote",0],["return",["ext.yaml._empty_bytes"]],0],["if",["=",["=","quote",["-","end",1]],0],["return",["ext.yaml._empty_bytes"]],0],["let","out",["vec_u8.with_capacity",["-","end","start"]]],["set","out",["vec_u8.push","out",34]],["set","out",["vec_u8.extend_bytes_range","out","b",["+","start",1],["-",["-","end",1],["+","start",1]]]],["set","out",["vec_u8.push","out",34]],["return",["vec_u8.into_bytes","out"]]],0],["if",["=","first",39],["begin",["if",["=",["=",["view.get_u8","b",["-","end",1]],39],0],["return",["ext.yaml._empty_bytes"]],0],["let","out",["vec_u8.with_capacity",["+",["-","end","start"],2]]],["set","out",["vec_u8.push","out",34]],["let","i",["+","start",1]],["for","_","start","end",["if",["<u","i",["-","end",1]],["begin",["let","c",["view.get_u8","b","i"]],["if",["=","c",39],["if",["if",["<u",["+","i",1],["-","end",1]],["=",["view.get_u8","b",["+","i",1]],39],0],["begin",["set","out",["ext.yaml._append_json_escaped","out",39]],["set","i",["+","i",2]]],["return",["ext.yaml._empty_bytes"]]],["begin",["set","out",["ext.yaml._append_json_escaped","out","c"]],["set","i",["+","i",1]]]]],0]],["set","out",["vec_u8.push","out",34]],["return",["vec_u8.into_bytes","out"]]],0],["let","len",["-","end","start"]],["if",["if",["=","len",1],["=",["view.get_u8","b","start"],126],0],["begin",["let","o",["vec_u8.with_capacity",4]],["set","o",["vec_u8.push","o",110]],["set","o",["vec_u8.push","o",117]],["set","o",["vec_u8.push","o",108]],["set","o",["vec_u8.push","o",108]],["return",["vec_u8.into_bytes","o"]]],0],["if",["=","len",4],["begin",["if",["if",["if",["if",["=",["view.get_u8","b","start"],110],["=",["view.get_u8","b",["+","start",1]],117],0],["=",["view.get_u8","b",["+","start",2]],108],0],["=",["view.get_u8","b",["+","start",3]],108],0],["begin",["let","o",["vec_u8.with_capacity",4]],["set","o",["vec_u8.push","o",110]],["set","o",["vec_u8.push","o",117]],["set","o",["vec_u8.push","o",108]],["set","o",["vec_u8.push","o",108]],["return",["vec_u8.into_bytes","o"]]],0],["if",["if",["if",["if",["=",["view.get_u8","b","start"],116],["=",["view.get_u8","b",["+","start",1]],114],0],["=",["view.get_u8","b",["+","start",2]],117],0],["=",["view.get_u8","b",["+","start",3]],101],0],["begin",["let","o",["vec_u8.with_capacity",4]],["set","o",["vec_u8.push","o",116]],["set","o",["vec_u8.push","o",114]],["set","o",["vec_u8.push","o",117]],["set","o",["vec_u8.push","o",101]],["return",["vec_u8.into_bytes","o"]]],0]],0],["if",["=","len",5],["if",["if",["if",["if",["if",["=",["view.get_u8","b","start"],102],["=",["view.get_u8","b",["+","start",1]],97],0],["=",["view.get_u8","b",["+","start",2]],108],0],["=",["view.get_u8","b",["+","start",3]],115],0],["=",["view.get_u8","b",["+","start",4]],101],0],["begin",["let","o",["vec_u8.with_capacity",5]],["set","o",["vec_u8.push","o",102]],["set","o",["vec_u8.push","o",97]],["set","o",["vec_u8.push","o",108]],["set","o",["vec_u8.push","o",115]],["set","o",["vec_u8.push","o",101]],["return",["vec_u8.into_bytes","o"]]],0],0],["if",["ext.yaml._is_json_number_range","b","start","end"],["begin",["let","out",["vec_u8.with_capacity","len"]],["set","out",["vec_u8.extend_bytes_range","out","b","start","len"]],["return",["vec_u8.into_bytes","out"]]],0],["let","out",["vec_u8.with_capacity",["+","len",2]]],["set","out",["vec_u8.push","out",34]],["for","i","start","end",["set","out",["ext.yaml._append_json_escaped","out",["view.get_u8","b","i"]]]],["set","out",["vec_u8.push","out",34]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.yaml._scalar_json","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"end","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","b"]],["let","i","start"],["for","_",0,"n",["begin",["if",[">=u","i","n"],["return","n"],0],["let","line_end",["ext.yaml._find_newline","b","i"]],["let","trimmed_end",["ext.yaml._trim_end_space_tab","b","i","line_end"]],["let","j","i"],["let","done",0],["for","_","i","trimmed_end",["if",["=","done",0],["if",["<u","j","trimmed_end"],["begin",["let","c",["view.get_u8","b","j"]],["if",["if",["if",["=","c",32],1,["=","c",9]],1,["=","c",13]],["set","j",["+","j",1]],["set","done",1]]],["set","done",1]],0]],["if",["=",["<u","j","trimmed_end"],0],["set","i",["+","line_end",1]],["if",["=",["view.get_u8","b","j"],35],["set","i",["+","line_end",1]],["return","i"]]]]],"n"],"kind":"defn","name":"ext.yaml._skip_blank_and_comment_lines","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"}],"result":"i32"},{"body":["begin",["if",["=",["<u","start","end"],0],["return","end"],0],["let","r","end"],["let","i",["-","end",1]],["let","done",0],["for","_","start","end",["if",["=","done",0],["if",["<","i","start"],["set","done",1],["begin",["let","c",["view.get_u8","b","i"]],["if",["if",["if",["=","c",32],1,["=","c",9]],1,["=","c",13]],["begin",["set","r","i"],["set","i",["-","i",1]]],["set","done",1]]]],0]],"r"],"kind":"defn","name":"ext.yaml._trim_end_space_tab","params":[{"name":"b","ty":"bytes_view"},{"name":"start","ty":"i32"},{"name":"end","ty":"i32"}],"result":"i32"},{"body":["begin",["if",["<",["view.len","doc"],1],["return",1],0],["if",["=",["view.get_u8","doc",0],0],1,0]],"kind":"defn","name":"ext.yaml.yaml_is_err","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","n",["view.len","src"]],["let","pos",["ext.yaml._skip_blank_and_comment_lines","src",0]],["if",[">=u","pos","n"],["return",["ext.yaml._make_error_code",1]],0],["let","line_end0",["ext.yaml._find_newline","src","pos"]],["let","trimmed_end0",["ext.yaml._trim_end_space_tab","src","pos","line_end0"]],["let","len0",["-","trimmed_end0","pos"]],["if",["if",["if",["if",["=","len0",3],["=",["view.get_u8","src","pos"],45],0],["=",["view.get_u8","src",["+","pos",1]],45],0],["=",["view.get_u8","src",["+","pos",2]],45],0],["set","pos",["ext.yaml._skip_blank_and_comment_lines","src",["+","line_end0",1]]],0],["let","ind0_line_end",["ext.yaml._find_newline","src","pos"]],["let","ind0_trim_end",["ext.yaml._trim_end_space_tab","src","pos","ind0_line_end"]],["let","ind0",["ext.yaml._count_indent_or_err","src","pos","ind0_trim_end"]],["if",["<","ind0",0],["return",["ext.yaml._make_error_code",2]],0],["let","res",["ext.yaml._parse_node","src","pos","ind0"]],["if",["<",["bytes.len","res"],1],["return",["ext.yaml._make_error_code",1]],0],["if",["=",["bytes.get_u8","res",0],0],["return","res"],0],["if",["<",["bytes.len","res"],5],["return",["ext.yaml._make_error_code",1]],0],["let","resv",["bytes.view","res"]],["let","end_pos",["ext.yaml._read_u32_le","resv",1]],["let","after",["ext.yaml._skip_blank_and_comment_lines","src","end_pos"]],["if",["<u","after","n"],["return",["ext.yaml._make_error_code",7]],0],["let","out_len",["-",["view.len","resv"],5]],["let","out",["vec_u8.with_capacity",["+",1,"out_len"]]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes_range","out","resv",5,"out_len"]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.yaml.yaml_parse","params":[{"name":"src","ty":"bytes_view"}],"result":"bytes"}],"imports":[],"kind":"module","meta":{"generated_by":"x07import","source_path":"tests/x07import/fixtures/import_sources/rust/ext_yaml@0.1.0/yaml.rs","source_sha256":"d44a8bfd1f159123b9205cd8889190eccc343dd6b0052c65251001794d5a4cbb"},"module_id":"ext.yaml","schema_version":"x07.x07ast@0.3.0"}
