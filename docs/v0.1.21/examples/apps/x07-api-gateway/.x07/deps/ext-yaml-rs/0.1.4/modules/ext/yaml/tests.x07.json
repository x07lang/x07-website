{"decls":[{"kind":"export","names":["ext.yaml.tests.test_data_model_error_messages","ext.yaml.tests.test_data_model_parse_map","ext.yaml.tests.test_err_tabs","ext.yaml.tests.test_parse_map","ext.yaml.tests.test_parse_seq"]},{"body":["begin",["let","msg_malformed",["bytes.lit","yaml:malformed_doc"]],["let","msg_bad_indent",["bytes.lit","yaml:bad_indent"]],["let","msg_bad_map_entry",["bytes.lit","yaml:bad_map_entry"]],["let","msg_empty_key",["bytes.lit","yaml:empty_key"]],["let","msg_bad_scalar",["bytes.lit","yaml:bad_scalar"]],["let","msg_trailing_content",["bytes.lit","yaml:trailing_content"]],["let","src0",["bytes.alloc",0]],["let","doc0",["ext.yaml.data_model.parse",["bytes.view","src0"]]],["let","doc0v",["bytes.view","doc0"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","doc0v"],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.data_model.doc_error_msg","doc0v"],"msg_malformed",["std.test.code_assert_bytes_eq"]]],["let","v1",["vec_u8.with_capacity",32]],["set","v1",["vec_u8.push","v1",9]],["set","v1",["vec_u8.extend_bytes","v1",["bytes.lit","key:"]]],["set","v1",["vec_u8.push","v1",32]],["set","v1",["vec_u8.extend_bytes","v1",["bytes.lit","v"]]],["set","v1",["vec_u8.push","v1",10]],["let","src1",["vec_u8.into_bytes","v1"]],["let","doc1",["ext.yaml.data_model.parse",["bytes.view","src1"]]],["let","doc1v",["bytes.view","doc1"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","doc1v"],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.data_model.doc_error_msg","doc1v"],"msg_bad_indent",["std.test.code_assert_bytes_eq"]]],["let","v2",["vec_u8.with_capacity",64]],["set","v2",["vec_u8.extend_bytes","v2",["bytes.lit","key"]]],["set","v2",["vec_u8.push","v2",32]],["set","v2",["vec_u8.extend_bytes","v2",["bytes.lit","value:"]]],["set","v2",["vec_u8.push","v2",32]],["set","v2",["vec_u8.extend_bytes","v2",["bytes.lit","1"]]],["set","v2",["vec_u8.push","v2",10]],["let","src2",["vec_u8.into_bytes","v2"]],["let","doc2",["ext.yaml.data_model.parse",["bytes.view","src2"]]],["let","doc2v",["bytes.view","doc2"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","doc2v"],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.data_model.doc_error_msg","doc2v"],"msg_bad_map_entry",["std.test.code_assert_bytes_eq"]]],["let","v3",["vec_u8.with_capacity",16]],["set","v3",["vec_u8.push","v3",58]],["set","v3",["vec_u8.push","v3",32]],["set","v3",["vec_u8.extend_bytes","v3",["bytes.lit","1"]]],["set","v3",["vec_u8.push","v3",10]],["let","src3",["vec_u8.into_bytes","v3"]],["let","doc3",["ext.yaml.data_model.parse",["bytes.view","src3"]]],["let","doc3v",["bytes.view","doc3"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","doc3v"],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.data_model.doc_error_msg","doc3v"],"msg_empty_key",["std.test.code_assert_bytes_eq"]]],["let","v4",["vec_u8.with_capacity",4]],["set","v4",["vec_u8.push","v4",124]],["set","v4",["vec_u8.push","v4",10]],["let","src4",["vec_u8.into_bytes","v4"]],["let","doc4",["ext.yaml.data_model.parse",["bytes.view","src4"]]],["let","doc4v",["bytes.view","doc4"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","doc4v"],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.data_model.doc_error_msg","doc4v"],"msg_bad_scalar",["std.test.code_assert_bytes_eq"]]],["let","v5",["vec_u8.with_capacity",8]],["set","v5",["vec_u8.extend_bytes","v5",["bytes.lit","a"]]],["set","v5",["vec_u8.push","v5",10]],["set","v5",["vec_u8.extend_bytes","v5",["bytes.lit","b"]]],["set","v5",["vec_u8.push","v5",10]],["let","src5",["vec_u8.into_bytes","v5"]],["let","doc5",["ext.yaml.data_model.parse",["bytes.view","src5"]]],["let","doc5v",["bytes.view","doc5"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","doc5v"],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.data_model.doc_error_msg","doc5v"],"msg_trailing_content",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.yaml.tests.test_data_model_error_messages","params":[],"result":"result_i32"},{"body":["begin",["let","v",["vec_u8.with_capacity",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","a:"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","1"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","b:"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","x"]]],["set","v",["vec_u8.push","v",10]],["let","src",["vec_u8.into_bytes","v"]],["let","doc",["ext.yaml.data_model.parse",["bytes.view","src"]]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.data_model.root_kind","docv"],5,["std.test.code_assert_i32_eq"]]],["let","ka",["bytes.lit","a"]],["let","kb",["bytes.lit","b"]],["let","off_a",["ext.data_model.map_find","docv",1,["bytes.view","ka"]]],["try",["std.test.assert_true",[">=","off_a",0],["std.test.code_assert_true"]]],["try",["std.test.assert_bytes_eq",["ext.data_model.number_get","docv","off_a"],["bytes.lit","1"],["std.test.code_assert_bytes_eq"]]],["let","off_b",["ext.data_model.map_find","docv",1,["bytes.view","kb"]]],["try",["std.test.assert_true",[">=","off_b",0],["std.test.code_assert_true"]]],["try",["std.test.assert_bytes_eq",["ext.data_model.string_get","docv","off_b"],["bytes.lit","x"],["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.yaml.tests.test_data_model_parse_map","params":[],"result":"result_i32"},{"body":["begin",["let","v",["vec_u8.with_capacity",32]],["set","v",["vec_u8.push","v",9]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","key:"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","v"]]],["set","v",["vec_u8.push","v",10]],["let","src",["vec_u8.into_bytes","v"]],["let","doc",["ext.yaml.yaml_parse",["bytes.view","src"]]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.yaml.yaml_is_err","docv"],1,["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.yaml.tests.test_err_tabs","params":[],"result":"result_i32"},{"body":["begin",["let","v",["vec_u8.with_capacity",128]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","name:"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","test"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","count:"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","42"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","enabled:"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","true"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","metadata:"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","version:"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","0.1.0"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","items:"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",45]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","a"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",45]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","b"]]],["set","v",["vec_u8.push","v",10]],["let","src",["vec_u8.into_bytes","v"]],["let","doc",["ext.yaml.yaml_parse",["bytes.view","src"]]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.yaml.yaml_is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","jsonv",["view.slice","docv",1,["-",["view.len","docv"],1]]],["let","json",["view.to_bytes","jsonv"]],["let","expected",["bytes.lit","{\"name\":\"test\",\"count\":42,\"enabled\":true,\"metadata\":{\"version\":\"0.1.0\"},\"items\":[\"a\",\"b\"]}"]],["try",["std.test.assert_bytes_eq","json","expected",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.yaml.tests.test_parse_map","params":[],"result":"result_i32"},{"body":["begin",["let","v",["vec_u8.with_capacity",64]],["set","v",["vec_u8.push","v",45]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","a"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.push","v",45]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","b"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.push","v",45]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","3"]]],["set","v",["vec_u8.push","v",10]],["let","src",["vec_u8.into_bytes","v"]],["let","doc",["ext.yaml.yaml_parse",["bytes.view","src"]]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.yaml.yaml_is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","jsonv",["view.slice","docv",1,["-",["view.len","docv"],1]]],["let","json",["view.to_bytes","jsonv"]],["let","expected",["bytes.lit","[\"a\",\"b\",3]"]],["try",["std.test.assert_bytes_eq","json","expected",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.yaml.tests.test_parse_seq","params":[],"result":"result_i32"}],"imports":["ext.data_model","ext.yaml","ext.yaml.data_model","std.test"],"kind":"module","module_id":"ext.yaml.tests","schema_version":"x07.x07ast@0.3.0"}
