{"decls":[{"kind":"export","names":["app.apply.run_v1"]},{"body":["begin",["let","result",["std.db.migrate.apply_from_arch_v1","plan_id","dsn_doc"]],["let","ok",["result_i32.is_ok","result"]],["let","code",["result_i32.unwrap_or","result",0]],["let","out",["std.vec.with_capacity",256]],["if","ok",["begin",["set","out",["std.vec.extend_bytes","out",["bytes.lit","{\"status\":\"ok\",\"applied\":true,\"plan_id\":\""]]],["set","out",["std.vec.extend_bytes","out","plan_id"]],["set","out",["std.vec.extend_bytes","out",["bytes.lit","\"}"]]],0],["begin",["set","out",["std.vec.extend_bytes","out",["bytes.lit","{\"status\":\"error\",\"applied\":false,\"error_code\":"]]],["let","code_str",["std.fmt.s32_to_dec","code"]],["set","out",["std.vec.extend_bytes","out",["bytes.view","code_str"]]],["set","out",["std.vec.extend_bytes","out",["bytes.lit","}"]]],0]],["std.vec.as_bytes","out"]],"kind":"defn","name":"app.apply.run_v1","params":[{"name":"plan_id","ty":"bytes_view"},{"name":"dsn_doc","ty":"bytes_view"}],"result":"bytes"}],"imports":["std.db.migrate","std.fmt","std.vec"],"kind":"module","module_id":"app.apply","schema_version":"x07.x07ast@0.5.0"}
