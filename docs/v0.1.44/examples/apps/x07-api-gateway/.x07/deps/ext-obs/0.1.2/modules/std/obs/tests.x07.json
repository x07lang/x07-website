{"decls":[{"kind":"export","names":["std.obs.tests.test_openmetrics_render_v1","std.obs.tests.test_otlp_encode_v1","std.obs.tests.test_otlp_http_export_rejects_invalid_snapshot_v1"]},{"body":["begin",["let","raw",["bytes.lit","{\"schema_version\":\"x07.obs.snapshot@0.1.0\",\"time_unix_nano\":1,\"start_time_unix_nano\":1,\"metrics\":[{\"id\":\"app_requests_total\",\"type\":\"counter_u64_v1\",\"help\":\"Total requests processed.\",\"unit\":\"1\",\"series\":[{\"labels\":[{\"k\":\"method\",\"v\":\"GET\"},{\"k\":\"status\",\"v\":\"200\"}],\"value\":42}]},{\"id\":\"app_request_duration_seconds\",\"type\":\"histogram_f64_v1\",\"help\":\"Request duration in seconds.\",\"unit\":\"s\",\"buckets\":[0.005,0.01],\"series\":[{\"labels\":[{\"k\":\"method\",\"v\":\"GET\"}],\"count\":3,\"sum\":0.12,\"bucket_counts\":[1,3,3]}]}]}"]],["ext.json.data_model.parse",["bytes.view","raw"]]],"kind":"defn","name":"std.obs.tests._snapshot_doc_v1","params":[],"result":"bytes"},{"body":["begin",["let","doc",["std.obs.tests._snapshot_doc_v1"]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","out",["std.obs.openmetrics.render_v1","docv"]],["try",["std.test.assert_i32_eq",["result_bytes.err_code","out"],0,["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"std.obs.tests.test_openmetrics_render_v1","params":[],"result":"result_i32"},{"body":["begin",["let","doc",["std.obs.tests._snapshot_doc_v1"]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","out",["std.obs.otlp.encode_metrics_export_v1","docv"]],["try",["std.test.assert_i32_eq",["result_bytes.err_code","out"],0,["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"std.obs.tests.test_otlp_encode_v1","params":[],"result":"result_i32"},{"body":["begin",["let","empty",["bytes.alloc",0]],["let","ev",["bytes.view","empty"]],["let","res",["std.obs.export.otlp_http_export_from_arch_v1","ev","ev"]],["try",["std.test.assert_true",["=",["result_i32.is_ok","res"],0],["std.test.code_assert_true"]]],["std.test.pass"]],"kind":"defn","name":"std.obs.tests.test_otlp_http_export_rejects_invalid_snapshot_v1","params":[],"result":"result_i32"}],"imports":["ext.data_model","ext.json.data_model","std.obs.export","std.obs.openmetrics","std.obs.otlp","std.test"],"kind":"module","module_id":"std.obs.tests","schema_version":"x07.x07ast@0.3.0"}
