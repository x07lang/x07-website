{"decls":[{"kind":"export","names":["ext.openssl.rand.bytes_v1","ext.openssl.rand.err_code","ext.openssl.rand.get_bytes","ext.openssl.rand.is_err"]},{"body":["begin",["let","out",["vec_u8.with_capacity",9]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","code"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",0]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.openssl.rand._make_err","params":[{"name":"code","ty":"i32"}],"result":"bytes"},{"body":["begin",["if",["<","n",0],["return",["ext.openssl.rand._make_err",2]],0],["let","handle",0],["let","handle_ptr",["unsafe",["ptr.cast","ptr_mut_i32",["addr_of_mut","handle"]]]],["let","ret",["unsafe",["ext.openssl._ffi.rand_bytes_alloc","n","handle_ptr"]]],["if",["!=","ret",0],["return",["ext.openssl.rand._make_err",8]],0],["let","h",["unsafe",["ptr.read_i32","handle_ptr"]]],["let","len",["unsafe",["ext.openssl._ffi.buf_len","h"]]],["let","ptr",["unsafe",["ext.openssl._ffi.buf_ptr","h"]]],["let","out",["vec_u8.with_capacity","len"]],["for","i",0,"len",["set","out",["vec_u8.push","out",["unsafe",["ptr.read_u8",["ptr.add","ptr","i"]]]]]],["let","bytes",["vec_u8.into_bytes","out"]],["let","_",["unsafe",["ext.openssl._ffi.buf_free","h"]]],"bytes"],"kind":"defn","name":"ext.openssl.rand.bytes_v1","params":[{"name":"n","ty":"i32"}],"result":"bytes"},{"body":["begin",["if",["<",["view.len","doc"],5],["return",0],0],["if",["=",["=",["view.get_u8","doc",0],0],0],["return",0],0],["codec.read_u32_le","doc",1]],"kind":"defn","name":"ext.openssl.rand.err_code","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",1],["return",["bytes.alloc",0]],0],["if",["=",["=",["view.get_u8","doc",0],1],0],["return",["bytes.alloc",0]],0],["view.to_bytes",["view.slice","doc",1,["-","n",1]]]],"kind":"defn","name":"ext.openssl.rand.get_bytes","params":[{"name":"doc","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["if",["<",["view.len","doc"],1],["return",1],0],["=",["view.get_u8","doc",0],0]],"kind":"defn","name":"ext.openssl.rand.is_err","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"}],"imports":["ext.openssl._ffi"],"kind":"module","module_id":"ext.openssl.rand","schema_version":"x07.x07ast@0.3.0"}
