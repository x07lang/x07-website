{"decls":[{"kind":"export","names":["smoke.core_conformance_ok"]},{"body":["begin",["let","qv",["std.vec.with_capacity",["+",["view.len","json"],["+",["bytes.len","field"],8]]]],["set","qv",["std.vec.extend_bytes","qv","json"]],["set","qv",["std.vec.push","qv",0]],["set","qv",["std.vec.extend_bytes","qv",["bytes.view","field"]]],["let","query",["std.vec.as_bytes","qv"]],["let","got",["std.json.extract_path_canon_or_err",["bytes.view","query"]]],["std.test.assert_bytes_eq","got","want",["std.test.code_assert_bytes_eq"]]],"kind":"defn","name":"smoke.assert_json_field_eq_v1","params":[{"name":"json","ty":"bytes_view"},{"name":"field","ty":"bytes"},{"name":"want","ty":"bytes"}],"result":"result_i32"},{"body":["begin",["let","tool",["bytes.lit","core-conformance"]],["let","argc",1],["let","argv",["std.vec.with_capacity",64]],["set","argv",["std.vec.extend_bytes","argv",["codec.write_u32_le","argc"]]],["set","argv",["std.vec.extend_bytes","argv",["codec.write_u32_le",["bytes.len","tool"]]]],["set","argv",["std.vec.extend_bytes","argv",["bytes.view","tool"]]],["let","argv_v1",["std.vec.as_bytes","argv"]],["let","digest",["codec.write_u32_le",0]],["let","out",["app.main","argv_v1",1,"digest"]],["let","canon",["std.json.canonicalize_small",["bytes.view","out"]]],["try",["std.test.assert_true",["std.bytes.eq",["bytes.view","out"],["bytes.view","canon"]],["std.test.code_assert_true"]]],["try",["smoke.assert_json_field_eq_v1",["bytes.view","out"],["bytes.lit","ok"],["bytes.lit","1"]]],["try",["smoke.assert_json_field_eq_v1",["bytes.view","out"],["bytes.lit","exit_code"],["bytes.lit","0"]]],["try",["smoke.assert_json_field_eq_v1",["bytes.view","out"],["bytes.lit","module_count"],["bytes.lit","34"]]],["try",["smoke.assert_json_field_eq_v1",["bytes.view","out"],["bytes.lit","fail_count"],["bytes.lit","0"]]],["std.test.pass"]],"kind":"defn","name":"smoke.core_conformance_ok","params":[],"result":"result_i32"}],"imports":["app","std.bytes","std.json","std.test","std.vec"],"kind":"module","module_id":"smoke","schema_version":"x07.x07ast@0.4.0"}
