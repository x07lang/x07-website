{"decls":[{"kind":"export","names":["std.net.tls.client_cfg_sni_v1","std.net.tls.client_cfg_v1","std.net.tls.client_cfg_verify_peer_v1","std.net.tls.connect_stream_handle_v1","std.net.tls.connect_v1"]},{"body":["begin",["let","n",["view.len","cfg"]],["if",["=","n",0],["return",["bytes.alloc",0]],0],["if",["<","n",16],["return",["bytes.alloc",0]],0],["if",["!=",["codec.read_u32_le","cfg",0],1],["return",["bytes.alloc",0]],0],["let","sni_len",["codec.read_u32_le","cfg",8]],["if",["<","sni_len",0],["return",["bytes.alloc",0]],0],["if",[">","sni_len",1024],["return",["bytes.alloc",0]],0],["if",["!=",["+",16,"sni_len"],"n"],["return",["bytes.alloc",0]],0],["view.to_bytes",["view.slice","cfg",12,"sni_len"]]],"kind":"defn","name":"std.net.tls.client_cfg_sni_v1","params":[{"name":"cfg","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","vp",["if",["!=","verify_peer",0],1,0]],["let","sni_len",["view.len","sni"]],["if",["<","sni_len",0],["return",["bytes.alloc",0]],0],["if",[">","sni_len",1024],["return",["bytes.alloc",0]],0],["for","i",0,"sni_len",["begin",["if",["=",["view.get_u8","sni","i"],0],["return",["bytes.alloc",0]],0],0]],["let","cap",["+",16,"sni_len"]],["let","out",["vec_u8.with_capacity","cap"]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",1]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","vp"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","sni_len"]]],["set","out",["vec_u8.extend_bytes_range","out","sni",0,"sni_len"]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",0]]],["std.vec.as_bytes","out"]],"kind":"defn","name":"std.net.tls.client_cfg_v1","params":[{"name":"verify_peer","ty":"i32"},{"name":"sni","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","cfg"]],["if",["=","n",0],["return",1],0],["if",["<","n",16],["return",1],0],["if",["!=",["codec.read_u32_le","cfg",0],1],["return",1],0],["let","vp",["codec.read_u32_le","cfg",4]],["if",["=","vp",0],0,["if",["=","vp",1],1,1]]],"kind":"defn","name":"std.net.tls.client_cfg_verify_peer_v1","params":[{"name":"cfg","ty":"bytes_view"}],"result":"i32"},{"body":["std.net.tcp.connect_stream_handle_v1","doc"],"kind":"defn","name":"std.net.tls.connect_stream_handle_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["ext.sockets.net.tls_connect_v1","addr","tls_cfg","caps"],"kind":"defn","name":"std.net.tls.connect_v1","params":[{"name":"addr","ty":"bytes_view"},{"name":"tls_cfg","ty":"bytes_view"},{"name":"caps","ty":"bytes_view"}],"result":"bytes"}],"imports":["ext.sockets.net","std.net.tcp","std.vec"],"kind":"module","module_id":"std.net.tls","schema_version":"x07.x07ast@0.3.0"}
