{"decls":[{"kind":"export","names":["std.net.http.client.fetch_to_file_v1","std.net.http.client.fetch_v1","std.net.http.client.get_to_file_v1","std.net.http.client.get_v1","std.net.http.client.post_to_file_v1","std.net.http.client.post_v1","std.net.http.client.resp_body_v1","std.net.http.client.resp_err_code_v1","std.net.http.client.resp_file_len_v1","std.net.http.client.resp_file_path_v1","std.net.http.client.resp_file_reader_v1","std.net.http.client.resp_header_count_v1","std.net.http.client.resp_header_get_v1","std.net.http.client.resp_is_err_v1","std.net.http.client.resp_status_v1","std.net.http.client.resp_ver_v1"]},{"body":["begin",["let","err_invalid",["std.net.err.code_invalid_req_v1"]],["let","err_internal",["std.net.err.code_internal_v1"]],["let","req",["bytes.view","req_bytes"]],["let","n",["view.len","req"]],["if",["<","n",8],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["if",["!=",["codec.read_u32_le","req",0],1],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["let","method",["codec.read_u32_le","req",4]],["let","pos",8],["if",[">=u",["+","pos",4],["+","n",1]],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["let","url_len",["codec.read_u32_le","req","pos"]],["if",["<","url_len",0],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["set","pos",["+","pos",4]],["if",[">=u",["+","pos","url_len"],["+","n",1]],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["let","url",["view.slice","req","pos","url_len"]],["set","pos",["+","pos","url_len"]],["if",[">=u",["+","pos",4],["+","n",1]],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["let","headers_len",["codec.read_u32_le","req","pos"]],["if",["<","headers_len",0],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["set","pos",["+","pos",4]],["if",[">=u",["+","pos","headers_len"],["+","n",1]],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["let","headers",["view.slice","req","pos","headers_len"]],["set","pos",["+","pos","headers_len"]],["if",[">=u",["+","pos",4],["+","n",1]],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["let","body_len",["codec.read_u32_le","req","pos"]],["if",["<","body_len",0],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["set","pos",["+","pos",4]],["if",[">=u",["+","pos","body_len"],["+","n",1]],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["let","body",["view.slice","req","pos","body_len"]],["set","pos",["+","pos","body_len"]],["if",[">=u",["+","pos",4],["+","n",1]],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["let","caps_len",["codec.read_u32_le","req","pos"]],["if",["<","caps_len",0],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["set","pos",["+","pos",4]],["if",[">=u",["+","pos","caps_len"],["+","n",1]],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["let","caps",["view.slice","req","pos","caps_len"]],["set","pos",["+","pos","caps_len"]],["if",["!=","pos","n"],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["let","canon_headers",["std.net.http.spec.headers_canon_join_sorted_v1","headers"]],["let","h_view",["bytes.view","canon_headers"]],["let","follow",["std.net.http.spec.caps_follow_location_v1","caps"]],["let","timeout_s",["std.net.http.spec.caps_timeout_s_v1","caps"]],["let","max_redirects",["std.net.http.spec.caps_max_redirects_v1","caps"]],["let","max_header_bytes",["std.net.http.spec.caps_max_header_bytes_v1","caps"]],["let","max_headers",["std.net.http.spec.caps_max_headers_v1","caps"]],["let","max_body_bytes",["std.net.http.spec.caps_max_body_bytes_v1","caps"]],["if",["<","max_body_bytes",0],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["if",["if",["=","method",["std.net.http.spec.method_get"]],["!=","body_len",0],0],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["if",["if",["!=","to_file",0],["<=",["view.len","out_rel_path"],0],0],["return",["std.net.http.client._make_err_doc","err_invalid"]],0],["let","curl_req",["if",["!=","to_file",0],["if",["=","method",["std.net.http.spec.method_get"]],["ext.curl.http.req_get_to_file_v3","url","h_view","out_rel_path","follow","timeout_s","max_redirects","max_header_bytes","max_headers"],["if",["=","method",["std.net.http.spec.method_post"]],["ext.curl.http.req_post_to_file_v3","url","h_view","body","out_rel_path","follow","timeout_s","max_redirects","max_header_bytes","max_headers"],["return",["std.net.http.client._make_err_doc","err_invalid"]]]],["if",["=","method",["std.net.http.spec.method_get"]],["ext.curl.http.req_get_v2","url","h_view","follow","timeout_s","max_redirects","max_header_bytes","max_headers"],["if",["=","method",["std.net.http.spec.method_post"]],["ext.curl.http.req_post_v2","url","h_view","body","follow","timeout_s","max_redirects","max_header_bytes","max_headers"],["return",["std.net.http.client._make_err_doc","err_invalid"]]]]]],["let","rc",["ext.curl.http.init"]],["if",["!=","rc",0],["return",["std.net.http.client._make_err_doc","err_internal"]],0],["let","doc",["ext.curl.http.request_v1",["bytes.view","curl_req"],"max_body_bytes"]],["let","_",["ext.curl.http.cleanup"]],"doc"],"kind":"defn","name":"std.net.http.client._fetch_common_v1","params":[{"name":"req_bytes","ty":"bytes"},{"name":"to_file","ty":"i32"},{"name":"out_rel_path","ty":"bytes_view"}],"result":"bytes"},{"body":["std.net.err.make_doc_v1","code"],"kind":"defn","name":"std.net.http.client._make_err_doc","params":[{"name":"code","ty":"i32"}],"result":"bytes"},{"body":["std.net.http.client._fetch_common_v1","req_bytes",1,"out_rel_path"],"kind":"defn","name":"std.net.http.client.fetch_to_file_v1","params":[{"name":"req_bytes","ty":"bytes"},{"name":"out_rel_path","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","empty",["bytes.alloc",0]],["std.net.http.client._fetch_common_v1","req_bytes",0,["bytes.view","empty"]]],"kind":"defn","name":"std.net.http.client.fetch_v1","params":[{"name":"req_bytes","ty":"bytes"}],"result":"bytes"},{"body":["std.net.http.client.get_to_file_with_headers_v1","url",["std.net.http.spec.headers_empty_v1"],"out_rel_path","caps"],"kind":"defn","name":"std.net.http.client.get_to_file_v1","params":[{"name":"url","ty":"bytes"},{"name":"out_rel_path","ty":"bytes_view"},{"name":"caps","ty":"bytes"}],"result":"bytes"},{"body":["std.net.http.client.fetch_to_file_v1",["std.net.http.spec.req_get_v1","url",["bytes.view","headers_table"],["bytes.view","caps"]],"out_rel_path"],"kind":"defn","name":"std.net.http.client.get_to_file_with_headers_v1","params":[{"name":"url","ty":"bytes"},{"name":"headers_table","ty":"bytes"},{"name":"out_rel_path","ty":"bytes_view"},{"name":"caps","ty":"bytes"}],"result":"bytes"},{"body":["std.net.http.client.get_with_headers_v1","url",["std.net.http.spec.headers_empty_v1"],"caps"],"kind":"defn","name":"std.net.http.client.get_v1","params":[{"name":"url","ty":"bytes"},{"name":"caps","ty":"bytes"}],"result":"bytes"},{"body":["std.net.http.client.fetch_v1",["std.net.http.spec.req_get_v1","url",["bytes.view","headers_table"],["bytes.view","caps"]]],"kind":"defn","name":"std.net.http.client.get_with_headers_v1","params":[{"name":"url","ty":"bytes"},{"name":"headers_table","ty":"bytes"},{"name":"caps","ty":"bytes"}],"result":"bytes"},{"body":["std.net.http.client.post_to_file_with_headers_v1","url",["std.net.http.spec.headers_empty_v1"],"body","out_rel_path","caps"],"kind":"defn","name":"std.net.http.client.post_to_file_v1","params":[{"name":"url","ty":"bytes"},{"name":"body","ty":"bytes"},{"name":"out_rel_path","ty":"bytes_view"},{"name":"caps","ty":"bytes"}],"result":"bytes"},{"body":["std.net.http.client.fetch_to_file_v1",["std.net.http.spec.req_post_v1","url",["bytes.view","headers_table"],["bytes.view","body"],["bytes.view","caps"]],"out_rel_path"],"kind":"defn","name":"std.net.http.client.post_to_file_with_headers_v1","params":[{"name":"url","ty":"bytes"},{"name":"headers_table","ty":"bytes"},{"name":"body","ty":"bytes"},{"name":"out_rel_path","ty":"bytes_view"},{"name":"caps","ty":"bytes"}],"result":"bytes"},{"body":["std.net.http.client.post_with_headers_v1","url",["std.net.http.spec.headers_empty_v1"],"body","caps"],"kind":"defn","name":"std.net.http.client.post_v1","params":[{"name":"url","ty":"bytes"},{"name":"body","ty":"bytes"},{"name":"caps","ty":"bytes"}],"result":"bytes"},{"body":["std.net.http.client.fetch_v1",["std.net.http.spec.req_post_v1","url",["bytes.view","headers_table"],["bytes.view","body"],["bytes.view","caps"]]],"kind":"defn","name":"std.net.http.client.post_with_headers_v1","params":[{"name":"url","ty":"bytes"},{"name":"headers_table","ty":"bytes"},{"name":"body","ty":"bytes"},{"name":"caps","ty":"bytes"}],"result":"bytes"},{"body":["ext.curl.http.resp_body","doc"],"kind":"defn","name":"std.net.http.client.resp_body_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"bytes"},{"body":["ext.curl.http.err_code","doc"],"kind":"defn","name":"std.net.http.client.resp_err_code_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["ext.curl.http.resp_file_len_v3","doc"],"kind":"defn","name":"std.net.http.client.resp_file_len_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["ext.curl.http.resp_file_path_v3","doc"],"kind":"defn","name":"std.net.http.client.resp_file_path_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"bytes"},{"body":["ext.curl.http.resp_file_reader_v3","doc"],"kind":"defn","name":"std.net.http.client.resp_file_reader_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"iface"},{"body":["ext.curl.http.resp_header_count","doc"],"kind":"defn","name":"std.net.http.client.resp_header_count_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["ext.curl.http.resp_header_get_v2","doc","name"],"kind":"defn","name":"std.net.http.client.resp_header_get_v1","params":[{"name":"doc","ty":"bytes_view"},{"name":"name","ty":"bytes_view"}],"result":"bytes"},{"body":["ext.curl.http.is_err","doc"],"kind":"defn","name":"std.net.http.client.resp_is_err_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["ext.curl.http.resp_status","doc"],"kind":"defn","name":"std.net.http.client.resp_status_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["ext.curl.http.resp_ver","doc"],"kind":"defn","name":"std.net.http.client.resp_ver_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"}],"imports":["ext.curl.http","std.net.err","std.net.http.spec"],"kind":"module","module_id":"std.net.http.client","schema_version":"x07.x07ast@0.3.0"}
