{"decls":[{"kind":"export","names":["ext.curl.http.CURLINFO_RESPONSE_CODE","ext.curl.http.CURLOPT_FOLLOWLOCATION","ext.curl.http.CURLOPT_NOBODY","ext.curl.http.CURLOPT_TIMEOUT","ext.curl.http.CURLOPT_URL","ext.curl.http.CURL_GLOBAL_DEFAULT","ext.curl.http.REQ_FLAG_FOLLOWLOCATION","ext.curl.http.cleanup","ext.curl.http.err_code","ext.curl.http.head","ext.curl.http.headers_add","ext.curl.http.headers_new","ext.curl.http.init","ext.curl.http.is_err","ext.curl.http.req_get_to_file_v3","ext.curl.http.req_get_v2","ext.curl.http.req_post_to_file_v3","ext.curl.http.req_post_v2","ext.curl.http.request_v1","ext.curl.http.request_v2","ext.curl.http.resp_body","ext.curl.http.resp_file_len_v3","ext.curl.http.resp_file_path_v3","ext.curl.http.resp_file_reader_v3","ext.curl.http.resp_header_count","ext.curl.http.resp_header_get_v2","ext.curl.http.resp_status","ext.curl.http.resp_ver"]},{"body":2097154,"kind":"defn","name":"ext.curl.http.CURLINFO_RESPONSE_CODE","params":[],"result":"i32"},{"body":52,"kind":"defn","name":"ext.curl.http.CURLOPT_FOLLOWLOCATION","params":[],"result":"i32"},{"body":44,"kind":"defn","name":"ext.curl.http.CURLOPT_NOBODY","params":[],"result":"i32"},{"body":13,"kind":"defn","name":"ext.curl.http.CURLOPT_TIMEOUT","params":[],"result":"i32"},{"body":10002,"kind":"defn","name":"ext.curl.http.CURLOPT_URL","params":[],"result":"i32"},{"body":3,"kind":"defn","name":"ext.curl.http.CURL_GLOBAL_DEFAULT","params":[],"result":"i32"},{"body":1,"kind":"defn","name":"ext.curl.http.REQ_FLAG_FOLLOWLOCATION","params":[],"result":"i32"},{"body":["if",["if",[">=u","c",65],["<u","c",91],0],["+","c",32],"c"],"kind":"defn","name":"ext.curl.http._ascii_lower","params":[{"name":"c","ty":"i32"}],"result":"i32"},{"body":["begin",["let","out",["vec_u8.with_capacity",9]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","code"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",0]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.curl.http._make_err","params":[{"name":"code","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",14],["return",-1],0],["if",["!=",["view.get_u8","doc",0],1],["return",-1],0],["let","ver",["view.get_u8","doc",1]],["if",["if",["=","ver",1],0,["=","ver",2]],0,["return",-1]],["let","header_count",["codec.read_u32_le","doc",6]],["if",["<","header_count",0],["return",-1],0],["let","pos",10],["if",["=","ver",1],["if",["!=","header_count",0],["return",-1],0],["begin",["for","_",0,"header_count",["begin",["if",[">=u",["+","pos",4],["+","n",1]],["return",-1],0],["let","name_len",["codec.read_u32_le","doc","pos"]],["if",["<","name_len",0],["return",-1],0],["set","pos",["+","pos",4]],["if",[">=u",["+","pos","name_len"],["+","n",1]],["return",-1],0],["set","pos",["+","pos","name_len"]],["if",[">=u",["+","pos",4],["+","n",1]],["return",-1],0],["let","value_len",["codec.read_u32_le","doc","pos"]],["if",["<","value_len",0],["return",-1],0],["set","pos",["+","pos",4]],["if",[">=u",["+","pos","value_len"],["+","n",1]],["return",-1],0],["set","pos",["+","pos","value_len"]],0]],0]],["if",[">=u",["+","pos",4],["+","n",1]],["return",-1],0],["let","body_len",["codec.read_u32_le","doc","pos"]],["if",["<","body_len",0],["return",-1],0],["set","pos",["+","pos",4]],["if",[">=u",["+","pos","body_len"],["+","n",1]],["return",-1],0],"pos"],"kind":"defn","name":"ext.curl.http._resp_body_off","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","n",["view.len","a"]],["if",["!=","n",["view.len","b"]],["return",0],0],["for","i",0,"n",["begin",["let","ac",["ext.curl.http._ascii_lower",["view.get_u8","a","i"]]],["let","bc",["ext.curl.http._ascii_lower",["view.get_u8","b","i"]]],["if",["!=","ac","bc"],["return",0],0],0]],1],"kind":"defn","name":"ext.curl.http._view_eq_nocase","params":[{"name":"a","ty":"bytes_view"},{"name":"b","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["unsafe",["ext.curl._ffi.curl_global_cleanup"]],0],"kind":"defn","name":"ext.curl.http.cleanup","params":[],"result":"i32"},{"body":["begin",["if",["<",["view.len","doc"],5],["return",0],0],["if",["!=",["view.get_u8","doc",0],0],["return",0],0],["codec.read_u32_le","doc",1]],"kind":"defn","name":"ext.curl.http.err_code","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","handle",["unsafe",["ext.curl._ffi.curl_easy_init"]]],["if",["=","handle",0],["result_i32.err",1],["begin",["let","v",["vec_u8.with_capacity",["+",["view.len","url"],1]]],["set","v",["vec_u8.extend_bytes","v","url"]],["set","v",["vec_u8.push","v",0]],["let","url_c",["vec_u8.into_bytes","v"]],["unsafe",["ext.curl._ffi.curl_easy_setopt_ptr","handle",["ext.curl.http.CURLOPT_URL"],["unsafe",["ptr.cast","ptr_const_void",["view.as_ptr",["bytes.view","url_c"]]]]]],["unsafe",["ext.curl._ffi.curl_easy_setopt_long","handle",["ext.curl.http.CURLOPT_NOBODY"],1]],["unsafe",["ext.curl._ffi.curl_easy_setopt_long","handle",["ext.curl.http.CURLOPT_FOLLOWLOCATION"],1]],["unsafe",["ext.curl._ffi.curl_easy_setopt_long","handle",["ext.curl.http.CURLOPT_TIMEOUT"],30]],["let","res",["unsafe",["ext.curl._ffi.curl_easy_perform","handle"]]],["if",["=","res",0],["begin",["let","code",0],["let","code_ptr",["unsafe",["ptr.cast","ptr_mut_i32",["addr_of_mut","code"]]]],["unsafe",["ext.curl._ffi.curl_easy_getinfo_long","handle",["ext.curl.http.CURLINFO_RESPONSE_CODE"],"code_ptr"]],["let","http_code",["unsafe",["ptr.read_i32","code_ptr"]]],["unsafe",["ext.curl._ffi.curl_easy_cleanup","handle"]],["result_i32.ok","http_code"]],["begin",["unsafe",["ext.curl._ffi.curl_easy_cleanup","handle"]],["result_i32.err","res"]]]]]],"kind":"defn","name":"ext.curl.http.head","params":[{"name":"url","ty":"bytes_view"}],"result":"result_i32"},{"body":["begin",["let","h",["if",["<",["bytes.len","headers"],4],["codec.write_u32_le",0],"headers"]],["let","hv",["bytes.view","h"]],["let","count",["codec.read_u32_le","hv",0]],["let","new_count",["+","count",1]],["let","name_len",["view.len","name"]],["let","value_len",["view.len","value"]],["let","cap",["+",["bytes.len","h"],["+",8,["+","name_len","value_len"]]]],["let","out",["vec_u8.with_capacity","cap"]],["set","out",["vec_u8.extend_bytes","out","h"]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","name_len"]]],["set","out",["vec_u8.extend_bytes_range","out","name",0,"name_len"]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","value_len"]]],["set","out",["vec_u8.extend_bytes_range","out","value",0,"value_len"]],["let","b",["vec_u8.into_bytes","out"]],["let","c",["codec.write_u32_le","new_count"]],["set","b",["bytes.set_u8","b",0,["bytes.get_u8","c",0]]],["set","b",["bytes.set_u8","b",1,["bytes.get_u8","c",1]]],["set","b",["bytes.set_u8","b",2,["bytes.get_u8","c",2]]],["set","b",["bytes.set_u8","b",3,["bytes.get_u8","c",3]]],"b"],"kind":"defn","name":"ext.curl.http.headers_add","params":[{"name":"headers","ty":"bytes"},{"name":"name","ty":"bytes_view"},{"name":"value","ty":"bytes_view"}],"result":"bytes"},{"body":["codec.write_u32_le",0],"kind":"defn","name":"ext.curl.http.headers_new","params":[],"result":"bytes"},{"body":["unsafe",["ext.curl._ffi.curl_global_init",["ext.curl.http.CURL_GLOBAL_DEFAULT"]]],"kind":"defn","name":"ext.curl.http.init","params":[],"result":"i32"},{"body":["begin",["if",["<",["view.len","doc"],1],["return",1],0],["=",["view.get_u8","doc",0],0]],"kind":"defn","name":"ext.curl.http.is_err","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","url_len",["view.len","url"]],["let","headers_len",["view.len","headers"]],["let","hcount",["if",["<","headers_len",4],0,["codec.read_u32_le","headers",0]]],["let","hbytes_len",["if",["<","headers_len",4],0,["-","headers_len",4]]],["let","path_len",["view.len","out_path"]],["let","flags",["if",["!=","follow_location",0],["ext.curl.http.REQ_FLAG_FOLLOWLOCATION"],0]],["let","t",["if",["<","timeout_s",0],0,"timeout_s"]],["let","mr",["if",["<","max_redirects",0],0,"max_redirects"]],["let","mhb",["if",["<","max_header_bytes",0],0,"max_header_bytes"]],["let","mh",["if",["<","max_headers",0],0,"max_headers"]],["let","cap",["+",96,["+",["+","url_len","hbytes_len"],"path_len"]]],["let","out",["vec_u8.with_capacity","cap"]],["set","out",["vec_u8.push","out",3]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","url_len"]]],["set","out",["vec_u8.extend_bytes_range","out","url",0,"url_len"]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","hcount"]]],["if",[">","hbytes_len",0],["set","out",["vec_u8.extend_bytes_range","out","headers",4,"hbytes_len"]],0],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",0]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","flags"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","t"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","mr"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","mhb"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","mh"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","path_len"]]],["if",[">","path_len",0],["set","out",["vec_u8.extend_bytes_range","out","out_path",0,"path_len"]],0],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.curl.http.req_get_to_file_v3","params":[{"name":"url","ty":"bytes_view"},{"name":"headers","ty":"bytes_view"},{"name":"out_path","ty":"bytes_view"},{"name":"follow_location","ty":"i32"},{"name":"timeout_s","ty":"i32"},{"name":"max_redirects","ty":"i32"},{"name":"max_header_bytes","ty":"i32"},{"name":"max_headers","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","url_len",["view.len","url"]],["let","headers_len",["view.len","headers"]],["let","hcount",["if",["<","headers_len",4],0,["codec.read_u32_le","headers",0]]],["let","hbytes_len",["if",["<","headers_len",4],0,["-","headers_len",4]]],["let","flags",["if",["!=","follow_location",0],["ext.curl.http.REQ_FLAG_FOLLOWLOCATION"],0]],["let","t",["if",["<","timeout_s",0],0,"timeout_s"]],["let","mr",["if",["<","max_redirects",0],0,"max_redirects"]],["let","mhb",["if",["<","max_header_bytes",0],0,"max_header_bytes"]],["let","mh",["if",["<","max_headers",0],0,"max_headers"]],["let","cap",["+",64,["+",["+","url_len","hbytes_len"],0]]],["let","out",["vec_u8.with_capacity","cap"]],["set","out",["vec_u8.push","out",2]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","url_len"]]],["set","out",["vec_u8.extend_bytes_range","out","url",0,"url_len"]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","hcount"]]],["if",[">","hbytes_len",0],["set","out",["vec_u8.extend_bytes_range","out","headers",4,"hbytes_len"]],0],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",0]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","flags"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","t"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","mr"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","mhb"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","mh"]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.curl.http.req_get_v2","params":[{"name":"url","ty":"bytes_view"},{"name":"headers","ty":"bytes_view"},{"name":"follow_location","ty":"i32"},{"name":"timeout_s","ty":"i32"},{"name":"max_redirects","ty":"i32"},{"name":"max_header_bytes","ty":"i32"},{"name":"max_headers","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","url_len",["view.len","url"]],["let","headers_len",["view.len","headers"]],["let","hcount",["if",["<","headers_len",4],0,["codec.read_u32_le","headers",0]]],["let","hbytes_len",["if",["<","headers_len",4],0,["-","headers_len",4]]],["let","body_len",["view.len","body"]],["let","path_len",["view.len","out_path"]],["let","flags",["if",["!=","follow_location",0],["ext.curl.http.REQ_FLAG_FOLLOWLOCATION"],0]],["let","t",["if",["<","timeout_s",0],0,"timeout_s"]],["let","mr",["if",["<","max_redirects",0],0,"max_redirects"]],["let","mhb",["if",["<","max_header_bytes",0],0,"max_header_bytes"]],["let","mh",["if",["<","max_headers",0],0,"max_headers"]],["let","cap",["+",96,["+",["+",["+","url_len","hbytes_len"],"body_len"],"path_len"]]],["let","out",["vec_u8.with_capacity","cap"]],["set","out",["vec_u8.push","out",3]],["set","out",["vec_u8.push","out",2]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","url_len"]]],["set","out",["vec_u8.extend_bytes_range","out","url",0,"url_len"]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","hcount"]]],["if",[">","hbytes_len",0],["set","out",["vec_u8.extend_bytes_range","out","headers",4,"hbytes_len"]],0],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","body_len"]]],["if",[">","body_len",0],["set","out",["vec_u8.extend_bytes_range","out","body",0,"body_len"]],0],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","flags"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","t"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","mr"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","mhb"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","mh"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","path_len"]]],["if",[">","path_len",0],["set","out",["vec_u8.extend_bytes_range","out","out_path",0,"path_len"]],0],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.curl.http.req_post_to_file_v3","params":[{"name":"url","ty":"bytes_view"},{"name":"headers","ty":"bytes_view"},{"name":"body","ty":"bytes_view"},{"name":"out_path","ty":"bytes_view"},{"name":"follow_location","ty":"i32"},{"name":"timeout_s","ty":"i32"},{"name":"max_redirects","ty":"i32"},{"name":"max_header_bytes","ty":"i32"},{"name":"max_headers","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","url_len",["view.len","url"]],["let","headers_len",["view.len","headers"]],["let","hcount",["if",["<","headers_len",4],0,["codec.read_u32_le","headers",0]]],["let","hbytes_len",["if",["<","headers_len",4],0,["-","headers_len",4]]],["let","body_len",["view.len","body"]],["let","flags",["if",["!=","follow_location",0],["ext.curl.http.REQ_FLAG_FOLLOWLOCATION"],0]],["let","t",["if",["<","timeout_s",0],0,"timeout_s"]],["let","mr",["if",["<","max_redirects",0],0,"max_redirects"]],["let","mhb",["if",["<","max_header_bytes",0],0,"max_header_bytes"]],["let","mh",["if",["<","max_headers",0],0,"max_headers"]],["let","cap",["+",64,["+",["+",["+","url_len","hbytes_len"],"body_len"],0]]],["let","out",["vec_u8.with_capacity","cap"]],["set","out",["vec_u8.push","out",2]],["set","out",["vec_u8.push","out",2]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","url_len"]]],["set","out",["vec_u8.extend_bytes_range","out","url",0,"url_len"]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","hcount"]]],["if",[">","hbytes_len",0],["set","out",["vec_u8.extend_bytes_range","out","headers",4,"hbytes_len"]],0],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","body_len"]]],["if",[">","body_len",0],["set","out",["vec_u8.extend_bytes_range","out","body",0,"body_len"]],0],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","flags"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","t"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","mr"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","mhb"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","mh"]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.curl.http.req_post_v2","params":[{"name":"url","ty":"bytes_view"},{"name":"headers","ty":"bytes_view"},{"name":"body","ty":"bytes_view"},{"name":"follow_location","ty":"i32"},{"name":"timeout_s","ty":"i32"},{"name":"max_redirects","ty":"i32"},{"name":"max_header_bytes","ty":"i32"},{"name":"max_headers","ty":"i32"}],"result":"bytes"},{"body":["begin",["if",["<","max_body_bytes",0],["return",["ext.curl.http._make_err",2]],0],["let","req_len",["view.len","req"]],["if",["<","req_len",0],["return",["ext.curl.http._make_err",2]],0],["let","req_ptr",["view.as_ptr","req"]],["let","handle",0],["let","handle_ptr",["unsafe",["ptr.cast","ptr_mut_i32",["addr_of_mut","handle"]]]],["let","ret",["unsafe",["ext.curl._ffi.http_request_alloc","req_ptr","req_len","max_body_bytes","handle_ptr"]]],["if",["=","ret",0],["begin",["let","h",["unsafe",["ptr.read_i32","handle_ptr"]]],["let","actual_len",["unsafe",["ext.curl._ffi.buf_len","h"]]],["let","buf_ptr",["unsafe",["ext.curl._ffi.buf_ptr","h"]]],["let","out",["vec_u8.with_capacity","actual_len"]],["for","i",0,"actual_len",["set","out",["vec_u8.push","out",["unsafe",["ptr.read_u8",["ptr.add","buf_ptr","i"]]]]]],["let","bytes",["vec_u8.into_bytes","out"]],["let","_",["unsafe",["ext.curl._ffi.buf_free","h"]]],"bytes"],["ext.curl.http._make_err",8]]],"kind":"defn","name":"ext.curl.http.request_v1","params":[{"name":"req","ty":"bytes_view"},{"name":"max_body_bytes","ty":"i32"}],"result":"bytes"},{"body":["ext.curl.http.request_v1","req","max_body_bytes"],"kind":"defn","name":"ext.curl.http.request_v2","params":[{"name":"req","ty":"bytes_view"},{"name":"max_body_bytes","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","off",["ext.curl.http._resp_body_off","doc"]],["if",["<","off",0],["return",["bytes.alloc",0]],0],["let","len",["codec.read_u32_le","doc",["-","off",4]]],["begin",["let","ver",["view.get_u8","doc",1]],["if",["if",["=","ver",2],1,["=","ver",3]],0,["return",["bytes.alloc",0]]]],["view.to_bytes",["view.slice","doc","off","len"]]],"kind":"defn","name":"ext.curl.http.resp_body","params":[{"name":"doc","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",14],["return",0],0],["if",["!=",["view.get_u8","doc",0],1],["return",0],0],["if",["!=",["view.get_u8","doc",1],3],["return",0],0],["let","count",["codec.read_u32_le","doc",6]],["if",["<","count",0],["return",0],0],["let","pos",10],["for","_",0,"count",["begin",["if",[">=u",["+","pos",4],["+","n",1]],["return",0],0],["let","name_len",["codec.read_u32_le","doc","pos"]],["if",["<","name_len",0],["return",0],0],["set","pos",["+","pos",4]],["if",[">=u",["+","pos","name_len"],["+","n",1]],["return",0],0],["set","pos",["+","pos","name_len"]],["if",[">=u",["+","pos",4],["+","n",1]],["return",0],0],["let","value_len",["codec.read_u32_le","doc","pos"]],["if",["<","value_len",0],["return",0],0],["set","pos",["+","pos",4]],["if",[">=u",["+","pos","value_len"],["+","n",1]],["return",0],0],["set","pos",["+","pos","value_len"]],0]],["if",[">=u",["+","pos",4],["+","n",1]],["return",0],0],["let","path_len",["codec.read_u32_le","doc","pos"]],["if",["<","path_len",0],["return",0],0],["set","pos",["+","pos",4]],["if",[">=u",["+","pos","path_len"],["+","n",1]],["return",0],0],["set","pos",["+","pos","path_len"]],["if",[">=u",["+","pos",4],["+","n",1]],["return",0],0],["codec.read_u32_le","doc","pos"]],"kind":"defn","name":"ext.curl.http.resp_file_len_v3","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",14],["return",["bytes.alloc",0]],0],["if",["!=",["view.get_u8","doc",0],1],["return",["bytes.alloc",0]],0],["if",["!=",["view.get_u8","doc",1],3],["return",["bytes.alloc",0]],0],["let","count",["codec.read_u32_le","doc",6]],["if",["<","count",0],["return",["bytes.alloc",0]],0],["let","pos",10],["for","_",0,"count",["begin",["if",[">=u",["+","pos",4],["+","n",1]],["return",["bytes.alloc",0]],0],["let","name_len",["codec.read_u32_le","doc","pos"]],["if",["<","name_len",0],["return",["bytes.alloc",0]],0],["set","pos",["+","pos",4]],["if",[">=u",["+","pos","name_len"],["+","n",1]],["return",["bytes.alloc",0]],0],["set","pos",["+","pos","name_len"]],["if",[">=u",["+","pos",4],["+","n",1]],["return",["bytes.alloc",0]],0],["let","value_len",["codec.read_u32_le","doc","pos"]],["if",["<","value_len",0],["return",["bytes.alloc",0]],0],["set","pos",["+","pos",4]],["if",[">=u",["+","pos","value_len"],["+","n",1]],["return",["bytes.alloc",0]],0],["set","pos",["+","pos","value_len"]],0]],["if",[">=u",["+","pos",4],["+","n",1]],["return",["bytes.alloc",0]],0],["let","path_len",["codec.read_u32_le","doc","pos"]],["if",["<","path_len",0],["return",["bytes.alloc",0]],0],["set","pos",["+","pos",4]],["if",[">=u",["+","pos","path_len"],["+","n",1]],["return",["bytes.alloc",0]],0],["view.to_bytes",["view.slice","doc","pos","path_len"]]],"kind":"defn","name":"ext.curl.http.resp_file_path_v3","params":[{"name":"doc","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","path",["if",["=",["ext.curl.http.resp_ver","doc"],3],["ext.curl.http.resp_file_path_v3","doc"],["bytes.alloc",0]]],["fs.open_read",["bytes.view","path"]]],"kind":"defn","name":"ext.curl.http.resp_file_reader_v3","params":[{"name":"doc","ty":"bytes_view"}],"result":"iface"},{"body":["begin",["if",["<",["view.len","doc"],10],["return",0],0],["if",["!=",["view.get_u8","doc",0],1],["return",0],0],["codec.read_u32_le","doc",6]],"kind":"defn","name":"ext.curl.http.resp_header_count","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",10],["return",["bytes.alloc",0]],0],["if",["!=",["view.get_u8","doc",0],1],["return",["bytes.alloc",0]],0],["begin",["let","ver",["view.get_u8","doc",1]],["if",["if",["=","ver",2],1,["=","ver",3]],0,["return",["bytes.alloc",0]]],0],["let","count",["codec.read_u32_le","doc",6]],["if",["<","count",0],["return",["bytes.alloc",0]],0],["let","pos",10],["for","_",0,"count",["begin",["if",[">=u",["+","pos",4],["+","n",1]],["return",["bytes.alloc",0]],0],["let","name_len",["codec.read_u32_le","doc","pos"]],["if",["<","name_len",0],["return",["bytes.alloc",0]],0],["set","pos",["+","pos",4]],["if",[">=u",["+","pos","name_len"],["+","n",1]],["return",["bytes.alloc",0]],0],["let","name_view",["view.slice","doc","pos","name_len"]],["set","pos",["+","pos","name_len"]],["if",[">=u",["+","pos",4],["+","n",1]],["return",["bytes.alloc",0]],0],["let","value_len",["codec.read_u32_le","doc","pos"]],["if",["<","value_len",0],["return",["bytes.alloc",0]],0],["set","pos",["+","pos",4]],["if",[">=u",["+","pos","value_len"],["+","n",1]],["return",["bytes.alloc",0]],0],["if",["ext.curl.http._view_eq_nocase","name_view","name"],["return",["view.to_bytes",["view.slice","doc","pos","value_len"]]],0],["set","pos",["+","pos","value_len"]],0]],["bytes.alloc",0]],"kind":"defn","name":"ext.curl.http.resp_header_get_v2","params":[{"name":"doc","ty":"bytes_view"},{"name":"name","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["if",["<",["view.len","doc"],6],["return",0],0],["if",["!=",["view.get_u8","doc",0],1],["return",0],0],["codec.read_u32_le","doc",2]],"kind":"defn","name":"ext.curl.http.resp_status","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["if",["<",["view.len","doc"],2],["return",0],0],["if",["!=",["view.get_u8","doc",0],1],["return",0],0],["view.get_u8","doc",1]],"kind":"defn","name":"ext.curl.http.resp_ver","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"}],"imports":["ext.curl._ffi"],"kind":"module","module_id":"ext.curl.http","schema_version":"x07.x07ast@0.3.0"}
