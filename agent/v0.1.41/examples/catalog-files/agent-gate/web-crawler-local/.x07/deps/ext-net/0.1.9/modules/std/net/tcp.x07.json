{"decls":[{"kind":"export","names":["std.net.tcp.accept_peer_addr_v1","std.net.tcp.accept_stream_handle_v1","std.net.tcp.accept_task_v1","std.net.tcp.accept_v1","std.net.tcp.connect_stream_handle_v1","std.net.tcp.connect_task_v1","std.net.tcp.connect_v1","std.net.tcp.listen_bound_addr_v1","std.net.tcp.listen_listener_handle_v1","std.net.tcp.listen_v1","std.net.tcp.listener_close_v1","std.net.tcp.listener_drop_v1","std.net.tcp.shutdown_both_v1","std.net.tcp.shutdown_read_v1","std.net.tcp.shutdown_write_v1","std.net.tcp.stream_close_v1","std.net.tcp.stream_drop_v1","std.net.tcp.stream_read_payload_v1","std.net.tcp.stream_read_task_v1","std.net.tcp.stream_read_v1","std.net.tcp.stream_reader_v1","std.net.tcp.stream_shutdown_v1","std.net.tcp.stream_wait_events_v1","std.net.tcp.stream_wait_v1","std.net.tcp.stream_write_bytes_written_v1","std.net.tcp.stream_write_task_v1","std.net.tcp.stream_write_v1","std.net.tcp.wait_hangup_v1","std.net.tcp.wait_readable_v1","std.net.tcp.wait_writable_v1"]},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",12],["return",["bytes.alloc",0]],0],["if",["!=",["view.get_u8","doc",0],1],["return",["bytes.alloc",0]],0],["if",["!=",["view.get_u8","doc",1],1],["return",["bytes.alloc",0]],0],["let","addr_len",["codec.read_u32_le","doc",8]],["if",["<","addr_len",0],["return",["bytes.alloc",0]],0],["if",["!=",["+",12,"addr_len"],"n"],["return",["bytes.alloc",0]],0],["view.to_bytes",["view.slice","doc",12,"addr_len"]]],"kind":"defn","name":"std.net.tcp.accept_peer_addr_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",12],["return",0],0],["if",["!=",["view.get_u8","doc",0],1],["return",0],0],["if",["!=",["view.get_u8","doc",1],1],["return",0],0],["codec.read_u32_le","doc",4]],"kind":"defn","name":"std.net.tcp.accept_stream_handle_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["ext.sockets.net.tcp_accept_v1","listener_handle","caps"],"kind":"defn","name":"std.net.tcp.accept_v1","params":[{"name":"listener_handle","ty":"i32"},{"name":"caps","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",8],["return",0],0],["if",["!=",["view.get_u8","doc",0],1],["return",0],0],["if",["!=",["view.get_u8","doc",1],1],["return",0],0],["codec.read_u32_le","doc",4]],"kind":"defn","name":"std.net.tcp.connect_stream_handle_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["ext.sockets.net.tcp_connect_v1","addr","caps"],"kind":"defn","name":"std.net.tcp.connect_v1","params":[{"name":"addr","ty":"bytes_view"},{"name":"caps","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",12],["return",["bytes.alloc",0]],0],["if",["!=",["view.get_u8","doc",0],1],["return",["bytes.alloc",0]],0],["if",["!=",["view.get_u8","doc",1],1],["return",["bytes.alloc",0]],0],["let","addr_len",["codec.read_u32_le","doc",8]],["if",["<","addr_len",0],["return",["bytes.alloc",0]],0],["if",["!=",["+",12,"addr_len"],"n"],["return",["bytes.alloc",0]],0],["view.to_bytes",["view.slice","doc",12,"addr_len"]]],"kind":"defn","name":"std.net.tcp.listen_bound_addr_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",12],["return",0],0],["if",["!=",["view.get_u8","doc",0],1],["return",0],0],["if",["!=",["view.get_u8","doc",1],1],["return",0],0],["codec.read_u32_le","doc",4]],"kind":"defn","name":"std.net.tcp.listen_listener_handle_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["ext.sockets.net.tcp_listen_v1","addr","caps"],"kind":"defn","name":"std.net.tcp.listen_v1","params":[{"name":"addr","ty":"bytes_view"},{"name":"caps","ty":"bytes_view"}],"result":"bytes"},{"body":["ext.sockets.net.tcp_listener_close_v1","listener_handle"],"kind":"defn","name":"std.net.tcp.listener_close_v1","params":[{"name":"listener_handle","ty":"i32"}],"result":"i32"},{"body":["ext.sockets.net.tcp_listener_drop_v1","listener_handle"],"kind":"defn","name":"std.net.tcp.listener_drop_v1","params":[{"name":"listener_handle","ty":"i32"}],"result":"i32"},{"body":2,"kind":"defn","name":"std.net.tcp.shutdown_both_v1","params":[],"result":"i32"},{"body":0,"kind":"defn","name":"std.net.tcp.shutdown_read_v1","params":[],"result":"i32"},{"body":1,"kind":"defn","name":"std.net.tcp.shutdown_write_v1","params":[],"result":"i32"},{"body":["ext.sockets.net.tcp_stream_close_v1","stream_handle"],"kind":"defn","name":"std.net.tcp.stream_close_v1","params":[{"name":"stream_handle","ty":"i32"}],"result":"i32"},{"body":["ext.sockets.net.tcp_stream_drop_v1","stream_handle"],"kind":"defn","name":"std.net.tcp.stream_drop_v1","params":[{"name":"stream_handle","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",8],["return",["bytes.alloc",0]],0],["if",["!=",["view.get_u8","doc",0],1],["return",["bytes.alloc",0]],0],["if",["!=",["view.get_u8","doc",1],1],["return",["bytes.alloc",0]],0],["let","payload_len",["codec.read_u32_le","doc",4]],["if",["<","payload_len",0],["return",["bytes.alloc",0]],0],["if",["!=",["+",8,"payload_len"],"n"],["return",["bytes.alloc",0]],0],["view.to_bytes",["view.slice","doc",8,"payload_len"]]],"kind":"defn","name":"std.net.tcp.stream_read_payload_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"bytes"},{"body":["ext.sockets.net.tcp_stream_read_v1","stream_handle","max_bytes","caps"],"kind":"defn","name":"std.net.tcp.stream_read_v1","params":[{"name":"stream_handle","ty":"i32"},{"name":"max_bytes","ty":"i32"},{"name":"caps","ty":"bytes_view"}],"result":"bytes"},{"body":["ext.sockets.net.tcp_stream_reader_v1","stream_handle","caps"],"kind":"defn","name":"std.net.tcp.stream_reader_v1","params":[{"name":"stream_handle","ty":"i32"},{"name":"caps","ty":"bytes_view"}],"result":"iface"},{"body":["ext.sockets.net.tcp_stream_shutdown_v1","stream_handle","how"],"kind":"defn","name":"std.net.tcp.stream_shutdown_v1","params":[{"name":"stream_handle","ty":"i32"},{"name":"how","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",8],["return",0],0],["if",["!=",["view.get_u8","doc",0],1],["return",0],0],["if",["!=",["view.get_u8","doc",1],1],["return",0],0],["codec.read_u32_le","doc",4]],"kind":"defn","name":"std.net.tcp.stream_wait_events_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["ext.sockets.net.tcp_stream_wait_v1","stream_handle","events","timeout_ms"],"kind":"defn","name":"std.net.tcp.stream_wait_v1","params":[{"name":"stream_handle","ty":"i32"},{"name":"events","ty":"i32"},{"name":"timeout_ms","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",8],["return",0],0],["if",["!=",["view.get_u8","doc",0],1],["return",0],0],["if",["!=",["view.get_u8","doc",1],1],["return",0],0],["codec.read_u32_le","doc",4]],"kind":"defn","name":"std.net.tcp.stream_write_bytes_written_v1","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["ext.sockets.net.tcp_stream_write_v1","stream_handle","data","caps"],"kind":"defn","name":"std.net.tcp.stream_write_v1","params":[{"name":"stream_handle","ty":"i32"},{"name":"data","ty":"bytes_view"},{"name":"caps","ty":"bytes_view"}],"result":"bytes"},{"body":4,"kind":"defn","name":"std.net.tcp.wait_hangup_v1","params":[],"result":"i32"},{"body":1,"kind":"defn","name":"std.net.tcp.wait_readable_v1","params":[],"result":"i32"},{"body":2,"kind":"defn","name":"std.net.tcp.wait_writable_v1","params":[],"result":"i32"},{"body":["begin",["let","caps0",["std.net.codec.caps_poll_from_v1","caps"]],["let","caps0_v",["bytes.view","caps0"]],["let","max0",["if",["<","max_iters",0],0,"max_iters"]],["for","i",0,"max0",["begin",["let","doc",["std.net.tcp.accept_v1","listener_handle","caps0_v"]],["if",["std.net.err.is_err_doc_v1","doc"],["begin",["let","code",["std.net.err.err_code_v1","doc"]],["if",["=","code",["std.net.err.code_timeout_v1"]],["begin",["task.yield"],0],["return",["std.net.err.make_doc_v1","code"]]],0],["return","doc"]],0]],["std.net.err.make_doc_v1",["std.net.err.code_timeout_v1"]]],"kind":"defasync","name":"std.net.tcp.accept_task_v1","params":[{"name":"listener_handle","ty":"i32"},{"name":"caps","ty":"bytes_view"},{"name":"max_iters","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","caps0",["std.net.codec.caps_poll_from_v1","caps"]],["let","caps0_v",["bytes.view","caps0"]],["let","max0",["if",["<","max_iters",0],0,"max_iters"]],["for","i",0,"max0",["begin",["let","doc",["std.net.tcp.connect_v1","addr","caps0_v"]],["if",["std.net.err.is_err_doc_v1","doc"],["begin",["let","code",["std.net.err.err_code_v1","doc"]],["if",["=","code",["std.net.err.code_timeout_v1"]],["begin",["task.yield"],0],["return",["std.net.err.make_doc_v1","code"]]],0],["return","doc"]],0]],["std.net.err.make_doc_v1",["std.net.err.code_timeout_v1"]]],"kind":"defasync","name":"std.net.tcp.connect_task_v1","params":[{"name":"addr","ty":"bytes_view"},{"name":"caps","ty":"bytes_view"},{"name":"max_iters","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","caps0",["std.net.codec.caps_poll_from_v1","caps"]],["let","caps0_v",["bytes.view","caps0"]],["let","max0",["if",["<","max_iters",0],0,"max_iters"]],["for","i",0,"max0",["begin",["let","doc",["std.net.tcp.stream_read_v1","stream_handle","max_bytes","caps0_v"]],["if",["std.net.err.is_err_doc_v1","doc"],["begin",["let","code",["std.net.err.err_code_v1","doc"]],["if",["=","code",["std.net.err.code_timeout_v1"]],["begin",["task.yield"],0],["return",["std.net.err.make_doc_v1","code"]]],0],["return","doc"]],0]],["std.net.err.make_doc_v1",["std.net.err.code_timeout_v1"]]],"kind":"defasync","name":"std.net.tcp.stream_read_task_v1","params":[{"name":"stream_handle","ty":"i32"},{"name":"max_bytes","ty":"i32"},{"name":"caps","ty":"bytes_view"},{"name":"max_iters","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","caps0",["std.net.codec.caps_poll_from_v1","caps"]],["let","caps0_v",["bytes.view","caps0"]],["let","max0",["if",["<","max_iters",0],0,"max_iters"]],["for","i",0,"max0",["begin",["let","doc",["std.net.tcp.stream_write_v1","stream_handle","data","caps0_v"]],["if",["std.net.err.is_err_doc_v1","doc"],["begin",["let","code",["std.net.err.err_code_v1","doc"]],["if",["=","code",["std.net.err.code_timeout_v1"]],["begin",["task.yield"],0],["return",["std.net.err.make_doc_v1","code"]]],0],["return","doc"]],0]],["std.net.err.make_doc_v1",["std.net.err.code_timeout_v1"]]],"kind":"defasync","name":"std.net.tcp.stream_write_task_v1","params":[{"name":"stream_handle","ty":"i32"},{"name":"data","ty":"bytes_view"},{"name":"caps","ty":"bytes_view"},{"name":"max_iters","ty":"i32"}],"result":"bytes"}],"imports":["ext.sockets.net","std.net.codec","std.net.err"],"kind":"module","module_id":"std.net.tcp","schema_version":"x07.x07ast@0.3.0"}
