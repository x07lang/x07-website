{"decls":[{"kind":"export","names":["ext.pb.wire.decode_v1","ext.pb.wire.descriptor_set_to_schema_v1","ext.pb.wire.encode_v1","ext.pb.wire.err_code","ext.pb.wire.is_err","ext.pb.wire.varint_u32_encode_v1","ext.pb.wire.varint_u32_status_v1","ext.pb.wire.varint_u64_status_v1"]},{"body":["begin",["let","out",["vec_u8.with_capacity",9]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","code"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",0]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.pb.wire._make_err","params":[{"name":"code","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","fd_doc",["ext.pb.wire.decode_v1","fd_bytes","max_out_bytes"]],["let","fdv",["bytes.view","fd_doc"]],["if",["ext.pb.wire.is_err","fdv"],["return",["view.to_bytes","fdv"]],0],["let","n",["view.len","fdv"]],["if",["<u","n",5],["return",["ext.pb.wire._make_err",5]],0],["let","count",["codec.read_u32_le","fdv",1]],["if",["<","count",0],["return",["ext.pb.wire._make_err",5]],0],["let","f_name",["bytes.alloc",0]],["let","f_number",0],["let","f_label",0],["let","f_type",0],["let","f_type_name",["bytes.alloc",0]],["let","pos",5],["for","_",0,"count",["begin",["if",[">=u",["+","pos",9],["+","n",1]],["return",["ext.pb.wire._make_err",5]],0],["let","fdf",["codec.read_u32_le","fdv","pos"]],["set","pos",["+","pos",4]],["let","fdwt",["view.get_u8","fdv","pos"]],["set","pos",["+","pos",1]],["let","vlen",["codec.read_u32_le","fdv","pos"]],["set","pos",["+","pos",4]],["if",["<","vlen",0],["return",["ext.pb.wire._make_err",5]],0],["if",[">=u",["+","pos","vlen"],["+","n",1]],["return",["ext.pb.wire._make_err",5]],0],["let","v",["view.slice","fdv","pos","vlen"]],["if",["if",["=","fdf",1],["=","fdwt",2],0],["begin",["set","f_name",["view.to_bytes","v"]],0],["if",["if",["if",["if",["=","fdf",3],1,["=","fdf",4]],1,["=","fdf",5]],["=","fdwt",0],0],["begin",["let","st",["ext.pb.wire._varint_u32_status","v",0]],["let","stv",["bytes.view","st"]],["if",["ext.pb.wire.is_err","stv"],["return",["view.to_bytes","stv"]],0],["let","len_used",["codec.read_u32_le","stv",5]],["if",["=",["=","len_used","vlen"],0],["return",["ext.pb.wire._make_err",5]],0],["let","vv",["codec.read_u32_le","stv",1]],["if",["=","fdf",3],["set","f_number","vv"],["if",["=","fdf",4],["set","f_label","vv"],["set","f_type","vv"]]],0],["if",["if",["=","fdf",6],["=","fdwt",2],0],["begin",["let","tn","v"],["if",["if",["<u",0,["view.len","tn"]],["=",["view.get_u8","tn",0],46],0],["begin",["set","tn",["view.slice","tn",1,["-",["view.len","tn"],1]]],0],0],["set","f_type_name",["view.to_bytes","tn"]],0],0]]],["set","pos",["+","pos","vlen"]]]],["if",["=",["=","pos","n"],0],["return",["ext.pb.wire._make_err",5]],0],["if",["if",["if",["if",["=",["bytes.len","f_name"],0],1,["=","f_number",0]],1,["=","f_label",0]],1,["=","f_type",0]],["return",["ext.pb.wire._make_err",5]],0],["let","fn_len",["bytes.len","f_name"]],["let","tn_len",["bytes.len","f_type_name"]],["let","payload_len",["+",["+",["+",["+",["+",["+",4,1],1],4],"fn_len"],4],"tn_len"]],["let","out",["vec_u8.with_capacity",["+","payload_len",1]]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","f_number"]]],["set","out",["vec_u8.push","out",["&","f_label",255]]],["set","out",["vec_u8.push","out",["&","f_type",255]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","fn_len"]]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","f_name"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","tn_len"]]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","f_type_name"]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.pb.wire._schema_field_entry_v1","params":[{"name":"fd_bytes","ty":"bytes_view"},{"name":"max_out_bytes","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","file_doc",["ext.pb.wire.decode_v1","file_bytes","max_out_bytes"]],["let","filev",["bytes.view","file_doc"]],["if",["ext.pb.wire.is_err","filev"],["return",["view.to_bytes","filev"]],0],["let","n",["view.len","filev"]],["if",["<u","n",5],["return",["ext.pb.wire._make_err",5]],0],["let","count",["codec.read_u32_le","filev",1]],["if",["<","count",0],["return",["ext.pb.wire._make_err",5]],0],["let","package",["bytes.alloc",0]],["let","msgs_out",["vec_u8.with_capacity",64]],["let","msg_count",0],["let","pos",5],["for","_",0,"count",["begin",["if",[">=u",["+","pos",9],["+","n",1]],["return",["ext.pb.wire._make_err",5]],0],["let","fno",["codec.read_u32_le","filev","pos"]],["set","pos",["+","pos",4]],["let","fwt",["view.get_u8","filev","pos"]],["set","pos",["+","pos",1]],["let","vlen",["codec.read_u32_le","filev","pos"]],["set","pos",["+","pos",4]],["if",["<","vlen",0],["return",["ext.pb.wire._make_err",5]],0],["if",[">=u",["+","pos","vlen"],["+","n",1]],["return",["ext.pb.wire._make_err",5]],0],["if",["if",["=","fno",2],["=","fwt",2],0],["begin",["set","package",["view.to_bytes",["view.slice","filev","pos","vlen"]]],0],["if",["if",["=","fno",4],["=","fwt",2],0],["begin",["let","msg_bytes",["view.slice","filev","pos","vlen"]],["let","msg_entry",["ext.pb.wire._schema_message_entry_v1","msg_bytes",["bytes.view","package"],"max_out_bytes"]],["let","mv",["bytes.view","msg_entry"]],["if",["ext.pb.wire.is_err","mv"],["return",["view.to_bytes","mv"]],0],["let","mn",["view.len","mv"]],["if",["<u","mn",2],["return",["ext.pb.wire._make_err",5]],0],["set","msgs_out",["vec_u8.extend_bytes","msgs_out",["view.slice","mv",1,["-","mn",1]]]],["set","msg_count",["+","msg_count",1]],0],0]],["set","pos",["+","pos","vlen"]]]],["if",["=",["=","pos","n"],0],["return",["ext.pb.wire._make_err",5]],0],["let","msgs_b",["vec_u8.into_bytes","msgs_out"]],["let","msgs_len",["bytes.len","msgs_b"]],["let","payload_len",["+",4,"msgs_len"]],["let","out",["vec_u8.with_capacity",["+","payload_len",1]]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","msg_count"]]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","msgs_b"]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.pb.wire._schema_file_entries_v1","params":[{"name":"file_bytes","ty":"bytes_view"},{"name":"max_out_bytes","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","msg_doc",["ext.pb.wire.decode_v1","msg_bytes","max_out_bytes"]],["let","msgv",["bytes.view","msg_doc"]],["if",["ext.pb.wire.is_err","msgv"],["return",["view.to_bytes","msgv"]],0],["let","n",["view.len","msgv"]],["if",["<u","n",5],["return",["ext.pb.wire._make_err",5]],0],["let","count",["codec.read_u32_le","msgv",1]],["if",["<","count",0],["return",["ext.pb.wire._make_err",5]],0],["let","msg_name",["bytes.alloc",0]],["let","fields_out",["vec_u8.with_capacity",64]],["let","field_count",0],["let","pos",5],["for","_",0,"count",["begin",["if",[">=u",["+","pos",9],["+","n",1]],["return",["ext.pb.wire._make_err",5]],0],["let","mno",["codec.read_u32_le","msgv","pos"]],["set","pos",["+","pos",4]],["let","mwt",["view.get_u8","msgv","pos"]],["set","pos",["+","pos",1]],["let","vlen",["codec.read_u32_le","msgv","pos"]],["set","pos",["+","pos",4]],["if",["<","vlen",0],["return",["ext.pb.wire._make_err",5]],0],["if",[">=u",["+","pos","vlen"],["+","n",1]],["return",["ext.pb.wire._make_err",5]],0],["if",["if",["=","mno",1],["=","mwt",2],0],["begin",["set","msg_name",["view.to_bytes",["view.slice","msgv","pos","vlen"]]],0],["if",["if",["=","mno",2],["=","mwt",2],0],["begin",["let","fd_bytes",["view.slice","msgv","pos","vlen"]],["let","fd_entry",["ext.pb.wire._schema_field_entry_v1","fd_bytes","max_out_bytes"]],["let","fdv",["bytes.view","fd_entry"]],["if",["ext.pb.wire.is_err","fdv"],["return",["view.to_bytes","fdv"]],0],["let","fdn",["view.len","fdv"]],["if",["<u","fdn",2],["return",["ext.pb.wire._make_err",5]],0],["set","fields_out",["vec_u8.extend_bytes","fields_out",["view.slice","fdv",1,["-","fdn",1]]]],["set","field_count",["+","field_count",1]],0],0]],["set","pos",["+","pos","vlen"]]]],["if",["=",["=","pos","n"],0],["return",["ext.pb.wire._make_err",5]],0],["if",["=",["bytes.len","msg_name"],0],["return",["ext.pb.wire._make_err",5]],0],["let","pkg_len",["view.len","package"]],["let","name_len",["bytes.len","msg_name"]],["let","full_len",["if",["=","pkg_len",0],"name_len",["+",["+","pkg_len",1],"name_len"]]],["let","full_name",["vec_u8.with_capacity","full_len"]],["if",["=",["=","pkg_len",0],0],["begin",["set","full_name",["vec_u8.extend_bytes","full_name","package"]],["set","full_name",["vec_u8.push","full_name",46]],0],0],["set","full_name",["vec_u8.extend_bytes","full_name",["bytes.view","msg_name"]]],["let","full_b",["vec_u8.into_bytes","full_name"]],["let","fields_b",["vec_u8.into_bytes","fields_out"]],["let","fields_len",["bytes.len","fields_b"]],["let","payload_len",["+",["+",["+",4,"full_len"],4],"fields_len"]],["let","out",["vec_u8.with_capacity",["+","payload_len",1]]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","full_len"]]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","full_b"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","field_count"]]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","fields_b"]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.pb.wire._schema_message_entry_v1","params":[{"name":"msg_bytes","ty":"bytes_view"},{"name":"package","ty":"bytes_view"},{"name":"max_out_bytes","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","msg"]],["let","i","off"],["let","len",0],["let","done",0],["for","_",0,10,["if",["=","done",0],["begin",["if",[">=u","i","n"],["return",["ext.pb.wire._make_err",1]],0],["let","b",["view.get_u8","msg","i"]],["set","i",["+","i",1]],["set","len",["+","len",1]],["if",["=",["&","b",128],0],["set","done",1],0]],0]],["if",["=","done",0],["return",["ext.pb.wire._make_err",2]],0],["let","out",["vec_u8.with_capacity",5]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","len"]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.pb.wire._varint_len_status","params":[{"name":"msg","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","out",["vec_u8.with_capacity",5]],["let","v","x"],["for","_",0,5,["begin",["let","b",["&","v",127]],["set","v",[">>u","v",7]],["if",["=","v",0],["begin",["set","out",["vec_u8.push","out","b"]],["return",["vec_u8.into_bytes","out"]]],0],["set","out",["vec_u8.push","out",["|","b",128]]]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.pb.wire._varint_u32_encode","params":[{"name":"x","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","msg"]],["if",[">=u","off","n"],["return",["ext.pb.wire._make_err",1]],0],["let","val",0],["let","shift",0],["let","i","off"],["let","done",0],["let","overflow",0],["for","_",0,10,["if",["=","done",0],["begin",["if",[">=u","i","n"],["return",["ext.pb.wire._make_err",1]],0],["let","b",["view.get_u8","msg","i"]],["let","low",["&","b",127]],["if",["if",["=","shift",28],["=",["=",["&","low",240],0],0],0],["set","overflow",1],0],["if",["<u","shift",32],["set","val",["|","val",["<<u","low","shift"]]],["set","overflow",1]],["set","i",["+","i",1]],["if",["=",["&","b",128],0],["set","done",1],0],["set","shift",["+","shift",7]]],0]],["if",["if",["=","done",0],1,["=",["=","overflow",0],0]],["return",["ext.pb.wire._make_err",2]],0],["let","len",["-","i","off"]],["let","out",["vec_u8.with_capacity",9]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","val"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","len"]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.pb.wire._varint_u32_status","params":[{"name":"msg","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","msg"]],["if",[">=u","off","n"],["return",["ext.pb.wire._make_err",1]],0],["let","lo",0],["let","hi",0],["let","shift",0],["let","i","off"],["let","done",0],["let","overflow",0],["for","_",0,10,["if",["=","done",0],["begin",["if",[">=u","i","n"],["return",["ext.pb.wire._make_err",1]],0],["let","b",["view.get_u8","msg","i"]],["let","low",["&","b",127]],["if",["if",["=","shift",63],["=",["=",["&","low",126],0],0],0],["set","overflow",1],0],["if",["<u","shift",64],["if",["<u","shift",32],["begin",["set","lo",["|","lo",["<<u","low","shift"]]],["if",["<u",25,"shift"],["set","hi",["|","hi",[">>u","low",["-",32,"shift"]]]],0]],["set","hi",["|","hi",["<<u","low",["-","shift",32]]]]],["set","overflow",1]],["set","i",["+","i",1]],["if",["=",["&","b",128],0],["set","done",1],0],["set","shift",["+","shift",7]]],0]],["if",["if",["=","done",0],1,["=",["=","overflow",0],0]],["return",["ext.pb.wire._make_err",2]],0],["let","len",["-","i","off"]],["let","out",["vec_u8.with_capacity",13]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","lo"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","hi"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","len"]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.pb.wire._varint_u64_status","params":[{"name":"msg","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"bytes"},{"body":["begin",["if",["<","max_out_bytes",0],["return",["ext.pb.wire._make_err",4]],0],["let","n",["view.len","msg"]],["let","out",["vec_u8.with_capacity",["+",1,4]]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",0]]],["let","off",0],["let","count",0],["for","_",0,["+","n",1],["begin",["if",[">=u","off","n"],["begin",["let","b",["vec_u8.into_bytes","out"]],["let","c",["codec.write_u32_le","count"]],["set","b",["bytes.set_u8","b",1,["bytes.get_u8","c",0]]],["set","b",["bytes.set_u8","b",2,["bytes.get_u8","c",1]]],["set","b",["bytes.set_u8","b",3,["bytes.get_u8","c",2]]],["set","b",["bytes.set_u8","b",4,["bytes.get_u8","c",3]]],["return","b"]],0],["let","tag_status",["ext.pb.wire._varint_u32_status","msg","off"]],["if",["=",["bytes.get_u8","tag_status",0],0],["return","tag_status"],0],["let","tagv",["bytes.view","tag_status"]],["let","tag",["codec.read_u32_le","tagv",1]],["let","tag_len",["codec.read_u32_le","tagv",5]],["set","off",["+","off","tag_len"]],["let","wire_type",["&","tag",7]],["let","field_no",[">>u","tag",3]],["if",["=","field_no",0],["return",["ext.pb.wire._make_err",3]],0],["if",["if",["if",["if",["=",["=","wire_type",0],0],["=",["=","wire_type",1],0],0],["=",["=","wire_type",2],0],0],["=",["=","wire_type",5],0],0],["return",["ext.pb.wire._make_err",3]],0],["let","value_len",0],["let","value_off",0],["if",["=","wire_type",0],["begin",["let","len_status",["ext.pb.wire._varint_len_status","msg","off"]],["if",["=",["bytes.get_u8","len_status",0],0],["return","len_status"],0],["let","lv",["bytes.view","len_status"]],["let","l",["codec.read_u32_le","lv",1]],["set","value_off","off"],["set","value_len","l"],["set","off",["+","off","l"]]],["if",["=","wire_type",1],["begin",["if",["<u","n",["+","off",8]],["return",["ext.pb.wire._make_err",1]],0],["set","value_off","off"],["set","value_len",8],["set","off",["+","off",8]]],["if",["=","wire_type",5],["begin",["if",["<u","n",["+","off",4]],["return",["ext.pb.wire._make_err",1]],0],["set","value_off","off"],["set","value_len",4],["set","off",["+","off",4]]],["begin",["let","len_status",["ext.pb.wire._varint_u32_status","msg","off"]],["if",["=",["bytes.get_u8","len_status",0],0],["return","len_status"],0],["let","lv",["bytes.view","len_status"]],["let","l",["codec.read_u32_le","lv",1]],["let","l_len",["codec.read_u32_le","lv",5]],["if",["<","l",0],["return",["ext.pb.wire._make_err",2]],0],["set","off",["+","off","l_len"]],["if",["<u","n",["+","off","l"]],["return",["ext.pb.wire._make_err",1]],0],["set","value_off","off"],["set","value_len","l"],["set","off",["+","off","l"]]]]]],["let","cur_payload",["-",["vec_u8.len","out"],1]],["let","needed",["+",9,"value_len"]],["if",["<u","max_out_bytes","cur_payload"],["return",["ext.pb.wire._make_err",4]],0],["let","remain",["-","max_out_bytes","cur_payload"]],["if",["<u","remain","needed"],["return",["ext.pb.wire._make_err",4]],0],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","field_no"]]],["set","out",["vec_u8.push","out","wire_type"]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","value_len"]]],["set","out",["vec_u8.extend_bytes_range","out","msg","value_off","value_len"]],["set","count",["+","count",1]]]],["ext.pb.wire._make_err",1]],"kind":"defn","name":"ext.pb.wire.decode_v1","params":[{"name":"msg","ty":"bytes_view"},{"name":"max_out_bytes","ty":"i32"}],"result":"bytes"},{"body":["begin",["if",["<","max_out_bytes",0],["return",["ext.pb.wire._make_err",4]],0],["let","raw",["ext.pb.wire.decode_v1","desc","max_out_bytes"]],["let","rawv",["bytes.view","raw"]],["if",["ext.pb.wire.is_err","rawv"],["return",["view.to_bytes","rawv"]],0],["let","raw_len",["view.len","rawv"]],["if",["<u","raw_len",5],["return",["ext.pb.wire._make_err",5]],0],["let","count",["codec.read_u32_le","rawv",1]],["if",["<","count",0],["return",["ext.pb.wire._make_err",5]],0],["let","out",["vec_u8.with_capacity",64]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",0]]],["let","out_payload_len",5],["let","msg_count",0],["let","pos",5],["for","_",0,"count",["begin",["if",[">=u",["+","pos",9],["+","raw_len",1]],["return",["ext.pb.wire._make_err",5]],0],["let","field_no",["codec.read_u32_le","rawv","pos"]],["set","pos",["+","pos",4]],["let","wire_type",["view.get_u8","rawv","pos"]],["set","pos",["+","pos",1]],["let","vlen",["codec.read_u32_le","rawv","pos"]],["set","pos",["+","pos",4]],["if",["<","vlen",0],["return",["ext.pb.wire._make_err",5]],0],["if",[">=u",["+","pos","vlen"],["+","raw_len",1]],["return",["ext.pb.wire._make_err",5]],0],["if",["if",["=","field_no",1],["=","wire_type",2],0],["begin",["let","file_bytes",["view.slice","rawv","pos","vlen"]],["let","file_doc",["ext.pb.wire._schema_file_entries_v1","file_bytes","max_out_bytes"]],["let","fv",["bytes.view","file_doc"]],["if",["ext.pb.wire.is_err","fv"],["return",["view.to_bytes","fv"]],0],["let","fnn",["view.len","fv"]],["if",["<u","fnn",5],["return",["ext.pb.wire._make_err",5]],0],["let","file_msg_count",["codec.read_u32_le","fv",1]],["if",["<","file_msg_count",0],["return",["ext.pb.wire._make_err",5]],0],["let","entries_len",["-","fnn",5]],["if",["=",["=","entries_len",0],0],["begin",["if",["<u","max_out_bytes",["+","out_payload_len","entries_len"]],["return",["ext.pb.wire._make_err",4]],0],["set","out",["vec_u8.extend_bytes","out",["view.slice","fv",5,"entries_len"]]],["set","out_payload_len",["+","out_payload_len","entries_len"]]],0],["set","msg_count",["+","msg_count","file_msg_count"]]],0],["set","pos",["+","pos","vlen"]]]],["if",["=",["=","pos","raw_len"],0],["return",["ext.pb.wire._make_err",5]],0],["let","b",["vec_u8.into_bytes","out"]],["let","c",["codec.write_u32_le","msg_count"]],["set","b",["bytes.set_u8","b",2,["bytes.get_u8","c",0]]],["set","b",["bytes.set_u8","b",3,["bytes.get_u8","c",1]]],["set","b",["bytes.set_u8","b",4,["bytes.get_u8","c",2]]],["set","b",["bytes.set_u8","b",5,["bytes.get_u8","c",3]]],"b"],"kind":"defn","name":"ext.pb.wire.descriptor_set_to_schema_v1","params":[{"name":"desc","ty":"bytes_view"},{"name":"max_out_bytes","ty":"i32"}],"result":"bytes"},{"body":["begin",["if",["<","max_out_bytes",0],["return",["ext.pb.wire._make_err",2]],0],["let","n",["view.len","doc"]],["if",["<u","n",1],["return",["ext.pb.wire._make_err",1]],0],["if",["=",["view.get_u8","doc",0],0],["return",["view.to_bytes","doc"]],0],["if",["<u","n",5],["return",["ext.pb.wire._make_err",1]],0],["let","count",["codec.read_u32_le","doc",1]],["if",["<","count",0],["return",["ext.pb.wire._make_err",1]],0],["let","pos",5],["let","out",["vec_u8.with_capacity","n"]],["set","out",["vec_u8.push","out",1]],["let","out_payload_len",0],["for","_",0,"count",["begin",["if",[">=u",["+","pos",9],["+","n",1]],["return",["ext.pb.wire._make_err",1]],0],["let","field_no",["codec.read_u32_le","doc","pos"]],["set","pos",["+","pos",4]],["let","wire_type",["view.get_u8","doc","pos"]],["set","pos",["+","pos",1]],["let","value_len",["codec.read_u32_le","doc","pos"]],["set","pos",["+","pos",4]],["if",["=","field_no",0],["return",["ext.pb.wire._make_err",4]],0],["if",["if",["if",["if",["=",["=","wire_type",0],0],["=",["=","wire_type",1],0],0],["=",["=","wire_type",2],0],0],["=",["=","wire_type",5],0],0],["return",["ext.pb.wire._make_err",3]],0],["if",["<","value_len",0],["return",["ext.pb.wire._make_err",1]],0],["if",[">=u",["+","pos","value_len"],["+","n",1]],["return",["ext.pb.wire._make_err",1]],0],["if",["=","wire_type",0],["if",["if",["=","value_len",0],1,["<u",10,"value_len"]],["return",["ext.pb.wire._make_err",5]],0],["if",["=","wire_type",1],["if",["=",["=","value_len",8],0],["return",["ext.pb.wire._make_err",5]],0],["if",["=","wire_type",5],["if",["=",["=","value_len",4],0],["return",["ext.pb.wire._make_err",5]],0],0]]],["let","value_off","pos"],["set","pos",["+","pos","value_len"]],["let","tag",["|",["<<u","field_no",3],"wire_type"]],["let","tag_bytes",["ext.pb.wire._varint_u32_encode","tag"]],["let","tag_len",["bytes.len","tag_bytes"]],["if",["<u","max_out_bytes",["+","out_payload_len","tag_len"]],["return",["ext.pb.wire._make_err",2]],0],["set","out",["vec_u8.extend_bytes","out",["bytes.view","tag_bytes"]]],["set","out_payload_len",["+","out_payload_len","tag_len"]],["if",["=","wire_type",2],["begin",["let","len_bytes",["ext.pb.wire._varint_u32_encode","value_len"]],["let","len_len",["bytes.len","len_bytes"]],["if",["<u","max_out_bytes",["+","out_payload_len","len_len"]],["return",["ext.pb.wire._make_err",2]],0],["set","out",["vec_u8.extend_bytes","out",["bytes.view","len_bytes"]]],["set","out_payload_len",["+","out_payload_len","len_len"]]],0],["if",["<u","max_out_bytes",["+","out_payload_len","value_len"]],["return",["ext.pb.wire._make_err",2]],0],["set","out",["vec_u8.extend_bytes_range","out","doc","value_off","value_len"]],["set","out_payload_len",["+","out_payload_len","value_len"]]]],["if",["=",["=","pos","n"],0],["return",["ext.pb.wire._make_err",1]],0],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.pb.wire.encode_v1","params":[{"name":"doc","ty":"bytes_view"},{"name":"max_out_bytes","ty":"i32"}],"result":"bytes"},{"body":["begin",["if",["<",["view.len","doc"],5],["return",0],0],["if",["=",["=",["view.get_u8","doc",0],0],0],["return",0],0],["codec.read_u32_le","doc",1]],"kind":"defn","name":"ext.pb.wire.err_code","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["if",["<",["view.len","doc"],1],["return",1],0],["=",["view.get_u8","doc",0],0]],"kind":"defn","name":"ext.pb.wire.is_err","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["ext.pb.wire._varint_u32_encode","x"],"kind":"defn","name":"ext.pb.wire.varint_u32_encode_v1","params":[{"name":"x","ty":"i32"}],"result":"bytes"},{"body":["ext.pb.wire._varint_u32_status","msg","off"],"kind":"defn","name":"ext.pb.wire.varint_u32_status_v1","params":[{"name":"msg","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"bytes"},{"body":["ext.pb.wire._varint_u64_status","msg","off"],"kind":"defn","name":"ext.pb.wire.varint_u64_status_v1","params":[{"name":"msg","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"bytes"}],"imports":[],"kind":"module","meta":{"generated_by":"x07import","source_path":"tests/x07import/fixtures/import_sources/rust/ext_pb@0.1.0/wire.rs","source_sha256":"90ede1ac6f58b10699d5b11f61e8ffa6b309ba484a45d4692a8200cf8871067f"},"module_id":"ext.pb.wire","schema_version":"x07.x07ast@0.3.0"}
