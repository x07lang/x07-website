{"decls":[{"kind":"export","names":["smoke.test_replay_report_v1","smoke.test_server_payload_v1"]},{"body":["begin",["let","qv",["std.vec.with_capacity",["+",["view.len","json"],["+",["bytes.len","field"],8]]]],["set","qv",["std.vec.extend_bytes","qv","json"]],["set","qv",["std.vec.push","qv",0]],["set","qv",["std.vec.extend_bytes","qv",["bytes.view","field"]]],["let","query",["std.vec.as_bytes","qv"]],["let","got",["std.json.extract_path_canon_or_err",["bytes.view","query"]]],["std.test.assert_bytes_eq","got","want",["std.test.code_assert_bytes_eq"]]],"kind":"defn","name":"smoke.assert_json_field_eq_v1","params":[{"name":"json","ty":"bytes_view"},{"name":"field","ty":"bytes"},{"name":"want","ty":"bytes"}],"result":"result_i32"},{"body":["begin",["let","empty",["bytes.alloc",0]],["let","out",["app.main",["bytes.view","empty"]]],["try",["smoke.assert_json_field_eq_v1",["bytes.view","out"],["bytes.lit","ok"],["bytes.lit","1"]]],["try",["smoke.assert_json_field_eq_v1",["bytes.view","out"],["bytes.lit","mode"],["bytes.lit","2"]]],["try",["smoke.assert_json_field_eq_v1",["bytes.view","out"],["bytes.lit","payload_ok"],["bytes.lit","1"]]],["std.test.pass"]],"kind":"defn","name":"smoke.test_replay_report_v1","params":[],"result":"result_i32"},{"body":["begin",["let","out",["server.main",["bytes.alloc",0]]],["try",["std.test.assert_bytes_eq","out",["bytes.lit","PONG\n"],["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"smoke.test_server_payload_v1","params":[],"result":"result_i32"}],"imports":["app","server","std.json","std.test","std.vec"],"kind":"module","module_id":"smoke","schema_version":"x07.x07ast@0.4.0"}
