{"decls":[{"kind":"export","names":["ext.base64.base64_decode","ext.base64.base64_encode","ext.base64.base64_err_code","ext.base64.base64_get_bytes","ext.base64.base64_is_err"]},{"body":["begin",["if",["<u","n",26],["return",["+",65,"n"]],0],["if",["<u","n",52],["return",["+",97,["-","n",26]]],0],["if",["<u","n",62],["return",["+",48,["-","n",52]]],0],["if",["=","n",62],["return",43],0],47],"kind":"defn","name":"ext.base64._b64_char","params":[{"name":"n","ty":"i32"}],"result":"i32"},{"body":["begin",["if",[">=u","c",65],["if",["<u","c",91],["return",["-","c",65]],0],0],["if",[">=u","c",97],["if",["<u","c",123],["return",["+",["-","c",97],26]],0],0],["if",[">=u","c",48],["if",["<u","c",58],["return",["+",["-","c",48],52]],0],0],["if",["=","c",43],["return",62],0],["if",["=","c",47],["return",63],0],["-",0,1]],"kind":"defn","name":"ext.base64._b64_val","params":[{"name":"c","ty":"i32"}],"result":"i32"},{"body":["begin",["let","out",["vec_u8.with_capacity",9]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le","code"]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",0]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.base64._make_err","params":[{"name":"code","ty":"i32"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","s"]],["if",["=",["=",["%","n",4],0],0],["return",["ext.base64._make_err",1]],0],["if",["=","n",0],["begin",["let","out",["vec_u8.with_capacity",1]],["set","out",["vec_u8.push","out",1]],["return",["vec_u8.into_bytes","out"]]],0],["let","pad",0],["if",["=",["view.get_u8","s",["-","n",1]],61],["begin",["set","pad",1],["if",["=",["view.get_u8","s",["-","n",2]],61],["set","pad",2],0]],0],["let","out_len",["-",["*",["/","n",4],3],"pad"]],["let","out",["vec_u8.with_capacity",["+",1,"out_len"]]],["set","out",["vec_u8.push","out",1]],["let","groups",["/","n",4]],["let","off",0],["for","_",0,"groups",["if",["<u",["+","off",3],"n"],["begin",["let","c0",["view.get_u8","s","off"]],["let","c1",["view.get_u8","s",["+","off",1]]],["let","c2",["view.get_u8","s",["+","off",2]]],["let","c3",["view.get_u8","s",["+","off",3]]],["let","is_last",["=","off",["-","n",4]]],["if",["=","c2",61],["begin",["if",["=","is_last",0],["return",["ext.base64._make_err",3]],0],["if",["=",["=","c3",61],0],["return",["ext.base64._make_err",3]],0],["let","v0",["ext.base64._b64_val","c0"]],["let","v1",["ext.base64._b64_val","c1"]],["if",["if",["<","v0",0],1,["<","v1",0]],["return",["ext.base64._make_err",2]],0],["if",["=",["=",["&","v1",15],0],0],["return",["ext.base64._make_err",3]],0],["set","out",["vec_u8.push","out",["&",["|",["<<u","v0",2],[">>u","v1",4]],255]]]],["if",["=","c3",61],["begin",["if",["=","is_last",0],["return",["ext.base64._make_err",3]],0],["let","v0",["ext.base64._b64_val","c0"]],["let","v1",["ext.base64._b64_val","c1"]],["let","v2",["ext.base64._b64_val","c2"]],["if",["if",["if",["<","v0",0],1,["<","v1",0]],1,["<","v2",0]],["return",["ext.base64._make_err",2]],0],["if",["=",["=",["&","v2",3],0],0],["return",["ext.base64._make_err",3]],0],["set","out",["vec_u8.push","out",["&",["|",["<<u","v0",2],[">>u","v1",4]],255]]],["set","out",["vec_u8.push","out",["&",["|",["<<u",["&","v1",15],4],[">>u","v2",2]],255]]]],["begin",["let","v0",["ext.base64._b64_val","c0"]],["let","v1",["ext.base64._b64_val","c1"]],["let","v2",["ext.base64._b64_val","c2"]],["let","v3",["ext.base64._b64_val","c3"]],["if",["if",["if",["if",["<","v0",0],1,["<","v1",0]],1,["<","v2",0]],1,["<","v3",0]],["return",["ext.base64._make_err",2]],0],["set","out",["vec_u8.push","out",["&",["|",["<<u","v0",2],[">>u","v1",4]],255]]],["set","out",["vec_u8.push","out",["&",["|",["<<u",["&","v1",15],4],[">>u","v2",2]],255]]],["set","out",["vec_u8.push","out",["&",["|",["<<u",["&","v2",3],6],"v3"],255]]]]]],["set","off",["+","off",4]]],0]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.base64.base64_decode","params":[{"name":"s","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","b"]],["let","out_len",["*",["/",["+","n",2],3],4]],["let","out",["vec_u8.with_capacity","out_len"]],["let","i",0],["for","_",0,"n",["if",["<u","i","n"],["begin",["let","rem",["-","n","i"]],["if",[">=","rem",3],["begin",["let","b0",["view.get_u8","b","i"]],["let","b1",["view.get_u8","b",["+","i",1]]],["let","b2",["view.get_u8","b",["+","i",2]]],["let","c0",["&",[">>u","b0",2],63]],["let","c1",["&",["|",["<<u",["&","b0",3],4],["&",[">>u","b1",4],15]],63]],["let","c2",["&",["|",["<<u",["&","b1",15],2],["&",[">>u","b2",6],3]],63]],["let","c3",["&","b2",63]],["set","out",["vec_u8.push","out",["ext.base64._b64_char","c0"]]],["set","out",["vec_u8.push","out",["ext.base64._b64_char","c1"]]],["set","out",["vec_u8.push","out",["ext.base64._b64_char","c2"]]],["set","out",["vec_u8.push","out",["ext.base64._b64_char","c3"]]],["set","i",["+","i",3]]],["if",["=","rem",2],["begin",["let","b0",["view.get_u8","b","i"]],["let","b1",["view.get_u8","b",["+","i",1]]],["let","c0",["&",[">>u","b0",2],63]],["let","c1",["&",["|",["<<u",["&","b0",3],4],["&",[">>u","b1",4],15]],63]],["let","c2",["&",["<<u",["&","b1",15],2],63]],["set","out",["vec_u8.push","out",["ext.base64._b64_char","c0"]]],["set","out",["vec_u8.push","out",["ext.base64._b64_char","c1"]]],["set","out",["vec_u8.push","out",["ext.base64._b64_char","c2"]]],["set","out",["vec_u8.push","out",61]],["set","i","n"]],["begin",["let","b0",["view.get_u8","b","i"]],["let","c0",["&",[">>u","b0",2],63]],["let","c1",["&",["<<u",["&","b0",3],4],63]],["set","out",["vec_u8.push","out",["ext.base64._b64_char","c0"]]],["set","out",["vec_u8.push","out",["ext.base64._b64_char","c1"]]],["set","out",["vec_u8.push","out",61]],["set","out",["vec_u8.push","out",61]],["set","i","n"]]]]],0]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.base64.base64_encode","params":[{"name":"b","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["if",["<",["view.len","doc"],5],["return",0],0],["if",["=",["=",["view.get_u8","doc",0],0],0],["return",0],0],["codec.read_u32_le","doc",1]],"kind":"defn","name":"ext.base64.base64_err_code","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","n",["view.len","doc"]],["if",["<","n",1],["return",["bytes.alloc",0]],0],["if",["=",["=",["view.get_u8","doc",0],1],0],["return",["bytes.alloc",0]],0],["view.to_bytes",["view.slice","doc",1,["-","n",1]]]],"kind":"defn","name":"ext.base64.base64_get_bytes","params":[{"name":"doc","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["if",["<",["view.len","doc"],1],["return",1],0],["=",["view.get_u8","doc",0],0]],"kind":"defn","name":"ext.base64.base64_is_err","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"}],"imports":[],"kind":"module","meta":{"generated_by":"x07import","source_path":"tests/x07import/fixtures/import_sources/rust/ext_base64@0.1.0/base64.rs","source_sha256":"f36f072f4f6f389671d0671d403c0ae31d111f6d09188a0d61323af567659874"},"module_id":"ext.base64","schema_version":"x07.x07ast@0.3.0"}
