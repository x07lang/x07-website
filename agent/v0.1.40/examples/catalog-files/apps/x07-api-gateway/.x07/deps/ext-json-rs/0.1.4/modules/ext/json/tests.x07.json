{"decls":[{"kind":"export","names":["ext.json.tests.test_canon_number_formats","ext.json.tests.test_canon_object_sort","ext.json.tests.test_canon_rejects_invalid_escape","ext.json.tests.test_canon_string_escapes","ext.json.tests.test_data_model_empty_array","ext.json.tests.test_data_model_empty_object","ext.json.tests.test_data_model_nested_empty_values","ext.json.tests.test_pointer_array","ext.json.tests.test_pointer_nested","ext.json.tests.test_pointer_object","ext.json.tests.test_pointer_string"]},{"body":["begin",["let","json",["bytes.lit","{\"b\":1e+2,\"a\":-0.5}"]],["let","canon",["ext.json.canon.canonicalize",["bytes.view","json"]]],["try",["std.test.assert_bytes_eq","canon",["bytes.lit","{\"a\":-0.5,\"b\":1e+2}"],["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.json.tests.test_canon_number_formats","params":[],"result":"result_i32"},{"body":["begin",["let","v",["vec_u8.with_capacity",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","{"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","\"b\""]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",58]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","1"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",44]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","\"a\""]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",58]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","2"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","}"]]],["let","json",["vec_u8.into_bytes","v"]],["let","canon",["ext.json.canon.canonicalize",["bytes.view","json"]]],["try",["std.test.assert_bytes_eq","canon",["bytes.lit","{\"a\":2,\"b\":1}"],["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.json.tests.test_canon_object_sort","params":[],"result":"result_i32"},{"body":["begin",["let","json",["bytes.lit","{\"x\":\"\\q\"}"]],["let","canon",["ext.json.canon.canonicalize",["bytes.view","json"]]],["let","n",["bytes.len","canon"]],["try",["std.test.assert_i32_eq","n",0,["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.json.tests.test_canon_rejects_invalid_escape","params":[],"result":"result_i32"},{"body":["begin",["let","json",["bytes.lit","{\"b\":\"\\\\u0041\",\"a\":\"line\\\\n\"}"]],["let","canon",["ext.json.canon.canonicalize",["bytes.view","json"]]],["try",["std.test.assert_bytes_eq","canon",["bytes.lit","{\"a\":\"line\\\\n\",\"b\":\"\\\\u0041\"}"],["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.json.tests.test_canon_string_escapes","params":[],"result":"result_i32"},{"body":["begin",["let","json",["bytes.lit","[]"]],["let","doc",["ext.json.data_model.parse",["bytes.view","json"]]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","root_off",["ext.data_model.root_offset","docv"]],["try",["std.test.assert_true",[">=","root_off",0],["std.test.code_assert_true"]]],["try",["std.test.assert_i32_eq",["ext.data_model.kind_at","docv","root_off"],4,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.data_model.seq_len","docv","root_off"],0,["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.json.tests.test_data_model_empty_array","params":[],"result":"result_i32"},{"body":["begin",["let","json",["bytes.lit","{}"]],["let","doc",["ext.json.data_model.parse",["bytes.view","json"]]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","root_off",["ext.data_model.root_offset","docv"]],["try",["std.test.assert_true",[">=","root_off",0],["std.test.code_assert_true"]]],["try",["std.test.assert_i32_eq",["ext.data_model.kind_at","docv","root_off"],5,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.data_model.map_len","docv","root_off"],0,["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.json.tests.test_data_model_empty_object","params":[],"result":"result_i32"},{"body":["begin",["let","json",["bytes.lit","[{},[]]"]],["let","doc",["ext.json.data_model.parse",["bytes.view","json"]]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","root_off",["ext.data_model.root_offset","docv"]],["try",["std.test.assert_true",[">=","root_off",0],["std.test.code_assert_true"]]],["try",["std.test.assert_i32_eq",["ext.data_model.kind_at","docv","root_off"],4,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.data_model.seq_len","docv","root_off"],2,["std.test.code_assert_i32_eq"]]],["let","a_off",["ext.data_model.seq_get","docv","root_off",0]],["let","b_off",["ext.data_model.seq_get","docv","root_off",1]],["try",["std.test.assert_true",[">=","a_off",0],["std.test.code_assert_true"]]],["try",["std.test.assert_true",[">=","b_off",0],["std.test.code_assert_true"]]],["try",["std.test.assert_i32_eq",["ext.data_model.kind_at","docv","a_off"],5,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.data_model.map_len","docv","a_off"],0,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.data_model.kind_at","docv","b_off"],4,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.data_model.seq_len","docv","b_off"],0,["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.json.tests.test_data_model_nested_empty_values","params":[],"result":"result_i32"},{"body":["begin",["let","json",["bytes.lit","[\"a\",\"b\",\"c\"]"]],["let","json_view",["bytes.view","json"]],["let","ptr",["bytes.lit","/1"]],["let","ptr_view",["bytes.view","ptr"]],["let","got",["ext.json.pointer.pointer_get_string","json_view","ptr_view"]],["try",["std.test.assert_bytes_eq","got",["bytes.lit","b"],["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.json.tests.test_pointer_array","params":[],"result":"result_i32"},{"body":["begin",["let","json",["bytes.lit","{\"data\":{\"items\":[{\"id\":1},{\"id\":2}]}}"]],["let","json_view",["bytes.view","json"]],["let","ptr",["bytes.lit","/data/items/1/id"]],["let","ptr_view",["bytes.view","ptr"]],["let","got",["ext.json.pointer.pointer_get","json_view","ptr_view"]],["try",["std.test.assert_bytes_eq","got",["bytes.lit","2"],["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.json.tests.test_pointer_nested","params":[],"result":"result_i32"},{"body":["begin",["let","json",["bytes.lit","{\"name\":\"test\",\"value\":42}"]],["let","json_view",["bytes.view","json"]],["let","ptr",["bytes.lit","/name"]],["let","ptr_view",["bytes.view","ptr"]],["let","exists",["ext.json.pointer.pointer_exists","json_view","ptr_view"]],["try",["std.test.assert_i32_eq","exists",1,["std.test.code_assert_i32_eq"]]],["let","name",["ext.json.pointer.pointer_get_string","json_view","ptr_view"]],["try",["std.test.assert_bytes_eq","name",["bytes.lit","test"],["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.json.tests.test_pointer_object","params":[],"result":"result_i32"},{"body":["begin",["let","json",["bytes.lit","{\"msg\":\"hello\\nworld\"}"]],["let","json_view",["bytes.view","json"]],["let","ptr",["bytes.lit","/msg"]],["let","ptr_view",["bytes.view","ptr"]],["let","msg",["ext.json.pointer.pointer_get_string","json_view","ptr_view"]],["let","v",["vec_u8.with_capacity",11]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","hello"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","world"]]],["let","expected",["vec_u8.into_bytes","v"]],["try",["std.test.assert_bytes_eq","msg","expected",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.json.tests.test_pointer_string","params":[],"result":"result_i32"}],"imports":["ext.data_model","ext.json.canon","ext.json.data_model","ext.json.pointer","std.test"],"kind":"module","module_id":"ext.json.tests","schema_version":"x07.x07ast@0.3.0"}
