{"decls":[{"kind":"export","names":["ext.pb.tests.test_schema_descriptor_set_basic","ext.pb.tests.test_wire_decode_err_output_limit","ext.pb.tests.test_wire_decode_err_truncated","ext.pb.tests.test_wire_decode_ok","ext.pb.tests.test_wire_encode_err_malformed_doc","ext.pb.tests.test_wire_encode_err_output_limit","ext.pb.tests.test_wire_encode_roundtrip","ext.pb.tests.test_data_model_emit_v1_roundtrip","ext.pb.tests.test_data_model_emit_schema_v2_roundtrip","ext.pb.tests.test_data_model_emit_schema_v2_err_message_not_found"]},{"body":["begin",["let","out",["vec_u8.with_capacity",38]],["set","out",["vec_u8.push","out",10]],["set","out",["vec_u8.push","out",36]],["set","out",["vec_u8.push","out",10]],["set","out",["vec_u8.push","out",10]],["set","out",["vec_u8.push","out",116]],["set","out",["vec_u8.push","out",101]],["set","out",["vec_u8.push","out",115]],["set","out",["vec_u8.push","out",116]],["set","out",["vec_u8.push","out",46]],["set","out",["vec_u8.push","out",112]],["set","out",["vec_u8.push","out",114]],["set","out",["vec_u8.push","out",111]],["set","out",["vec_u8.push","out",116]],["set","out",["vec_u8.push","out",111]],["set","out",["vec_u8.push","out",18]],["set","out",["vec_u8.push","out",3]],["set","out",["vec_u8.push","out",102]],["set","out",["vec_u8.push","out",111]],["set","out",["vec_u8.push","out",111]],["set","out",["vec_u8.push","out",34]],["set","out",["vec_u8.push","out",17]],["set","out",["vec_u8.push","out",10]],["set","out",["vec_u8.push","out",3]],["set","out",["vec_u8.push","out",66]],["set","out",["vec_u8.push","out",97]],["set","out",["vec_u8.push","out",114]],["set","out",["vec_u8.push","out",18]],["set","out",["vec_u8.push","out",10]],["set","out",["vec_u8.push","out",10]],["set","out",["vec_u8.push","out",2]],["set","out",["vec_u8.push","out",105]],["set","out",["vec_u8.push","out",100]],["set","out",["vec_u8.push","out",24]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.push","out",32]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.push","out",40]],["set","out",["vec_u8.push","out",5]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.pb.tests._desc_set_one_msg","params":[],"result":"bytes"},{"body":["begin",["let","out",["vec_u8.with_capacity",27]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",2]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",1]]],["set","out",["vec_u8.push","out",0]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",2]]],["set","out",["vec_u8.push","out",150]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",2]]],["set","out",["vec_u8.push","out",2]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",2]]],["set","out",["vec_u8.push","out",104]],["set","out",["vec_u8.push","out",105]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.pb.tests._expected_decode_two_fields","params":[],"result":"bytes"},{"body":["begin",["let","out",["vec_u8.with_capacity",37]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",1]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",7]]],["set","out",["vec_u8.push","out",102]],["set","out",["vec_u8.push","out",111]],["set","out",["vec_u8.push","out",111]],["set","out",["vec_u8.push","out",46]],["set","out",["vec_u8.push","out",66]],["set","out",["vec_u8.push","out",97]],["set","out",["vec_u8.push","out",114]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",1]]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",1]]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.push","out",5]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",2]]],["set","out",["vec_u8.push","out",105]],["set","out",["vec_u8.push","out",100]],["set","out",["vec_u8.extend_bytes","out",["codec.write_u32_le",0]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.pb.tests._expected_schema_one_msg","params":[],"result":"bytes"},{"body":["begin",["let","out",["vec_u8.with_capacity",7]],["set","out",["vec_u8.push","out",8]],["set","out",["vec_u8.push","out",150]],["set","out",["vec_u8.push","out",1]],["set","out",["vec_u8.push","out",18]],["set","out",["vec_u8.push","out",2]],["set","out",["vec_u8.push","out",104]],["set","out",["vec_u8.push","out",105]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.pb.tests._msg_two_fields","params":[],"result":"bytes"},{"body":["begin",["let","desc",["ext.pb.tests._desc_set_one_msg"]],["let","doc",["ext.pb.wire.descriptor_set_to_schema_v1",["bytes.view","desc"],1024]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.pb.wire.is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","expected",["ext.pb.tests._expected_schema_one_msg"]],["try",["std.test.assert_view_eq","docv",["bytes.view","expected"],["std.test.code_assert_view_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.pb.tests.test_schema_descriptor_set_basic","params":[],"result":"result_i32"},{"body":["begin",["let","msg",["ext.pb.tests._msg_two_fields"]],["let","doc",["ext.pb.wire.decode_v1",["bytes.view","msg"],25]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.pb.wire.is_err","docv"],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.pb.wire.err_code","docv"],4,["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.pb.tests.test_wire_decode_err_output_limit","params":[],"result":"result_i32"},{"body":["begin",["let","out",["vec_u8.with_capacity",2]],["set","out",["vec_u8.push","out",8]],["set","out",["vec_u8.push","out",150]],["let","msg",["vec_u8.into_bytes","out"]],["let","doc",["ext.pb.wire.decode_v1",["bytes.view","msg"],1024]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.pb.wire.is_err","docv"],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.pb.wire.err_code","docv"],1,["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.pb.tests.test_wire_decode_err_truncated","params":[],"result":"result_i32"},{"body":["begin",["let","msg",["ext.pb.tests._msg_two_fields"]],["let","doc",["ext.pb.wire.decode_v1",["bytes.view","msg"],1024]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.pb.wire.is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","expected",["ext.pb.tests._expected_decode_two_fields"]],["try",["std.test.assert_view_eq","docv",["bytes.view","expected"],["std.test.code_assert_view_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.pb.tests.test_wire_decode_ok","params":[],"result":"result_i32"},{"body":["begin",["let","doc",["bytes.alloc",0]],["let","enc",["ext.pb.wire.encode_v1",["bytes.view","doc"],1024]],["let","encv",["bytes.view","enc"]],["try",["std.test.assert_i32_eq",["ext.pb.wire.is_err","encv"],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.pb.wire.err_code","encv"],1,["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.pb.tests.test_wire_encode_err_malformed_doc","params":[],"result":"result_i32"},{"body":["begin",["let","msg",["ext.pb.tests._msg_two_fields"]],["let","doc",["ext.pb.wire.decode_v1",["bytes.view","msg"],1024]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.pb.wire.is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","enc",["ext.pb.wire.encode_v1","docv",6]],["let","encv",["bytes.view","enc"]],["try",["std.test.assert_i32_eq",["ext.pb.wire.is_err","encv"],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.pb.wire.err_code","encv"],2,["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.pb.tests.test_wire_encode_err_output_limit","params":[],"result":"result_i32"},{"body":["begin",["let","msg",["ext.pb.tests._msg_two_fields"]],["let","doc",["ext.pb.wire.decode_v1",["bytes.view","msg"],1024]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.pb.wire.is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","enc",["ext.pb.wire.encode_v1","docv",1024]],["let","encv",["bytes.view","enc"]],["try",["std.test.assert_i32_eq",["ext.pb.wire.is_err","encv"],0,["std.test.code_assert_i32_eq"]]],["let","enc_n",["view.len","encv"]],["try",["std.test.assert_i32_eq",[">=u","enc_n",2],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["view.get_u8","encv",0],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_view_eq",["view.slice","encv",1,["-","enc_n",1]],["bytes.view","msg"],["std.test.code_assert_view_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.pb.tests.test_wire_encode_roundtrip","params":[],"result":"result_i32"},{"kind":"defn","name":"ext.pb.tests.test_data_model_emit_v1_roundtrip","params":[],"result":"result_i32","body":["begin",["let","msg",["ext.pb.tests._msg_two_fields"]],["let","occ",["ext.pb.data_model.decode_v1",["bytes.view","msg"],1024]],["let","occv",["bytes.view","occ"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","occv"],0,["std.test.code_assert_i32_eq"]]],["let","enc",["ext.pb.data_model.emit_v1","occv"]],["let","encv",["bytes.view","enc"]],["try",["std.test.assert_i32_eq",["ext.pb.data_model.is_err","encv"],0,["std.test.code_assert_i32_eq"]]],["let","got",["ext.pb.data_model.get_bytes","encv"]],["try",["std.test.assert_view_eq",["bytes.view","got"],["bytes.view","msg"],["std.test.code_assert_view_eq"]]],["std.test.pass"]]},{"kind":"defn","name":"ext.pb.tests.test_data_model_emit_schema_v2_roundtrip","params":[],"result":"result_i32","body":["begin",["let","desc",["ext.pb.tests._desc_set_one_msg"]],["let","schema",["ext.pb.wire.descriptor_set_to_schema_v1",["bytes.view","desc"],1024]],["let","schemav",["bytes.view","schema"]],["try",["std.test.assert_i32_eq",["ext.pb.wire.is_err","schemav"],0,["std.test.code_assert_i32_eq"]]],["let","name",["bytes.lit","foo.Bar"]],["let","msg",["ext.pb.tests._msg_two_fields"]],["let","occ",["ext.pb.data_model.decode_schema_v2",["bytes.view","msg"],"schemav",["bytes.view","name"],1024]],["let","occv",["bytes.view","occ"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","occv"],0,["std.test.code_assert_i32_eq"]]],["let","enc",["ext.pb.data_model.emit_schema_v2","occv","schemav",["bytes.view","name"]]],["let","encv",["bytes.view","enc"]],["try",["std.test.assert_i32_eq",["ext.pb.data_model.is_err","encv"],0,["std.test.code_assert_i32_eq"]]],["let","got",["ext.pb.data_model.get_bytes","encv"]],["try",["std.test.assert_view_eq",["bytes.view","got"],["bytes.view","msg"],["std.test.code_assert_view_eq"]]],["std.test.pass"]]},{"kind":"defn","name":"ext.pb.tests.test_data_model_emit_schema_v2_err_message_not_found","params":[],"result":"result_i32","body":["begin",["let","desc",["ext.pb.tests._desc_set_one_msg"]],["let","schema",["ext.pb.wire.descriptor_set_to_schema_v1",["bytes.view","desc"],1024]],["let","schemav",["bytes.view","schema"]],["try",["std.test.assert_i32_eq",["ext.pb.wire.is_err","schemav"],0,["std.test.code_assert_i32_eq"]]],["let","name_ok",["bytes.lit","foo.Bar"]],["let","msg",["ext.pb.tests._msg_two_fields"]],["let","occ",["ext.pb.data_model.decode_schema_v2",["bytes.view","msg"],"schemav",["bytes.view","name_ok"],1024]],["let","occv",["bytes.view","occ"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","occv"],0,["std.test.code_assert_i32_eq"]]],["let","name_bad",["bytes.lit","foo.NOPE"]],["let","res",["ext.pb.data_model.emit_schema_v2","occv","schemav",["bytes.view","name_bad"]]],["let","resv",["bytes.view","res"]],["try",["std.test.assert_i32_eq",["ext.pb.data_model.is_err","resv"],1,["std.test.code_assert_i32_eq"]]],["let","msg_got",["ext.data_model.doc_error_msg","resv"]],["let","expected",["bytes.lit","pb:schema:message_not_found"]],["try",["std.test.assert_bytes_eq","msg_got","expected",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]]}],"imports":["ext.data_model","ext.pb.data_model","ext.pb.wire","std.test"],"kind":"module","module_id":"ext.pb.tests","schema_version":"x07.x07ast@0.3.0"}
