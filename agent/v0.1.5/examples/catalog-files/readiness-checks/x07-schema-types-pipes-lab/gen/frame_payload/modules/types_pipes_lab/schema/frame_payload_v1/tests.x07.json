{"decls":[{"kind":"export","names":["types_pipes_lab.schema.frame_payload_v1.tests.test_negative_v1","types_pipes_lab.schema.frame_payload_v1.tests.test_vectors_v1"]},{"body":["begin",["let","v_id_b",["bytes.lit","1"]],["let","v_id",["ext.data_model.value_number",["bytes.view","v_id_b"]]],["let","v_event_b",["bytes.lit","tick"]],["let","v_event",["ext.data_model.value_string",["bytes.view","v_event_b"]]],["let","v_value_b",["bytes.lit","-7"]],["let","v_value",["ext.data_model.value_number",["bytes.view","v_value_b"]]],["let","m",["vec_u8.with_capacity",0]],["set","m",["vec_u8.push","m",5]],["set","m",["vec_u8.extend_bytes","m",["codec.write_u32_le",3]]],["set","m",["vec_u8.extend_bytes","m",["codec.write_u32_le",5]]],["set","m",["vec_u8.extend_bytes","m",["bytes.lit","event"]]],["set","m",["vec_u8.extend_bytes","m","v_event"]],["set","m",["vec_u8.extend_bytes","m",["codec.write_u32_le",2]]],["set","m",["vec_u8.extend_bytes","m",["bytes.lit","id"]]],["set","m",["vec_u8.extend_bytes","m","v_id"]],["set","m",["vec_u8.extend_bytes","m",["codec.write_u32_le",5]]],["set","m",["vec_u8.extend_bytes","m",["bytes.lit","value"]]],["set","m",["vec_u8.extend_bytes","m","v_value"]],["let","map_b",["vec_u8.into_bytes","m"]],["result_bytes.ok",["ext.data_model.doc_ok",["bytes.view","map_b"]]]],"kind":"defn","name":"types_pipes_lab.schema.frame_payload_v1.tests._golden_ex0_doc_v1","params":[],"result":"result_bytes"},{"body":["begin",["let","b_id",["bytes.lit","0"]],["let","b_event",["bytes.lit","a"]],["let","b_value",["bytes.lit","0"]],["let","doc0",["try",["types_pipes_lab.schema.frame_payload_v1.encode_doc_v1",["bytes.view","b_id"],["bytes.view","b_event"],["bytes.view","b_value"]]]],["let","bad0",["bytes.set_u8","doc0",0,0]],["let","r0",["types_pipes_lab.schema.frame_payload_v1.validate_doc_v1",["bytes.view","bad0"]]],["try",["std.test.assert_i32_eq",["result_i32.err_code","r0"],["types_pipes_lab.schema.frame_payload_v1.code_doc_invalid_v1"],["std.test.code_assert_i32_eq"]]],["let","doc1",["try",["types_pipes_lab.schema.frame_payload_v1.encode_doc_v1",["bytes.view","b_id"],["bytes.view","b_event"],["bytes.view","b_value"]]]],["let","bad1",["bytes.set_u8","doc1",1,4]],["let","r1",["types_pipes_lab.schema.frame_payload_v1.validate_doc_v1",["bytes.view","bad1"]]],["try",["std.test.assert_i32_eq",["result_i32.err_code","r1"],["types_pipes_lab.schema.frame_payload_v1.code_root_kind_v1"],["std.test.code_assert_i32_eq"]]],["let","v_null",["ext.data_model.value_null"]],["let","m_bad_order",["vec_u8.with_capacity",0]],["set","m_bad_order",["vec_u8.push","m_bad_order",5]],["set","m_bad_order",["vec_u8.extend_bytes","m_bad_order",["codec.write_u32_le",2]]],["set","m_bad_order",["vec_u8.extend_bytes","m_bad_order",["codec.write_u32_le",2]]],["set","m_bad_order",["vec_u8.extend_bytes","m_bad_order",["bytes.lit","id"]]],["set","m_bad_order",["vec_u8.extend_bytes","m_bad_order","v_null"]],["set","m_bad_order",["vec_u8.extend_bytes","m_bad_order",["codec.write_u32_le",5]]],["set","m_bad_order",["vec_u8.extend_bytes","m_bad_order",["bytes.lit","event"]]],["set","m_bad_order",["vec_u8.extend_bytes","m_bad_order","v_null"]],["let","m_bad_order_b",["vec_u8.into_bytes","m_bad_order"]],["let","doc_bad_order",["ext.data_model.doc_ok",["bytes.view","m_bad_order_b"]]],["let","r_bad_order",["types_pipes_lab.schema.frame_payload_v1.validate_doc_v1",["bytes.view","doc_bad_order"]]],["try",["std.test.assert_i32_eq",["result_i32.err_code","r_bad_order"],["types_pipes_lab.schema.frame_payload_v1.code_noncanonical_map_v1"],["std.test.code_assert_i32_eq"]]],["let","m_dup_key",["vec_u8.with_capacity",0]],["set","m_dup_key",["vec_u8.push","m_dup_key",5]],["set","m_dup_key",["vec_u8.extend_bytes","m_dup_key",["codec.write_u32_le",2]]],["set","m_dup_key",["vec_u8.extend_bytes","m_dup_key",["codec.write_u32_le",5]]],["set","m_dup_key",["vec_u8.extend_bytes","m_dup_key",["bytes.lit","event"]]],["set","m_dup_key",["vec_u8.extend_bytes","m_dup_key","v_null"]],["set","m_dup_key",["vec_u8.extend_bytes","m_dup_key",["codec.write_u32_le",5]]],["set","m_dup_key",["vec_u8.extend_bytes","m_dup_key",["bytes.lit","event"]]],["set","m_dup_key",["vec_u8.extend_bytes","m_dup_key","v_null"]],["let","m_dup_key_b",["vec_u8.into_bytes","m_dup_key"]],["let","doc_dup_key",["ext.data_model.doc_ok",["bytes.view","m_dup_key_b"]]],["let","r_dup_key",["types_pipes_lab.schema.frame_payload_v1.validate_doc_v1",["bytes.view","doc_dup_key"]]],["try",["std.test.assert_i32_eq",["result_i32.err_code","r_dup_key"],["types_pipes_lab.schema.frame_payload_v1.code_dup_field_v1"],["std.test.code_assert_i32_eq"]]],["let","v_id_badnum_id_ex0_b",["bytes.lit","00042"]],["let","v_id_badnum_id_ex0",["ext.data_model.value_number",["bytes.view","v_id_badnum_id_ex0_b"]]],["let","v_event_badnum_id_ex0_b",["bytes.lit","tick"]],["let","v_event_badnum_id_ex0",["ext.data_model.value_string",["bytes.view","v_event_badnum_id_ex0_b"]]],["let","v_value_badnum_id_ex0_b",["bytes.lit","-7"]],["let","v_value_badnum_id_ex0",["ext.data_model.value_number",["bytes.view","v_value_badnum_id_ex0_b"]]],["let","m_badnum_id_ex0",["vec_u8.with_capacity",0]],["set","m_badnum_id_ex0",["vec_u8.push","m_badnum_id_ex0",5]],["set","m_badnum_id_ex0",["vec_u8.extend_bytes","m_badnum_id_ex0",["codec.write_u32_le",3]]],["set","m_badnum_id_ex0",["vec_u8.extend_bytes","m_badnum_id_ex0",["codec.write_u32_le",5]]],["set","m_badnum_id_ex0",["vec_u8.extend_bytes","m_badnum_id_ex0",["bytes.lit","event"]]],["set","m_badnum_id_ex0",["vec_u8.extend_bytes","m_badnum_id_ex0","v_event_badnum_id_ex0"]],["set","m_badnum_id_ex0",["vec_u8.extend_bytes","m_badnum_id_ex0",["codec.write_u32_le",2]]],["set","m_badnum_id_ex0",["vec_u8.extend_bytes","m_badnum_id_ex0",["bytes.lit","id"]]],["set","m_badnum_id_ex0",["vec_u8.extend_bytes","m_badnum_id_ex0","v_id_badnum_id_ex0"]],["set","m_badnum_id_ex0",["vec_u8.extend_bytes","m_badnum_id_ex0",["codec.write_u32_le",5]]],["set","m_badnum_id_ex0",["vec_u8.extend_bytes","m_badnum_id_ex0",["bytes.lit","value"]]],["set","m_badnum_id_ex0",["vec_u8.extend_bytes","m_badnum_id_ex0","v_value_badnum_id_ex0"]],["let","map_b_badnum_id_ex0",["vec_u8.into_bytes","m_badnum_id_ex0"]],["let","doc_badnum_id_ex0",["ext.data_model.doc_ok",["bytes.view","map_b_badnum_id_ex0"]]],["let","r_badnum_id_ex0",["types_pipes_lab.schema.frame_payload_v1.validate_doc_v1",["bytes.view","doc_badnum_id_ex0"]]],["try",["std.test.assert_i32_eq",["result_i32.err_code","r_badnum_id_ex0"],["types_pipes_lab.schema.frame_payload_v1.code_noncanonical_number_id_v1"],["std.test.code_assert_i32_eq"]]],["let","b_id_badnum_id_ex0",["bytes.lit","00042"]],["let","b_event_badnum_id_ex0",["bytes.lit","tick"]],["let","b_value_badnum_id_ex0",["bytes.lit","-7"]],["let","enc_badnum_id_ex0",["types_pipes_lab.schema.frame_payload_v1.encode_doc_v1",["bytes.view","b_id_badnum_id_ex0"],["bytes.view","b_event_badnum_id_ex0"],["bytes.view","b_value_badnum_id_ex0"]]],["try",["std.test.assert_i32_eq",["result_bytes.err_code","enc_badnum_id_ex0"],["types_pipes_lab.schema.frame_payload_v1.code_noncanonical_number_id_v1"],["std.test.code_assert_i32_eq"]]],["let","v_id_badnum_value_ex0_b",["bytes.lit","1"]],["let","v_id_badnum_value_ex0",["ext.data_model.value_number",["bytes.view","v_id_badnum_value_ex0_b"]]],["let","v_event_badnum_value_ex0_b",["bytes.lit","tick"]],["let","v_event_badnum_value_ex0",["ext.data_model.value_string",["bytes.view","v_event_badnum_value_ex0_b"]]],["let","v_value_badnum_value_ex0_b",["bytes.lit","-0"]],["let","v_value_badnum_value_ex0",["ext.data_model.value_number",["bytes.view","v_value_badnum_value_ex0_b"]]],["let","m_badnum_value_ex0",["vec_u8.with_capacity",0]],["set","m_badnum_value_ex0",["vec_u8.push","m_badnum_value_ex0",5]],["set","m_badnum_value_ex0",["vec_u8.extend_bytes","m_badnum_value_ex0",["codec.write_u32_le",3]]],["set","m_badnum_value_ex0",["vec_u8.extend_bytes","m_badnum_value_ex0",["codec.write_u32_le",5]]],["set","m_badnum_value_ex0",["vec_u8.extend_bytes","m_badnum_value_ex0",["bytes.lit","event"]]],["set","m_badnum_value_ex0",["vec_u8.extend_bytes","m_badnum_value_ex0","v_event_badnum_value_ex0"]],["set","m_badnum_value_ex0",["vec_u8.extend_bytes","m_badnum_value_ex0",["codec.write_u32_le",2]]],["set","m_badnum_value_ex0",["vec_u8.extend_bytes","m_badnum_value_ex0",["bytes.lit","id"]]],["set","m_badnum_value_ex0",["vec_u8.extend_bytes","m_badnum_value_ex0","v_id_badnum_value_ex0"]],["set","m_badnum_value_ex0",["vec_u8.extend_bytes","m_badnum_value_ex0",["codec.write_u32_le",5]]],["set","m_badnum_value_ex0",["vec_u8.extend_bytes","m_badnum_value_ex0",["bytes.lit","value"]]],["set","m_badnum_value_ex0",["vec_u8.extend_bytes","m_badnum_value_ex0","v_value_badnum_value_ex0"]],["let","map_b_badnum_value_ex0",["vec_u8.into_bytes","m_badnum_value_ex0"]],["let","doc_badnum_value_ex0",["ext.data_model.doc_ok",["bytes.view","map_b_badnum_value_ex0"]]],["let","r_badnum_value_ex0",["types_pipes_lab.schema.frame_payload_v1.validate_doc_v1",["bytes.view","doc_badnum_value_ex0"]]],["try",["std.test.assert_i32_eq",["result_i32.err_code","r_badnum_value_ex0"],["types_pipes_lab.schema.frame_payload_v1.code_noncanonical_number_value_v1"],["std.test.code_assert_i32_eq"]]],["let","b_id_badnum_value_ex0",["bytes.lit","1"]],["let","b_event_badnum_value_ex0",["bytes.lit","tick"]],["let","b_value_badnum_value_ex0",["bytes.lit","-0"]],["let","enc_badnum_value_ex0",["types_pipes_lab.schema.frame_payload_v1.encode_doc_v1",["bytes.view","b_id_badnum_value_ex0"],["bytes.view","b_event_badnum_value_ex0"],["bytes.view","b_value_badnum_value_ex0"]]],["try",["std.test.assert_i32_eq",["result_bytes.err_code","enc_badnum_value_ex0"],["types_pipes_lab.schema.frame_payload_v1.code_noncanonical_number_value_v1"],["std.test.code_assert_i32_eq"]]],["let","too_long_b",["bytes.alloc",["+",10,1]]],["let","enc_res",["types_pipes_lab.schema.frame_payload_v1.encode_doc_v1",["bytes.view","too_long_b"],["bytes.view","b_event"],["bytes.view","b_value"]]],["try",["std.test.assert_i32_eq",["result_bytes.err_code","enc_res"],["types_pipes_lab.schema.frame_payload_v1.code_too_long_id_v1"],["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"types_pipes_lab.schema.frame_payload_v1.tests.test_negative_v1","params":[],"result":"result_i32"},{"body":["begin",["let","b_id_ex0",["bytes.lit","1"]],["let","b_event_ex0",["bytes.lit","tick"]],["let","b_value_ex0",["bytes.lit","-7"]],["let","doc_ex0",["try",["types_pipes_lab.schema.frame_payload_v1.encode_doc_v1",["bytes.view","b_id_ex0"],["bytes.view","b_event_ex0"],["bytes.view","b_value_ex0"]]]],["let","expected_ex0",["try",["types_pipes_lab.schema.frame_payload_v1.tests._golden_ex0_doc_v1"]]],["try",["std.test.assert_view_eq",["bytes.view","doc_ex0"],["bytes.view","expected_ex0"],["std.test.code_assert_view_eq"]]],["let","docv_ex0",["bytes.view","doc_ex0"]],["let","docv_typed_ex0",["try",["types_pipes_lab.schema.frame_payload_v1.cast_doc_view_v1","docv_ex0"]]],["let","vr_ex0",["types_pipes_lab.schema.frame_payload_v1.validate_doc_v1","docv_ex0"]],["try",["std.test.assert_true",["result_i32.is_ok","vr_ex0"],["std.test.code_assert_true"]]],["let","got_id_ex0",["types_pipes_lab.schema.frame_payload_v1.get_id_view_v1","docv_typed_ex0"]],["try",["std.test.assert_view_eq","got_id_ex0",["bytes.view","b_id_ex0"],["std.test.code_assert_view_eq"]]],["let","got_event_ex0",["types_pipes_lab.schema.frame_payload_v1.get_event_view_v1","docv_typed_ex0"]],["try",["std.test.assert_view_eq","got_event_ex0",["bytes.view","b_event_ex0"],["std.test.code_assert_view_eq"]]],["let","got_value_ex0",["types_pipes_lab.schema.frame_payload_v1.get_value_view_v1","docv_typed_ex0"]],["try",["std.test.assert_view_eq","got_value_ex0",["bytes.view","b_value_ex0"],["std.test.code_assert_view_eq"]]],["try",["types_pipes_lab.schema.frame_payload_v1.tests.test_negative_v1"]],["std.test.pass"]],"kind":"defn","name":"types_pipes_lab.schema.frame_payload_v1.tests.test_vectors_v1","params":[],"result":"result_i32"}],"imports":["ext.data_model","std.test","types_pipes_lab.schema.frame_payload_v1"],"kind":"module","module_id":"types_pipes_lab.schema.frame_payload_v1.tests","schema_version":"x07.x07ast@0.4.0"}
