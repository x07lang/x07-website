{"decls":[{"kind":"export","names":["gen.sm.lifecycle_v1.init_v1","gen.sm.lifecycle_v1.step_v1"]},{"body":["begin",["let","n",["view.len","action_out"]],["if",["<u","n",8],["return",["result_bytes.err",4]],0],["let","ctx_len",["codec.read_u32_le","action_out",0]],["let","ctx_off",4],["let","cmds_off",["+","ctx_off","ctx_len"]],["if",["<u","n",["+","cmds_off",4]],["return",["result_bytes.err",4]],0],["let","ctx",["view.slice","action_out","ctx_off","ctx_len"]],["let","cmds",["view.slice","action_out","cmds_off",["-","n","cmds_off"]]],["let","cmds_n",["view.len","cmds"]],["if",["<u","cmds_n",4],["return",["result_bytes.err",4]],0],["let","cmds_count",["codec.read_u32_le","cmds",0]],["let","pos",4],["for","i",0,"cmds_count",["begin",["if",[">=u",["+","pos",4],["+","cmds_n",1]],["return",["result_bytes.err",4]],0],["let","cmd_len",["codec.read_u32_le","cmds","pos"]],0,["set","pos",["+","pos",4]],["if",[">=u",["+","pos","cmd_len"],["+","cmds_n",1]],["return",["result_bytes.err",4]],0],["set","pos",["+","pos","cmd_len"]],0]],["if",["!=","pos","cmds_n"],["return",["result_bytes.err",4]],0],["let","cap",["+",8,["+","ctx_len","cmds_n"]]],["let","out",["vec_u8.with_capacity","cap"]],["let","b_state",["codec.write_u32_le","to_state"]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","b_state"]]],["let","b_ctx_len",["codec.write_u32_le","ctx_len"]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","b_ctx_len"]]],["set","out",["vec_u8.extend_bytes","out","ctx"]],["set","out",["vec_u8.extend_bytes","out","cmds"]],["return",["result_bytes.ok",["vec_u8.into_bytes","out"]]]],"kind":"defn","name":"gen.sm.lifecycle_v1._pack_step_result_v1","params":[{"name":"to_state","ty":"i32"},{"name":"action_out","ty":"bytes_view"}],"result":"result_bytes"},{"body":["begin",["let","out",["vec_u8.with_capacity",8]],["let","b0",["codec.write_u32_le",0]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","b0"]]],["let","b1",["codec.write_u32_le",0]],["set","out",["vec_u8.extend_bytes","out",["bytes.view","b1"]]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"gen.sm.lifecycle_v1.init_v1","params":[],"result":"bytes"},{"body":["begin",["let","snap_n",["view.len","snapshot"]],["if",["<u","snap_n",8],["return",["result_bytes.err",1]],0],["let","state_id",["codec.read_u32_le","snapshot",0]],["let","ctx_len",["codec.read_u32_le","snapshot",4]],["if",["<u","snap_n",["+",8,"ctx_len"]],["return",["result_bytes.err",1]],0],["let","ctx",["view.slice","snapshot",8,"ctx_len"]],["let","event_n",["view.len","event"]],["if",["<u","event_n",8],["return",["result_bytes.err",2]],0],["let","event_id",["codec.read_u32_le","event",0]],["let","payload_len",["codec.read_u32_le","event",4]],["if",["<u","event_n",["+",8,"payload_len"]],["return",["result_bytes.err",2]],0],["if",["=","state_id",0],["if",["=","event_id",0],["begin",["let","a_res",["actions.noop_v1","ctx","event"]],["let","a_out",["try","a_res"]],["gen.sm.lifecycle_v1._pack_step_result_v1",1,["bytes.view","a_out"]]],["if",["=","event_id",3],["begin",["let","a_res",["actions.noop_v1","ctx","event"]],["let","a_out",["try","a_res"]],["gen.sm.lifecycle_v1._pack_step_result_v1",4,["bytes.view","a_out"]]],["result_bytes.err",3]]],["if",["=","state_id",1],["if",["=","event_id",1],["begin",["let","a_res",["actions.noop_v1","ctx","event"]],["let","a_out",["try","a_res"]],["gen.sm.lifecycle_v1._pack_step_result_v1",2,["bytes.view","a_out"]]],["if",["=","event_id",3],["begin",["let","a_res",["actions.noop_v1","ctx","event"]],["let","a_out",["try","a_res"]],["gen.sm.lifecycle_v1._pack_step_result_v1",4,["bytes.view","a_out"]]],["result_bytes.err",3]]],["if",["=","state_id",2],["if",["=","event_id",2],["begin",["let","a_res",["actions.noop_v1","ctx","event"]],["let","a_out",["try","a_res"]],["gen.sm.lifecycle_v1._pack_step_result_v1",3,["bytes.view","a_out"]]],["if",["=","event_id",3],["begin",["let","a_res",["actions.noop_v1","ctx","event"]],["let","a_out",["try","a_res"]],["gen.sm.lifecycle_v1._pack_step_result_v1",4,["bytes.view","a_out"]]],["result_bytes.err",3]]],["result_bytes.err",3]]]]],"kind":"defn","name":"gen.sm.lifecycle_v1.step_v1","params":[{"name":"snapshot","ty":"bytes_view"},{"name":"event","ty":"bytes_view"}],"result":"result_bytes"}],"imports":["actions"],"kind":"module","meta":{"source_contract_jcs_sha256_hex":"f6d8c3e755d1669a366ffd250f8cd56881cec4fd05e6ec555f07183ddd4b1a7e","source_contract_path":"arch/sm/specs/lifecycle.sm.json"},"module_id":"gen.sm.lifecycle_v1","schema_version":"x07.x07ast@0.4.0"}
