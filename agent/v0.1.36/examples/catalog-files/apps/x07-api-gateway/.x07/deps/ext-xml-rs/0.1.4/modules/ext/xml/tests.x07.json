{"decls":[{"kind":"export","names":["ext.xml.tests.test_doctype_is_err","ext.xml.tests.test_entity_decode","ext.xml.tests.test_error_doc_layout","ext.xml.tests.test_events_basic","ext.xml.tests.test_mismatched_end_is_err","ext.xml.tests.test_tree_basic","ext.xml.tests.test_tree_nested"]},{"body":["if",["<",["view.len","doc"],5],0,["ext.xml.tests._read_u32_le","doc",1]],"kind":"defn","name":"ext.xml.tests._err_code","params":[{"name":"doc","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["let","b0",["view.get_u8","b","off"]],["let","b1",["view.get_u8","b",["+","off",1]]],["let","b2",["view.get_u8","b",["+","off",2]]],["let","b3",["view.get_u8","b",["+","off",3]]],["+",["+",["+","b0",["<<u","b1",8]],["<<u","b2",16]],["<<u","b3",24]]],"kind":"defn","name":"ext.xml.tests._read_u32_le","params":[{"name":"b","ty":"bytes_view"},{"name":"off","ty":"i32"}],"result":"i32"},{"body":["begin",["let","v",["vec_u8.with_capacity",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","<!DOCTYPE"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","r><r/>"]]],["let","src",["vec_u8.into_bytes","v"]],["let","doc",["ext.xml.xml_tree_parse",["bytes.view","src"]]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.xml.xml_tree_is_err","docv"],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.xml.tests._err_code","docv"],5,["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.xml.tests.test_doctype_is_err","params":[],"result":"result_i32"},{"body":["begin",["let","v1",["vec_u8.with_capacity",64]],["set","v1",["vec_u8.extend_bytes","v1",["bytes.lit","<r>Tom"]]],["set","v1",["vec_u8.push","v1",32]],["set","v1",["vec_u8.extend_bytes","v1",["bytes.lit","&amp;"]]],["set","v1",["vec_u8.push","v1",32]],["set","v1",["vec_u8.extend_bytes","v1",["bytes.lit","Jerry"]]],["set","v1",["vec_u8.push","v1",32]],["set","v1",["vec_u8.extend_bytes","v1",["bytes.lit","&lt;3</r>"]]],["let","src1",["vec_u8.into_bytes","v1"]],["let","doc1",["ext.xml.xml_tree_parse",["bytes.view","src1"]]],["let","doc1v",["bytes.view","doc1"]],["try",["std.test.assert_i32_eq",["ext.xml.xml_tree_is_err","doc1v"],0,["std.test.code_assert_i32_eq"]]],["let","r1",["ext.xml.xml_tree_root","doc1v"]],["let","t1",["ext.xml.xml_tree_child_at","doc1v","r1",0]],["let","exp",["vec_u8.with_capacity",32]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","Tom"]]],["set","exp",["vec_u8.push","exp",32]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","&"]]],["set","exp",["vec_u8.push","exp",32]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","Jerry"]]],["set","exp",["vec_u8.push","exp",32]],["set","exp",["vec_u8.extend_bytes","exp",["bytes.lit","<3"]]],["let","expected",["vec_u8.into_bytes","exp"]],["try",["std.test.assert_bytes_eq",["ext.xml.xml_tree_node_text","doc1v","t1"],"expected",["std.test.code_assert_bytes_eq"]]],["let","v",["vec_u8.with_capacity",64]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","<r"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","a="]]],["set","v",["vec_u8.push","v",34]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","x&amp;y"]]],["set","v",["vec_u8.push","v",34]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","/>"]]],["let","src2",["vec_u8.into_bytes","v"]],["let","doc2",["ext.xml.xml_tree_parse",["bytes.view","src2"]]],["let","doc2v",["bytes.view","doc2"]],["try",["std.test.assert_i32_eq",["ext.xml.xml_tree_is_err","doc2v"],0,["std.test.code_assert_i32_eq"]]],["let","r2",["ext.xml.xml_tree_root","doc2v"]],["try",["std.test.assert_bytes_eq",["ext.xml.xml_tree_attr_value","doc2v","r2",0],["bytes.lit","x&y"],["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.xml.tests.test_entity_decode","params":[],"result":"result_i32"},{"body":["begin",["let","v",["vec_u8.with_capacity",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","<!DOCTYPE"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","r><r/>"]]],["let","src",["vec_u8.into_bytes","v"]],["let","doc",["ext.xml.xml_tree_parse",["bytes.view","src"]]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.xml.xml_tree_is_err","docv"],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.xml.tests._err_code","docv"],5,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["view.len","docv"],9,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.xml.tests._read_u32_le","docv",5],0,["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.xml.tests.test_error_doc_layout","params":[],"result":"result_i32"},{"body":["begin",["let","v",["vec_u8.with_capacity",64]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","<root"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","a="]]],["set","v",["vec_u8.push","v",34]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","1"]]],["set","v",["vec_u8.push","v",34]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit",">hi</root>"]]],["let","src",["vec_u8.into_bytes","v"]],["let","doc",["ext.xml.xml_events_parse",["bytes.view","src"]]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.xml.xml_events_is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.xml.xml_events_len","docv"],3,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.xml.xml_events_kind","docv",0],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.xml.xml_events_name","docv",0],["bytes.lit","root"],["std.test.code_assert_bytes_eq"]]],["try",["std.test.assert_i32_eq",["ext.xml.xml_events_attr_count","docv",0],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.xml.xml_events_attr_key","docv",0,0],["bytes.lit","a"],["std.test.code_assert_bytes_eq"]]],["try",["std.test.assert_bytes_eq",["ext.xml.xml_events_attr_value","docv",0,0],["bytes.lit","1"],["std.test.code_assert_bytes_eq"]]],["try",["std.test.assert_i32_eq",["ext.xml.xml_events_kind","docv",1],3,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.xml.xml_events_text","docv",1],["bytes.lit","hi"],["std.test.code_assert_bytes_eq"]]],["try",["std.test.assert_i32_eq",["ext.xml.xml_events_kind","docv",2],2,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.xml.xml_events_name","docv",2],["bytes.lit","root"],["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.xml.tests.test_events_basic","params":[],"result":"result_i32"},{"body":["begin",["let","src",["bytes.lit","<a></b>"]],["let","doc",["ext.xml.xml_tree_parse",["bytes.view","src"]]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.xml.xml_tree_is_err","docv"],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.xml.tests._err_code","docv"],3,["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.xml.tests.test_mismatched_end_is_err","params":[],"result":"result_i32"},{"body":["begin",["let","v",["vec_u8.with_capacity",64]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","<root"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","a="]]],["set","v",["vec_u8.push","v",34]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","1"]]],["set","v",["vec_u8.push","v",34]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit",">hi</root>"]]],["let","src",["vec_u8.into_bytes","v"]],["let","doc",["ext.xml.xml_tree_parse",["bytes.view","src"]]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.xml.xml_tree_is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","root",["ext.xml.xml_tree_root","docv"]],["try",["std.test.assert_true",[">=","root",0],["std.test.code_assert_true"]]],["try",["std.test.assert_i32_eq",["ext.xml.xml_tree_node_kind","docv","root"],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.xml.xml_tree_node_name","docv","root"],["bytes.lit","root"],["std.test.code_assert_bytes_eq"]]],["try",["std.test.assert_i32_eq",["ext.xml.xml_tree_attr_count","docv","root"],1,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.xml.xml_tree_attr_key","docv","root",0],["bytes.lit","a"],["std.test.code_assert_bytes_eq"]]],["try",["std.test.assert_bytes_eq",["ext.xml.xml_tree_attr_value","docv","root",0],["bytes.lit","1"],["std.test.code_assert_bytes_eq"]]],["try",["std.test.assert_i32_eq",["ext.xml.xml_tree_child_count","docv","root"],1,["std.test.code_assert_i32_eq"]]],["let","c0",["ext.xml.xml_tree_child_at","docv","root",0]],["try",["std.test.assert_i32_eq",["ext.xml.xml_tree_node_kind","docv","c0"],2,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.xml.xml_tree_node_text","docv","c0"],["bytes.lit","hi"],["std.test.code_assert_bytes_eq"]]],["try",["std.test.assert_i32_eq",["ext.xml.xml_tree_node_parent","docv","c0"],"root",["std.test.code_assert_i32_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.xml.tests.test_tree_basic","params":[],"result":"result_i32"},{"body":["begin",["let","src",["bytes.lit","<a><b/><c>t</c></a>"]],["let","doc",["ext.xml.xml_tree_parse",["bytes.view","src"]]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.xml.xml_tree_is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","root",["ext.xml.xml_tree_root","docv"]],["try",["std.test.assert_bytes_eq",["ext.xml.xml_tree_node_name","docv","root"],["bytes.lit","a"],["std.test.code_assert_bytes_eq"]]],["try",["std.test.assert_i32_eq",["ext.xml.xml_tree_child_count","docv","root"],2,["std.test.code_assert_i32_eq"]]],["let","b",["ext.xml.xml_tree_child_at","docv","root",0]],["let","c",["ext.xml.xml_tree_child_at","docv","root",1]],["try",["std.test.assert_bytes_eq",["ext.xml.xml_tree_node_name","docv","b"],["bytes.lit","b"],["std.test.code_assert_bytes_eq"]]],["try",["std.test.assert_i32_eq",["ext.xml.xml_tree_child_count","docv","b"],0,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_bytes_eq",["ext.xml.xml_tree_node_name","docv","c"],["bytes.lit","c"],["std.test.code_assert_bytes_eq"]]],["try",["std.test.assert_i32_eq",["ext.xml.xml_tree_child_count","docv","c"],1,["std.test.code_assert_i32_eq"]]],["let","t",["ext.xml.xml_tree_child_at","docv","c",0]],["try",["std.test.assert_bytes_eq",["ext.xml.xml_tree_node_text","docv","t"],["bytes.lit","t"],["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.xml.tests.test_tree_nested","params":[],"result":"result_i32"}],"imports":["ext.xml","std.test"],"kind":"module","module_id":"ext.xml.tests","schema_version":"x07.x07ast@0.3.0"}
