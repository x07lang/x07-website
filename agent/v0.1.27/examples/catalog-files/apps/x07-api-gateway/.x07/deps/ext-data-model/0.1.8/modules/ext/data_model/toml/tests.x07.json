{"decls":[{"kind":"export","names":["ext.data_model.toml.tests.test_emit_canon_invalid_key","ext.data_model.toml.tests.test_emit_canon_sections_exact_and_roundtrip","ext.data_model.toml.tests.test_emit_canon_string_escapes","ext.data_model.toml.tests.test_emit_canon_unsupported_kind"]},{"body":["begin",["let","v",["vec_u8.with_capacity",160]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","a"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",61]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","2"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","b"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",61]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","1"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","s"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",61]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","\"hi\""]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","[sec]"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","x"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",61]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","3"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","y"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",61]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","false"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","[sec.sub]"]]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","z"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",61]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","\"ok\""]]],["set","v",["vec_u8.push","v",10]],["vec_u8.into_bytes","v"]],"kind":"defn","name":"ext.data_model.toml.tests._build_expected_sections","params":[],"result":"bytes"},{"body":["begin",["let","v",["vec_u8.with_capacity",48]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","s"]]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",61]],["set","v",["vec_u8.push","v",32]],["set","v",["vec_u8.push","v",34]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","hi"]]],["set","v",["vec_u8.push","v",92]],["set","v",["vec_u8.push","v",110]],["set","v",["vec_u8.push","v",92]],["set","v",["vec_u8.push","v",116]],["set","v",["vec_u8.push","v",92]],["set","v",["vec_u8.push","v",34]],["set","v",["vec_u8.push","v",92]],["set","v",["vec_u8.push","v",92]],["set","v",["vec_u8.extend_bytes","v",["bytes.lit","ok"]]],["set","v",["vec_u8.push","v",34]],["set","v",["vec_u8.push","v",10]],["vec_u8.into_bytes","v"]],"kind":"defn","name":"ext.data_model.toml.tests._build_expected_string_escapes","params":[],"result":"bytes"},{"body":["begin",["let","json",["bytes.lit","{\"bad@key\":1}"]],["let","doc",["ext.json.data_model.parse","json"]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","emit",["ext.data_model.toml.emit_canon","docv"]],["let","emitv",["bytes.view","emit"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","emitv"],1,["std.test.code_assert_i32_eq"]]],["let","msg",["ext.data_model.doc_error_msg","emitv"]],["let","expected",["bytes.lit","data_model.toml:invalid_key"]],["try",["std.test.assert_bytes_eq","msg","expected",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.data_model.toml.tests.test_emit_canon_invalid_key","params":[],"result":"result_i32"},{"body":["begin",["let","json",["bytes.lit","{\"b\":1,\"a\":2,\"s\":\"hi\",\"sec.y\":false,\"sec.x\":3,\"sec.sub.z\":\"ok\"}"]],["let","doc",["ext.json.data_model.parse","json"]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","emit",["ext.data_model.toml.emit_canon","docv"]],["let","emitv",["bytes.view","emit"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","emitv"],0,["std.test.code_assert_i32_eq"]]],["let","payload_v",["view.slice","emitv",1,["-",["view.len","emitv"],1]]],["let","payload",["view.to_bytes","payload_v"]],["let","expected",["ext.data_model.toml.tests._build_expected_sections"]],["try",["std.test.assert_bytes_eq","payload","expected",["std.test.code_assert_bytes_eq"]]],["let","parsed",["ext.toml.data_model.parse","payload_v"]],["let","parsedv",["bytes.view","parsed"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","parsedv"],0,["std.test.code_assert_i32_eq"]]],["let","canon1",["ext.data_model.json.emit_canon","docv"]],["let","canon2",["ext.data_model.json.emit_canon","parsedv"]],["try",["std.test.assert_bytes_eq","canon2","canon1",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.data_model.toml.tests.test_emit_canon_sections_exact_and_roundtrip","params":[],"result":"result_i32"},{"body":["begin",["let","svec",["vec_u8.with_capacity",8]],["set","svec",["vec_u8.push","svec",104]],["set","svec",["vec_u8.push","svec",105]],["set","svec",["vec_u8.push","svec",10]],["set","svec",["vec_u8.push","svec",9]],["set","svec",["vec_u8.push","svec",34]],["set","svec",["vec_u8.push","svec",92]],["set","svec",["vec_u8.push","svec",111]],["set","svec",["vec_u8.push","svec",107]],["let","sbytes",["vec_u8.into_bytes","svec"]],["let","val",["ext.data_model.value_string",["bytes.view","sbytes"]]],["let","entries",["vec_u8.with_capacity",32]],["set","entries",["vec_u8.extend_bytes","entries",["codec.write_u32_le",1]]],["set","entries",["vec_u8.extend_bytes","entries",["codec.write_u32_le",1]]],["set","entries",["vec_u8.push","entries",115]],["set","entries",["vec_u8.extend_bytes","entries",["codec.write_u32_le",["bytes.len","val"]]]],["set","entries",["vec_u8.extend_bytes","entries","val"]],["let","entries_b",["vec_u8.into_bytes","entries"]],["let","map_val",["ext.data_model.value_map_from_entries",["bytes.view","entries_b"]]],["try",["std.test.assert_true",[">",["bytes.len","map_val"],0],["std.test.code_assert_true"]]],["let","doc",["ext.data_model.doc_ok",["bytes.view","map_val"]]],["let","emit",["ext.data_model.toml.emit_canon",["bytes.view","doc"]]],["let","emitv",["bytes.view","emit"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","emitv"],0,["std.test.code_assert_i32_eq"]]],["let","payload_v",["view.slice","emitv",1,["-",["view.len","emitv"],1]]],["let","payload",["view.to_bytes","payload_v"]],["let","expected",["ext.data_model.toml.tests._build_expected_string_escapes"]],["try",["std.test.assert_bytes_eq","payload","expected",["std.test.code_assert_bytes_eq"]]],["let","parsed",["ext.toml.data_model.parse","payload_v"]],["let","parsedv",["bytes.view","parsed"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","parsedv"],0,["std.test.code_assert_i32_eq"]]],["let","_x07_tmp_borrow_decls_5_body_32_2_3",["bytes.lit","s"]],["let","got",["ext.data_model.map_find","parsedv",1,["bytes.view","_x07_tmp_borrow_decls_5_body_32_2_3"]]],["try",["std.test.assert_true",[">=","got",0],["std.test.code_assert_true"]]],["let","back",["ext.data_model.string_get","parsedv","got"]],["try",["std.test.assert_bytes_eq","back","sbytes",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.data_model.toml.tests.test_emit_canon_string_escapes","params":[],"result":"result_i32"},{"body":["begin",["let","json",["bytes.lit","{\"a\":{\"b\":1}}"]],["let","doc",["ext.json.data_model.parse","json"]],["let","docv",["bytes.view","doc"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","docv"],0,["std.test.code_assert_i32_eq"]]],["let","emit",["ext.data_model.toml.emit_canon","docv"]],["let","emitv",["bytes.view","emit"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","emitv"],1,["std.test.code_assert_i32_eq"]]],["let","msg",["ext.data_model.doc_error_msg","emitv"]],["let","expected",["bytes.lit","data_model.toml:unsupported_kind"]],["try",["std.test.assert_bytes_eq","msg","expected",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.data_model.toml.tests.test_emit_canon_unsupported_kind","params":[],"result":"result_i32"}],"imports":["ext.data_model","ext.data_model.json","ext.data_model.toml","ext.json.data_model","ext.toml.data_model","std.test"],"kind":"module","module_id":"ext.data_model.toml.tests","schema_version":"x07.x07ast@0.3.0"}
