{"decls":[{"kind":"export","names":["app.gateway.upstream.rr.fetch_upstream_rr_v1","app.gateway.upstream.rr.health_check_rr_v1"]},{"body":["begin",["let","health_path",["bytes.lit","/api/health"]],["if",["std.bytes.eq","path",["bytes.view","health_path"]],["app.gateway.upstream.rr.health_check_rr_v1"],["begin",["let","h",["std.rr.current_v1"]],["if",["<=","h",0],["return",["result_bytes.err",6001]],0],["let","kind",["bytes.lit","http"]],["let","op",["bytes.lit","std.net.http.client.get_v1"]],["let","key",["bytes.lit","https://example.com/"]],["let","next",["std.rr.next_v1","h",["bytes.view","kind"],["bytes.view","op"],["bytes.view","key"]]],["if",["=",["result_bytes.is_ok","next"],0],["return",["result_bytes.err",6002]],0],["let","entry",["result_bytes.unwrap_or","next",["bytes.alloc",0]]],["let","resp",["std.rr.entry_resp_v1",["bytes.view","entry"]]],["result_bytes.ok","resp"]]]]],"kind":"defn","name":"app.gateway.upstream.rr.fetch_upstream_rr_v1","params":[{"name":"method","ty":"bytes_view"},{"name":"path","ty":"bytes_view"},{"name":"body","ty":"bytes_view"}],"result":"result_bytes"},{"body":["begin",["let","ok",["bytes.lit","ok"]],["let","resp",["app.gateway.core.shape_response_v1",200,["bytes.view","ok"]]],["result_bytes.ok","resp"]],"kind":"defn","name":"app.gateway.upstream.rr.health_check_rr_v1","params":[],"result":"result_bytes"}],"imports":["app.gateway.core","std.bytes","std.rr"],"kind":"module","module_id":"app.gateway.upstream.rr","schema_version":"x07.x07ast@0.5.0"}
