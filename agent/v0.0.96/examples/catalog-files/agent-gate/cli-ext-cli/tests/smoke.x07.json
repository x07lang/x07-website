{"decls":[{"kind":"export","names":["smoke.cli_ext_cli"]},{"body":["begin",["let","n",["view.len","t"]],["let","n_b",["std.codec.write_u32_le","n"]],["set","v",["std.vec.extend_bytes","v",["bytes.view","n_b"]]],["set","v",["std.vec.extend_bytes","v","t"]],"v"],"kind":"defn","name":"smoke._argv_push","params":[{"name":"v","ty":"vec_u8"},{"name":"t","ty":"bytes_view"}],"result":"vec_u8"},{"body":["begin",["let","url",["bytes.lit","https://example.invalid/"]],["let","depth",["bytes.lit","3"]],["let","out_path",["bytes.lit","out/results.txt"]],["let","t_tool",["bytes.lit","tool"]],["let","t_url",["bytes.lit","--url"]],["let","t_depth",["bytes.lit","--depth"]],["let","t_out",["bytes.lit","--out"]],["let","argv_v",["std.vec.with_capacity",256]],["let","argc_b",["std.codec.write_u32_le",7]],["set","argv_v",["std.vec.extend_bytes","argv_v",["bytes.view","argc_b"]]],["set","argv_v",["smoke._argv_push","argv_v",["bytes.view","t_tool"]]],["set","argv_v",["smoke._argv_push","argv_v",["bytes.view","t_url"]]],["set","argv_v",["smoke._argv_push","argv_v",["bytes.view","url"]]],["set","argv_v",["smoke._argv_push","argv_v",["bytes.view","t_depth"]]],["set","argv_v",["smoke._argv_push","argv_v",["bytes.view","depth"]]],["set","argv_v",["smoke._argv_push","argv_v",["bytes.view","t_out"]]],["set","argv_v",["smoke._argv_push","argv_v",["bytes.view","out_path"]]],["let","argv",["std.vec.as_bytes","argv_v"]],["let","got",["app.solve",["bytes.view","argv"]]],["let","p_url",["bytes.lit","url="]],["let","p_depth",["bytes.lit","depth="]],["let","p_out",["bytes.lit","out="]],["let","exp_v",["std.vec.with_capacity",128]],["set","exp_v",["std.vec.extend_bytes","exp_v",["bytes.view","p_url"]]],["set","exp_v",["std.vec.extend_bytes","exp_v",["bytes.view","url"]]],["set","exp_v",["std.vec.push","exp_v",10]],["set","exp_v",["std.vec.extend_bytes","exp_v",["bytes.view","p_depth"]]],["set","exp_v",["std.vec.extend_bytes","exp_v",["bytes.view","depth"]]],["set","exp_v",["std.vec.push","exp_v",10]],["set","exp_v",["std.vec.extend_bytes","exp_v",["bytes.view","p_out"]]],["set","exp_v",["std.vec.extend_bytes","exp_v",["bytes.view","out_path"]]],["set","exp_v",["std.vec.push","exp_v",10]],["let","expected",["std.vec.as_bytes","exp_v"]],["try",["std.test.assert_bytes_eq","got","expected",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"smoke.cli_ext_cli","params":[],"result":"result_i32"}],"imports":["app","std.codec","std.test","std.vec"],"kind":"module","module_id":"smoke","schema_version":"x07.x07ast@0.3.0"}
