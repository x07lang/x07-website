{"decls":[{"kind":"export","names":["ext.data_model.json.tests.test_emit_canon_invalid_utf8","ext.data_model.json.tests.test_emit_canon_map_sorts_keys","ext.data_model.json.tests.test_emit_canon_string_roundtrip"]},{"body":["begin",["let","b",["bytes.alloc",2]],["set","b",["bytes.set_u8","b",0,192]],["set","b",["bytes.set_u8","b",1,128]],["let","val",["ext.data_model.value_string",["bytes.view","b"]]],["let","doc",["ext.data_model.doc_ok",["bytes.view","val"]]],["let","emit",["ext.data_model.json.emit_canon",["bytes.view","doc"]]],["let","emitv",["bytes.view","emit"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","emitv"],1,["std.test.code_assert_i32_eq"]]],["let","msg",["ext.data_model.doc_error_msg","emitv"]],["let","expected",["bytes.lit","data_model.json:invalid_utf8"]],["try",["std.test.assert_bytes_eq","msg","expected",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.data_model.json.tests.test_emit_canon_invalid_utf8","params":[],"result":"result_i32"},{"body":["begin",["let","kb",["bytes.lit","b"]],["let","ka",["bytes.lit","a"]],["let","n1",["bytes.lit","1"]],["let","n2",["bytes.lit","2"]],["let","v1",["ext.data_model.value_number",["bytes.view","n1"]]],["let","v2",["ext.data_model.value_number",["bytes.view","n2"]]],["let","m",["vec_u8.with_capacity",64]],["set","m",["vec_u8.push","m",5]],["set","m",["vec_u8.extend_bytes","m",["codec.write_u32_le",2]]],["set","m",["vec_u8.extend_bytes","m",["codec.write_u32_le",["bytes.len","kb"]]]],["set","m",["vec_u8.extend_bytes","m","kb"]],["set","m",["vec_u8.extend_bytes","m","v1"]],["set","m",["vec_u8.extend_bytes","m",["codec.write_u32_le",["bytes.len","ka"]]]],["set","m",["vec_u8.extend_bytes","m","ka"]],["set","m",["vec_u8.extend_bytes","m","v2"]],["let","map_val",["vec_u8.into_bytes","m"]],["let","doc",["ext.data_model.doc_ok",["bytes.view","map_val"]]],["let","emit",["ext.data_model.json.emit_canon",["bytes.view","doc"]]],["let","emitv",["bytes.view","emit"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","emitv"],0,["std.test.code_assert_i32_eq"]]],["let","jsonv",["view.slice","emitv",1,["-",["view.len","emitv"],1]]],["let","json",["view.to_bytes","jsonv"]],["let","expected",["bytes.lit","{\"a\":2,\"b\":1}"]],["try",["std.test.assert_bytes_eq","json","expected",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.data_model.json.tests.test_emit_canon_map_sorts_keys","params":[],"result":"result_i32"},{"body":["begin",["let","v",["vec_u8.with_capacity",8]],["set","v",["vec_u8.push","v",34]],["set","v",["vec_u8.push","v",92]],["set","v",["vec_u8.push","v",10]],["set","v",["vec_u8.push","v",9]],["set","v",["vec_u8.push","v",1]],["let","s",["vec_u8.into_bytes","v"]],["let","val",["ext.data_model.value_string",["bytes.view","s"]]],["let","doc",["ext.data_model.doc_ok",["bytes.view","val"]]],["let","emit",["ext.data_model.json.emit_canon",["bytes.view","doc"]]],["let","emitv",["bytes.view","emit"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","emitv"],0,["std.test.code_assert_i32_eq"]]],["let","jsonv",["view.slice","emitv",1,["-",["view.len","emitv"],1]]],["let","parsed",["ext.json.data_model.parse","jsonv"]],["let","parsedv",["bytes.view","parsed"]],["try",["std.test.assert_i32_eq",["ext.data_model.doc_is_err","parsedv"],0,["std.test.code_assert_i32_eq"]]],["try",["std.test.assert_i32_eq",["ext.data_model.root_kind","parsedv"],3,["std.test.code_assert_i32_eq"]]],["let","got",["ext.data_model.string_get","parsedv",1]],["try",["std.test.assert_bytes_eq","got","s",["std.test.code_assert_bytes_eq"]]],["std.test.pass"]],"kind":"defn","name":"ext.data_model.json.tests.test_emit_canon_string_roundtrip","params":[],"result":"result_i32"}],"imports":["ext.data_model","ext.data_model.json","ext.json.data_model","std.test"],"kind":"module","module_id":"ext.data_model.json.tests","schema_version":"x07.x07ast@0.3.0"}
