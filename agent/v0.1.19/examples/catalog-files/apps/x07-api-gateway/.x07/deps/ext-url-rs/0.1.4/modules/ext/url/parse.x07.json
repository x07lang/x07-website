{"decls":[{"kind":"export","names":["ext.url.parse.url_fragment","ext.url.parse.url_host","ext.url.parse.url_parse","ext.url.parse.url_path","ext.url.parse.url_port","ext.url.parse.url_query","ext.url.parse.url_scheme"]},{"body":["begin",["let","n",["view.len","b"]],["for","i","query_or_path_start","n",["if",["=",["view.get_u8","b","i"],35],["return",["+","i",1]],0]],"n"],"kind":"defn","name":"ext.url.parse._find_frag_start","params":[{"name":"b","ty":"bytes_view"},{"name":"query_or_path_start","ty":"i32"}],"result":"i32"},{"body":["begin",["let","host_end","authority_start"],["for","i","authority_start","path_start",["begin",["let","c",["view.get_u8","b","i"]],["if",["=","c",58],["return","i"],0],["set","host_end",["+","i",1]]]],"host_end"],"kind":"defn","name":"ext.url.parse._find_host_end_and_port","params":[{"name":"b","ty":"bytes_view"},{"name":"authority_start","ty":"i32"},{"name":"path_start","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["view.len","b"]],["if",["<u","query_start","n"],["return",["-","query_start",1]],0],["if",["<u","frag_start","n"],["return",["-","frag_start",1]],0],"n"],"kind":"defn","name":"ext.url.parse._find_path_end","params":[{"name":"b","ty":"bytes_view"},{"name":"path_start","ty":"i32"},{"name":"query_start","ty":"i32"},{"name":"frag_start","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["view.len","b"]],["for","i","authority_start","n",["begin",["let","c",["view.get_u8","b","i"]],["if",["if",["if",["=","c",47],1,["=","c",63]],1,["=","c",35]],["return","i"],0]]],"n"],"kind":"defn","name":"ext.url.parse._find_path_start","params":[{"name":"b","ty":"bytes_view"},{"name":"authority_start","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["view.len","b"]],["for","i","path_start","n",["begin",["let","c",["view.get_u8","b","i"]],["if",["=","c",63],["return",["+","i",1]],0],["if",["=","c",35],["return","n"],0]]],"n"],"kind":"defn","name":"ext.url.parse._find_query_start","params":[{"name":"b","ty":"bytes_view"},{"name":"path_start","ty":"i32"}],"result":"i32"},{"body":["begin",["let","n",["view.len","b"]],["let","scheme_end",0],["let","found_colon",0],["for","i",0,"n",["if",["=","found_colon",0],["begin",["let","c",["view.get_u8","b","i"]],["if",["=","c",58],["begin",["set","scheme_end","i"],["set","found_colon",1]],["if",["=",["ext.url.parse._is_scheme_char","c",["=","i",0]],0],["begin",["set","scheme_end","i"],["set","found_colon",1]],["set","scheme_end",["+","i",1]]]]],0]],"scheme_end"],"kind":"defn","name":"ext.url.parse._find_scheme_end","params":[{"name":"b","ty":"bytes_view"}],"result":"i32"},{"body":["begin",["if",[">=u","c",97],["if",["<u","c",123],["return",1],0],0],["if",[">=u","c",65],["if",["<u","c",91],["return",1],0],0],["if","first",["return",0],0],["if",[">=u","c",48],["if",["<u","c",58],["return",1],0],0],["if",["if",["if",["=","c",43],1,["=","c",45]],1,["=","c",46]],["return",1],0],0],"kind":"defn","name":"ext.url.parse._is_scheme_char","params":[{"name":"c","ty":"i32"},{"name":"first","ty":"i32"}],"result":"i32"},{"body":["begin",["let","b",["codec.write_u32_le","x"]],["set","out",["vec_u8.extend_bytes_range","out","b",0,["bytes.len","b"]]],"out"],"kind":"defn","name":"ext.url.parse._push_u32_le","params":[{"name":"out","ty":"vec_u8"},{"name":"x","ty":"i32"}],"result":"vec_u8"},{"body":["begin",["if",["<u",["view.len","parsed"],48],["return",["bytes.alloc",0]],0],["let","start",["codec.read_u32_le","parsed",40]],["let","len",["codec.read_u32_le","parsed",44]],["view.to_bytes",["view.slice","url","start","len"]]],"kind":"defn","name":"ext.url.parse.url_fragment","params":[{"name":"parsed","ty":"bytes_view"},{"name":"url","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["if",["<u",["view.len","parsed"],16],["return",["bytes.alloc",0]],0],["let","start",["codec.read_u32_le","parsed",8]],["let","len",["codec.read_u32_le","parsed",12]],["view.to_bytes",["view.slice","url","start","len"]]],"kind":"defn","name":"ext.url.parse.url_host","params":[{"name":"parsed","ty":"bytes_view"},{"name":"url","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["let","n",["view.len","b"]],["let","out",["vec_u8.with_capacity",48]],["let","scheme_end",["ext.url.parse._find_scheme_end","b"]],["let","has_scheme",["if",["<u","scheme_end","n"],["=",["view.get_u8","b","scheme_end"],58],0]],["let","scheme_start",0],["let","scheme_len",["if","has_scheme","scheme_end",0]],["set","out",["ext.url.parse._push_u32_le","out","scheme_start"]],["set","out",["ext.url.parse._push_u32_le","out","scheme_len"]],["let","off",["if","has_scheme",["+","scheme_end",1],0]],["let","has_authority",["if",["<u",["+","off",1],"n"],["if",["=",["view.get_u8","b","off"],47],["=",["view.get_u8","b",["+","off",1]],47],0],0]],["if","has_authority",["set","off",["+","off",2]],0],["let","authority_start","off"],["let","path_start",["if","has_authority",["ext.url.parse._find_path_start","b","authority_start"],"authority_start"]],["let","host_end",["if","has_authority",["ext.url.parse._find_host_end_and_port","b","authority_start","path_start"],"authority_start"]],["let","has_port",["if","has_authority",["if",["<u","host_end","path_start"],["=",["view.get_u8","b","host_end"],58],0],0]],["let","port_start",["if","has_port",["+","host_end",1],"path_start"]],["set","out",["ext.url.parse._push_u32_le","out","authority_start"]],["set","out",["ext.url.parse._push_u32_le","out",["-","host_end","authority_start"]]],["let","port_len",["if","has_port",["-","path_start","port_start"],0]],["set","out",["ext.url.parse._push_u32_le","out","port_start"]],["set","out",["ext.url.parse._push_u32_le","out","port_len"]],["let","query_start",["ext.url.parse._find_query_start","b","path_start"]],["let","frag_start",["ext.url.parse._find_frag_start","b",["if",["<u","query_start","n"],"query_start","path_start"]]],["let","path_end",["ext.url.parse._find_path_end","b","path_start","query_start","frag_start"]],["set","out",["ext.url.parse._push_u32_le","out","path_start"]],["set","out",["ext.url.parse._push_u32_le","out",["-","path_end","path_start"]]],["let","query_end",["if",["<u","frag_start","n"],["-","frag_start",1],"n"]],["let","query_len",["if",["<u","query_start","n"],["-","query_end","query_start"],0]],["set","out",["ext.url.parse._push_u32_le","out","query_start"]],["set","out",["ext.url.parse._push_u32_le","out","query_len"]],["let","frag_len",["if",["<u","frag_start","n"],["-","n","frag_start"],0]],["set","out",["ext.url.parse._push_u32_le","out","frag_start"]],["set","out",["ext.url.parse._push_u32_le","out","frag_len"]],["vec_u8.into_bytes","out"]],"kind":"defn","name":"ext.url.parse.url_parse","params":[{"name":"b","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["if",["<u",["view.len","parsed"],32],["return",["bytes.alloc",0]],0],["let","start",["codec.read_u32_le","parsed",24]],["let","len",["codec.read_u32_le","parsed",28]],["view.to_bytes",["view.slice","url","start","len"]]],"kind":"defn","name":"ext.url.parse.url_path","params":[{"name":"parsed","ty":"bytes_view"},{"name":"url","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["if",["<u",["view.len","parsed"],24],["return",["bytes.alloc",0]],0],["let","start",["codec.read_u32_le","parsed",16]],["let","len",["codec.read_u32_le","parsed",20]],["view.to_bytes",["view.slice","url","start","len"]]],"kind":"defn","name":"ext.url.parse.url_port","params":[{"name":"parsed","ty":"bytes_view"},{"name":"url","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["if",["<u",["view.len","parsed"],40],["return",["bytes.alloc",0]],0],["let","start",["codec.read_u32_le","parsed",32]],["let","len",["codec.read_u32_le","parsed",36]],["view.to_bytes",["view.slice","url","start","len"]]],"kind":"defn","name":"ext.url.parse.url_query","params":[{"name":"parsed","ty":"bytes_view"},{"name":"url","ty":"bytes_view"}],"result":"bytes"},{"body":["begin",["if",["<u",["view.len","parsed"],8],["return",["bytes.alloc",0]],0],["let","start",["codec.read_u32_le","parsed",0]],["let","len",["codec.read_u32_le","parsed",4]],["view.to_bytes",["view.slice","url","start","len"]]],"kind":"defn","name":"ext.url.parse.url_scheme","params":[{"name":"parsed","ty":"bytes_view"},{"name":"url","ty":"bytes_view"}],"result":"bytes"}],"imports":[],"kind":"module","meta":{"generated_by":"x07import","source_path":"tests/x07import/fixtures/import_sources/rust/ext_url@0.1.0/url.rs","source_sha256":"02af720530c016a525f6869734bd0cefbc61d4c5d22b04fe6a8e999866d25875"},"module_id":"ext.url.parse","schema_version":"x07.x07ast@0.3.0"}
